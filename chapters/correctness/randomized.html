
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>6.6. Randomized Testing with QCheck &#8212; OCaml Programming: Correct + Efficient + Beautiful</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" href="../../_static/styles/sphinx-book-theme.css?digest=5115cc725059bd94278eecd172e13a965bf8f5a9" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/custom.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/design-style.b7bb847fb20b106c3d81b95245e65545.min.css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <script src="../../_static/scripts/sphinx-book-theme.js?digest=9c920249402e914e316237a7dbc6769907cce411"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../../_static/togglebutton.js"></script>
    <script async="async" kind="hypothesis" src="https://hypothes.is/embed.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../../_static/sphinx-thebe.js"></script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="6.7. Proving Correctness" href="proving_correctness.html" />
    <link rel="prev" title="6.5. Black-box and Glass-box Testing" href="black_glass_box.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
<!-- Checkboxes to toggle the left sidebar -->
<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle navigation sidebar">
<label class="overlay overlay-navbar" for="__navigation">
    <div class="visually-hidden">Toggle navigation sidebar</div>
</label>
<!-- Checkboxes to toggle the in-page toc -->
<input type="checkbox" class="sidebar-toggle" name="__page-toc" id="__page-toc" aria-label="Toggle in-page Table of Contents">
<label class="overlay overlay-pagetoc" for="__page-toc">
    <div class="visually-hidden">Toggle in-page Table of Contents</div>
</label>
<!-- Headers at the top -->
<div class="announcement header-item noprint"></div>
<div class="header header-item noprint"></div>

    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<!-- Sidebar -->
<div class="bd-sidebar noprint" id="site-navigation">
    <div class="bd-sidebar__content">
        <div class="bd-sidebar__top"><div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../../index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="../../_static/lambda-light.png" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">OCaml Programming: Correct + Efficient + Beautiful</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Preface
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../preface/about.html">
   About This Book
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../preface/install.html">
   Installing OCaml
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Introduction
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../intro/intro.html">
   1. Better Programming Through OCaml
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../intro/past.html">
     1.1. The Past of OCaml
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../intro/present.html">
     1.2. The Present of OCaml
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../intro/future.html">
     1.3. Look to Your Future
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../intro/3110.html">
     1.4. A Brief History of CS 3110
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../intro/summary.html">
     1.5. Summary
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../basics/intro.html">
   2. The Basics of OCaml
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
  <label for="toctree-checkbox-2">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../basics/toplevel.html">
     2.1. The OCaml Toplevel
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../basics/compiling.html">
     2.2. Compiling OCaml Programs
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../basics/expressions.html">
     2.3. Expressions
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../basics/functions.html">
     2.4. Functions
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../basics/documentation.html">
     2.5. Documentation
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../basics/printing.html">
     2.6. Printing
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../basics/debugging.html">
     2.7. Debugging
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../basics/summary.html">
     2.8. Summary
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../basics/exercises.html">
     2.9. Exercises
    </a>
   </li>
  </ul>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  OCaml Programming
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../data/intro.html">
   3. Data and Types
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/>
  <label for="toctree-checkbox-3">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../data/lists.html">
     3.1. Lists
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../data/variants.html">
     3.2. Variants
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../data/ounit.html">
     3.3. Unit Testing with OUnit
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../data/records_tuples.html">
     3.4. Records and Tuples
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../data/pattern_matching_advanced.html">
     3.5. Advanced Pattern Matching
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../data/type_synonym.html">
     3.6. Type Synonyms
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../data/options.html">
     3.7. Options
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../data/assoc_list.html">
     3.8. Association Lists
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../data/algebraic_data_types.html">
     3.9. Algebraic Data Types
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../data/exceptions.html">
     3.10. Exceptions
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../data/trees.html">
     3.11. Example: Trees
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../data/nats.html">
     3.12. Example: Natural Numbers
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../data/summary.html">
     3.13. Summary
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../data/exercises.html">
     3.14. Exercises
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../hop/intro.html">
   4. Higher-Order Programming
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/>
  <label for="toctree-checkbox-4">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../hop/higher_order.html">
     4.1. Higher-Order Functions
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../hop/map.html">
     4.2. Map
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../hop/filter.html">
     4.3. Filter
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../hop/fold.html">
     4.4. Fold
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../hop/beyond_lists.html">
     4.5. Beyond Lists
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../hop/pipelining.html">
     4.6. Pipelining
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../hop/currying.html">
     4.7. Currying
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../hop/summary.html">
     4.8. Summary
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../hop/exercises.html">
     4.9. Exercises
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../modules/intro.html">
   5. Modular Programming
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/>
  <label for="toctree-checkbox-5">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../modules/module_systems.html">
     5.1. Module Systems
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../modules/modules.html">
     5.2. Modules
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../modules/toplevel.html">
     5.3. Modules and the Toplevel
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../modules/encapsulation.html">
     5.4. Encapsulation
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../modules/compilation_units.html">
     5.5. Compilation Units
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../modules/functional_data_structures.html">
     5.6. Functional Data Structures
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../modules/module_type_constraints.html">
     5.7. Module Type Constraints
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../modules/includes.html">
     5.8. Includes
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../modules/functors.html">
     5.9. Functors
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../modules/summary.html">
     5.10. Summary
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../modules/exercises.html">
     5.11. Exercises
    </a>
   </li>
  </ul>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Correctness and Efficiency
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1 current active has-children">
  <a class="reference internal" href="intro.html">
   6. Correctness
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/>
  <label for="toctree-checkbox-6">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="current">
   <li class="toctree-l2">
    <a class="reference internal" href="specifications.html">
     6.1. Specifications
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="function_docs.html">
     6.2. Function Documentation
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="module_docs.html">
     6.3. Module Documentation
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="test_debug.html">
     6.4. Testing and Debugging
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="black_glass_box.html">
     6.5. Black-box and Glass-box Testing
    </a>
   </li>
   <li class="toctree-l2 current active">
    <a class="current reference internal" href="#">
     6.6. Randomized Testing with QCheck
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="proving_correctness.html">
     6.7. Proving Correctness
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="structural_induction.html">
     6.8. Structural Induction
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="alg_spec.html">
     6.9. Algebraic Specification
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="summary.html">
     6.10. Summary
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="exercises.html">
     6.11. Exercises
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../mut/intro.html">
   7. Mutability
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/>
  <label for="toctree-checkbox-7">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../mut/refs.html">
     7.1. Refs
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../mut/mutable_fields.html">
     7.2. Mutable Fields
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../mut/arrays.html">
     7.3. Arrays and Loops
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../mut/summary.html">
     7.4. Summary
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../mut/exercises.html">
     7.5. Exercises
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../ds/intro.html">
   8. Data Structures
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" type="checkbox"/>
  <label for="toctree-checkbox-8">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../ds/hash_tables.html">
     8.1. Hash Tables
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../ds/amortized.html">
     8.2. Amortized Analysis
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../ds/rb.html">
     8.3. Red-Black Trees
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../ds/sequence.html">
     8.4. Sequences
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../ds/memoization.html">
     8.5. Memoization
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../ds/promises.html">
     8.6. Promises
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../ds/monads.html">
     8.7. Monads
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../ds/summary.html">
     8.8. Summary
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../ds/exercises.html">
     8.9. Exercises
    </a>
   </li>
  </ul>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Language Implementation
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../interp/intro.html">
   9. Interpreters
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" type="checkbox"/>
  <label for="toctree-checkbox-9">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../interp/calculator.html">
     9.1. Example: Calculator
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../interp/parsing.html">
     9.2. Parsing
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../interp/substitution.html">
     9.3. Substitution Model
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../interp/environment.html">
     9.4. Environment Model
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../interp/typecheck.html">
     9.5. Type Checking
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../interp/inference.html">
     9.6. Type Inference
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../interp/summary.html">
     9.7. Summary
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../interp/exercises.html">
     9.8. Exercises
    </a>
   </li>
  </ul>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Lagniappe
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../adv/curry-howard.html">
   The Curry-Howard Correspondence
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Appendix
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../appendix/bigoh.html">
   Big-Oh Notation
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../appendix/vm.html">
   Virtual Machine
  </a>
 </li>
</ul>

    </div>
</nav></div>
        <div class="bd-sidebar__bottom">
             <!-- To handle the deprecated key -->
            
            <div class="navbar_extra_footer">
            Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
            </div>
            
        </div>
    </div>
    <div id="rtd-footer-container"></div>
</div>


          


          
<!-- A tiny helper pixel to detect if we've scrolled -->
<div class="sbt-scroll-pixel-helper"></div>
<!-- Main content -->
<div class="col py-0 content-container">
    
    <div class="header-article row sticky-top noprint">
        



<div class="col py-1 d-flex header-article-main">
    <div class="header-article__left">
        
        <label for="__navigation"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="right"
title="Toggle navigation"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-bars"></i>
  </span>

</label>

        
    </div>
    <div class="header-article__right">
<div class="menu-dropdown menu-dropdown-launch-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Launch interactive content">
      <i class="fas fa-rocket"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="https://mybinder.org/v2/gh/cs3110/textbook/main?urlpath=tree/src/chapters/correctness/randomized.md"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Launch on Binder"
>
  

<span class="headerbtn__icon-container">
  
    <img src="../../_static/images/logo_binder.svg">
  </span>
<span class="headerbtn__text-container">Binder</span>
</a>

      </li>
      
      <li>
        
<button onclick="initThebeSBT()"
  class="headerbtn headerbtn-launch-thebe"
  data-toggle="tooltip"
data-placement="left"
title="Launch Thebe"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-play"></i>
  </span>
<span class="headerbtn__text-container">Live Code</span>
</button>

      </li>
      
    </ul>
  </div>
</div>

<button onclick="toggleFullScreen()"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="bottom"
title="Fullscreen mode"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>

<div class="menu-dropdown menu-dropdown-repository-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Source repositories">
      <i class="fab fa-github"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="https://github.com/cs3110/textbook"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Source repository"
>
  

<span class="headerbtn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="headerbtn__text-container">repository</span>
</a>

      </li>
      
      <li>
        <a href="https://github.com/cs3110/textbook/issues/new?title=Issue%20on%20page%20%2Fchapters/correctness/randomized.html&body=Your%20issue%20content%20here."
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Open an issue"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="headerbtn__text-container">open issue</span>
</a>

      </li>
      
      <li>
        <a href="https://github.com/cs3110/textbook/edit/main/src/chapters/correctness/randomized.md"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Edit this page"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-pencil-alt"></i>
  </span>
<span class="headerbtn__text-container">suggest edit</span>
</a>

      </li>
      
    </ul>
  </div>
</div>

<div class="menu-dropdown menu-dropdown-download-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Download this page">
      <i class="fas fa-download"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="../../_sources/chapters/correctness/randomized.ipynb"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Download notebook file"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-code"></i>
  </span>
<span class="headerbtn__text-container">.ipynb</span>
</a>

      </li>
      
      <li>
        <a href="../../_sources/chapters/correctness/randomized.md"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Download source file"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="headerbtn__text-container">.md</span>
</a>

      </li>
      
      <li>
        
<button onclick="printPdf(this)"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="left"
title="Print to PDF"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="headerbtn__text-container">.pdf</span>
</button>

      </li>
      
    </ul>
  </div>
</div>
<label for="__page-toc"
  class="headerbtn headerbtn-page-toc"
  
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-list"></i>
  </span>

</label>

    </div>
</div>

<!-- Table of contents -->
<div class="col-md-3 bd-toc show noprint">
    <div class="tocsection onthispage pt-5 pb-3">
        <i class="fas fa-list"></i> Contents
    </div>
    <nav id="bd-toc-nav" aria-label="Page">
        <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#random-number-generation">
   6.6.1. Random Number Generation
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#qcheck-abstractions">
   6.6.2. QCheck Abstractions
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#testing-properties">
   6.6.3. Testing Properties
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#informative-output-from-qcheck">
   6.6.4. Informative Output from QCheck
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#testing-functions-with-qcheck">
   6.6.5. Testing Functions with QCheck
  </a>
 </li>
</ul>

    </nav>
</div>
    </div>
    <div class="article row">
        <div class="col pl-md-3 pl-lg-5 content-container">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>Randomized Testing with QCheck</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#random-number-generation">
   6.6.1. Random Number Generation
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#qcheck-abstractions">
   6.6.2. QCheck Abstractions
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#testing-properties">
   6.6.3. Testing Properties
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#informative-output-from-qcheck">
   6.6.4. Informative Output from QCheck
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#testing-functions-with-qcheck">
   6.6.5. Testing Functions with QCheck
  </a>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            <main id="main-content" role="main">
                
              <div>
                
  <section class="tex2jax_ignore mathjax_ignore" id="randomized-testing-with-qcheck">
<h1><span class="section-number">6.6. </span>Randomized Testing with QCheck<a class="headerlink" href="#randomized-testing-with-qcheck" title="Permalink to this headline">#</a></h1>
<div class="container16x9"><iframe src="https://www.youtube.com/embed/62SYeSlSCNM" class="responsive-iframe" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe></div>
<p><em>Randomized testing</em> aka <em>fuzz testing</em> is the process of generating random
inputs and feeding them to a program or a function to see whether the program
behaves correctly. The immediate issue is how to determine what the correct
output is for a given input. If a <em>reference implementation</em> is
available—that is, an implementation that is believed to be correct but in
some other way does not suffice (e.g., its performance is too slow, or it is in
a different language)—then the outputs of the two implementations can be
compared. Otherwise, perhaps some <em>property</em> of the output could be checked. For
example,</p>
<ul class="simple">
<li><p>“not crashing” is a property of interest in user interfaces;</p></li>
<li><p>adding <span class="math notranslate nohighlight">\(n\)</span> elements to a data collection then removing those elements, and
ending up with an empty collection, is a property of interest in data
structures; and</p></li>
<li><p>encrypting a string under a key then decrypting it under that key and getting
back the original string is a property of interest in an encryption scheme
like Enigma.</p></li>
</ul>
<p>Randomized testing is an incredibly powerful technique. It is often used in
testing programs for security vulnerabilities. The <a class="reference external" href="https://github.com/c-cube/qcheck"><code class="docutils literal notranslate"><span class="pre">qcheck</span></code> package</a>
for OCaml supports randomized testing. We’ll look at it, next, after we discuss
random number generation.</p>
<section id="random-number-generation">
<h2><span class="section-number">6.6.1. </span>Random Number Generation<a class="headerlink" href="#random-number-generation" title="Permalink to this headline">#</a></h2>
<p>To understand randomized testing, we need to take a brief digression into random
number generation.</p>
<p>Most languages provide the facility to generate random numbers. In truth, these
generators are usually not truly random (in the sense that they are completely
unpredictable) but in fact are <a class="reference external" href="https://en.wikipedia.org/wiki/Pseudorandom_number_generator"><em>pseudorandom</em></a>: the sequence of numbers
they generate pass good statistical tests to ensure there is no discernible
pattern in them, but the sequence itself is a deterministic function of an
initial <em>seed</em> value. (Recall that the prefix <em>pseudo</em> is from the Greek
<em>pseudēs</em> meaning “false”.) <a class="reference external" href="https://docs.oracle.com/javase/8/docs/api/java/util/Random.html">Java</a> and
<a class="reference external" href="https://docs.python.org/3/library/random.html">Python</a> both provide pseudorandom number generators (PRNGs). So
does OCaml in the standard library’s <a class="reference external" href="https://ocaml.org/api/Random.html"><code class="docutils literal notranslate"><span class="pre">Random</span></code> module</a>.</p>
<p><strong>An Experiment.</strong> Start a new session of utop and enter the following:</p>
<div class="highlight-ocaml notranslate"><div class="highlight"><pre><span></span><span class="o">#</span> <span class="nn">Random</span><span class="p">.</span><span class="n">int</span> <span class="mi">100</span><span class="o">;;</span>
<span class="o">#</span> <span class="nn">Random</span><span class="p">.</span><span class="n">int</span> <span class="mi">100</span><span class="o">;;</span>
<span class="o">#</span> <span class="nn">Random</span><span class="p">.</span><span class="n">int</span> <span class="mi">100</span><span class="o">;;</span>
</pre></div>
</div>
<p>Each response will be an integer <span class="math notranslate nohighlight">\(i\)</span> such that <span class="math notranslate nohighlight">\(0 \leq i &lt; 100\)</span>.</p>
<p>Now quit utop and start another new session. Enter the same phrases again. You
will get the same responses as last time. In fact, unless your OCaml
installation is somehow different than that used to produce this book, you will
get the same numbers as those below:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-OCaml notranslate"><div class="highlight"><pre><span></span><span class="nn">Random</span><span class="p">.</span><span class="n">int</span> <span class="mi">100</span><span class="o">;;</span>
<span class="nn">Random</span><span class="p">.</span><span class="n">int</span> <span class="mi">100</span><span class="o">;;</span>
<span class="nn">Random</span><span class="p">.</span><span class="n">int</span> <span class="mi">100</span><span class="o">;;</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>- : int = 44
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>- : int = 85
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>- : int = 82
</pre></div>
</div>
</div>
</div>
<p>Not exactly unpredictable, eh?</p>
<p><strong>PRNGs.</strong> Although for purposes of security and cryptography a PRNG leads to
terrible vulnerabilities, for other purposes—including testing and
simulation—PRNGs are just fine. Their predictability can even be useful:
given the same initial seed, a PRNG will always produce the same sequence of
pseudorandom numbers, leading to the ability to repeat a particular sequence of
tests or a particular simulation.</p>
<p>The way a PRNG works in general is that it initializes a <em>state</em> that it keeps
internally from the initial seed. From then on, each time the PRNG generates a
new value, it imperatively updates that state. The <code class="docutils literal notranslate"><span class="pre">Random</span></code> module makes it
possible to manipulate that state in limited ways. For example, you can</p>
<ul class="simple">
<li><p>get the current state with <code class="docutils literal notranslate"><span class="pre">Random.get_state</span></code>,</p></li>
<li><p>duplicate the current state with <code class="docutils literal notranslate"><span class="pre">Random.State.copy</span></code>,</p></li>
<li><p>request a random int generated from a particular state with
<code class="docutils literal notranslate"><span class="pre">Random.State.int</span></code>, and</p></li>
<li><p>initialize the state yourself. The functions <code class="docutils literal notranslate"><span class="pre">Random.self_init</span></code> and
<code class="docutils literal notranslate"><span class="pre">Random.State.make_self_init</span></code> will choose a “random” seed to initialize the
state. They do so by sampling from a special Unix file named
<a class="reference external" href="https://en.wikipedia.org/wiki//dev/random"><code class="docutils literal notranslate"><span class="pre">/dev/urandom</span></code></a>, which is meant to provide as close to true
randomness as a computer can.</p></li>
</ul>
<p><strong>Repeating the Experiment.</strong> Start a new session of utop. Enter the following:</p>
<div class="highlight-ocaml notranslate"><div class="highlight"><pre><span></span><span class="o">#</span> <span class="nn">Random</span><span class="p">.</span><span class="n">self_init</span> <span class="bp">()</span><span class="o">;;</span>
<span class="o">#</span> <span class="nn">Random</span><span class="p">.</span><span class="n">int</span> <span class="mi">100</span><span class="o">;;</span>
<span class="o">#</span> <span class="nn">Random</span><span class="p">.</span><span class="n">int</span> <span class="mi">100</span><span class="o">;;</span>
<span class="o">#</span> <span class="nn">Random</span><span class="p">.</span><span class="n">int</span> <span class="mi">100</span><span class="o">;;</span>
</pre></div>
</div>
<p>Now do that a second time (it doesn’t matter whether you exit utop
or not in between).  You will notice that you get a different
sequence of values.  With high probability, what you get will be different
than the values below:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-OCaml notranslate"><div class="highlight"><pre><span></span><span class="nn">Random</span><span class="p">.</span><span class="n">self_init</span> <span class="bp">()</span><span class="o">;;</span>
<span class="nn">Random</span><span class="p">.</span><span class="n">int</span> <span class="mi">100</span><span class="o">;;</span>
<span class="nn">Random</span><span class="p">.</span><span class="n">int</span> <span class="mi">100</span><span class="o">;;</span>
<span class="nn">Random</span><span class="p">.</span><span class="n">int</span> <span class="mi">100</span><span class="o">;;</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>- : unit = ()
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>- : int = 39
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>- : int = 56
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>- : int = 83
</pre></div>
</div>
</div>
</div>
</section>
<section id="qcheck-abstractions">
<h2><span class="section-number">6.6.2. </span>QCheck Abstractions<a class="headerlink" href="#qcheck-abstractions" title="Permalink to this headline">#</a></h2>
<p>QCheck has three abstractions we need to cover before using it for testing:
generators, properties, and arbitraries.  If you want to follow along in
utop, load QCheck with this directive:</p>
<div class="cell tag_remove-output docutils container">
<div class="cell_input docutils container">
<div class="highlight-OCaml notranslate"><div class="highlight"><pre><span></span><span class="o">#</span><span class="n">require</span> <span class="s2">&quot;qcheck&quot;</span><span class="o">;;</span>
</pre></div>
</div>
</div>
</div>
<p><strong>Generators.</strong> One of the key pieces of functionality provided by QCheck is the
ability to generate pseudorandom values of various types. Here is some of the
signature of the module that does that:</p>
<div class="highlight-ocaml notranslate"><div class="highlight"><pre><span></span><span class="k">module</span> <span class="nc">QCheck</span> <span class="o">:</span> <span class="k">sig</span>
  <span class="o">...</span>
  <span class="k">module</span> <span class="nc">Gen</span> <span class="o">:</span>
  <span class="k">sig</span>
    <span class="k">type</span> <span class="k">&#39;</span><span class="n">a</span> <span class="n">t</span> <span class="o">=</span> <span class="nn">Random</span><span class="p">.</span><span class="nn">State</span><span class="p">.</span><span class="n">t</span> <span class="o">-&gt;</span> <span class="k">&#39;</span><span class="n">a</span>
    <span class="k">val</span> <span class="kt">int</span> <span class="o">:</span> <span class="kt">int</span> <span class="n">t</span>
    <span class="k">val</span> <span class="n">generate</span> <span class="o">:</span> <span class="o">?</span><span class="n">rand</span><span class="o">:</span><span class="nn">Random</span><span class="p">.</span><span class="nn">State</span><span class="p">.</span><span class="n">t</span> <span class="o">-&gt;</span> <span class="n">n</span><span class="o">:</span><span class="kt">int</span> <span class="o">-&gt;</span> <span class="k">&#39;</span><span class="n">a</span> <span class="n">t</span> <span class="o">-&gt;</span> <span class="k">&#39;</span><span class="n">a</span> <span class="kt">list</span>
    <span class="k">val</span> <span class="n">generate1</span> <span class="o">:</span> <span class="o">?</span><span class="n">rand</span><span class="o">:</span><span class="nn">Random</span><span class="p">.</span><span class="nn">State</span><span class="p">.</span><span class="n">t</span> <span class="o">-&gt;</span> <span class="k">&#39;</span><span class="n">a</span> <span class="n">t</span> <span class="o">-&gt;</span> <span class="k">&#39;</span><span class="n">a</span>
    <span class="o">...</span>
  <span class="k">end</span>
  <span class="o">...</span>
<span class="k">end</span>
</pre></div>
</div>
<p>An <code class="docutils literal notranslate"><span class="pre">'a</span> <span class="pre">QCheck.Gen.t</span></code> is a function that takes in a PRNG state and uses it to
produce a pseudorandom value of type <code class="docutils literal notranslate"><span class="pre">'a</span></code>. So <code class="docutils literal notranslate"><span class="pre">QCheck.Gen.int</span></code> produces
pseudorandom integers. The function <code class="docutils literal notranslate"><span class="pre">generate1</span></code> actually does the generation of
one pseudorandom value. It takes an optional argument that is a PRNG state; if
that argument is not supplied, it uses the default PRNG state. The function
<code class="docutils literal notranslate"><span class="pre">generate</span></code> produces a list of <code class="docutils literal notranslate"><span class="pre">n</span></code> pseudorandom values.</p>
<p>QCheck implements many producers of pseudorandom values. Here are a few more of
them:</p>
<div class="highlight-ocaml notranslate"><div class="highlight"><pre><span></span><span class="k">module</span> <span class="nc">QCheck</span> <span class="o">:</span> <span class="k">sig</span>
  <span class="o">...</span>
  <span class="k">module</span> <span class="nc">Gen</span> <span class="o">:</span>
  <span class="k">sig</span>
    <span class="k">val</span> <span class="kt">int</span> <span class="o">:</span> <span class="kt">int</span> <span class="n">t</span>
    <span class="k">val</span> <span class="n">small_int</span> <span class="o">:</span> <span class="kt">int</span> <span class="n">t</span>
    <span class="k">val</span> <span class="n">int_range</span> <span class="o">:</span> <span class="kt">int</span> <span class="o">-&gt;</span> <span class="kt">int</span> <span class="o">-&gt;</span> <span class="kt">int</span> <span class="n">t</span>
    <span class="k">val</span> <span class="kt">list</span> <span class="o">:</span> <span class="k">&#39;</span><span class="n">a</span> <span class="n">t</span> <span class="o">-&gt;</span> <span class="k">&#39;</span><span class="n">a</span> <span class="kt">list</span> <span class="n">t</span>
    <span class="k">val</span> <span class="n">list_size</span> <span class="o">:</span> <span class="kt">int</span> <span class="n">t</span> <span class="o">-&gt;</span> <span class="k">&#39;</span><span class="n">a</span> <span class="n">t</span> <span class="o">-&gt;</span> <span class="k">&#39;</span><span class="n">a</span> <span class="kt">list</span> <span class="n">t</span>
    <span class="k">val</span> <span class="kt">string</span> <span class="o">:</span> <span class="o">?</span><span class="n">gen</span><span class="o">:</span><span class="kt">char</span> <span class="n">t</span> <span class="o">-&gt;</span> <span class="kt">string</span> <span class="n">t</span>
    <span class="k">val</span> <span class="n">small_string</span> <span class="o">:</span> <span class="o">?</span><span class="n">gen</span><span class="o">:</span><span class="kt">char</span> <span class="n">t</span> <span class="o">-&gt;</span> <span class="kt">string</span> <span class="n">t</span>
    <span class="o">...</span>
  <span class="k">end</span>
  <span class="o">...</span>
<span class="k">end</span>
</pre></div>
</div>
<p>You can <a class="reference external" href="https://c-cube.github.io/qcheck/0.17/qcheck-core/QCheck/Gen/index.html">read the documentation</a> of those and many others.</p>
<p><strong>Properties.</strong> It’s tempting to think that QCheck would enable us to test a
function by generating many pseudorandom inputs to the function, running the
function on them, then checking that the outputs are correct. But there’s
immediately a problem: how can QCheck know what the correct output is for each
of those inputs? Since they’re randomly generated, the test engineer can’t
hardcode the right outputs.</p>
<p>So instead, QCheck allows us to check whether a <em>property</em> of each output holds.
A property is a function of type <code class="docutils literal notranslate"><span class="pre">t</span> <span class="pre">-&gt;</span> <span class="pre">bool</span></code>, for some type <code class="docutils literal notranslate"><span class="pre">t</span></code>, that tells use
whether the value of type <code class="docutils literal notranslate"><span class="pre">t</span></code> exhibits some desired characteristic. Here, for
example, are two properties; one that determines whether an integer is
even, and another that determines whether a list is sorted in non-decreasing
order according to the built-in <code class="docutils literal notranslate"><span class="pre">&lt;=</span></code> operator:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-OCaml notranslate"><div class="highlight"><pre><span></span><span class="k">let</span> <span class="n">is_even</span> <span class="n">n</span> <span class="o">=</span> <span class="n">n</span> <span class="ow">mod</span> <span class="mi">2</span> <span class="o">=</span> <span class="mi">0</span>

<span class="k">let</span> <span class="k">rec</span> <span class="n">is_sorted</span> <span class="o">=</span> <span class="k">function</span>
  <span class="o">|</span> <span class="bp">[]</span> <span class="o">-&gt;</span> <span class="bp">true</span>
  <span class="o">|</span> <span class="o">[</span> <span class="n">h</span> <span class="o">]</span> <span class="o">-&gt;</span> <span class="bp">true</span>
  <span class="o">|</span> <span class="n">h1</span> <span class="o">::</span> <span class="o">(</span><span class="n">h2</span> <span class="o">::</span> <span class="n">t</span> <span class="k">as</span> <span class="n">t&#39;</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="n">h1</span> <span class="o">&lt;=</span> <span class="n">h2</span> <span class="o">&amp;&amp;</span> <span class="n">is_sorted</span> <span class="n">t&#39;</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>val is_even : int -&gt; bool = &lt;fun&gt;
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>val is_sorted : &#39;a list -&gt; bool = &lt;fun&gt;
</pre></div>
</div>
</div>
</div>
<p><strong>Arbitraries.</strong> The way we present to QCheck the outputs to be checked is with
a value of type <code class="docutils literal notranslate"><span class="pre">'a</span> <span class="pre">QCheck.Arbitrary</span></code>. This type represents an “arbitrary” value
of type <code class="docutils literal notranslate"><span class="pre">'a</span></code>—that is, it has been pseudorandomly chosen as a value that we
want to check, and more specifically, to check whether it satisfies a property.</p>
<p>We can create <em>arbitraries</em> out of generators using the function
<code class="docutils literal notranslate"><span class="pre">QCheck.make</span> <span class="pre">:</span> <span class="pre">'a</span> <span class="pre">QCheck.Gen.t</span> <span class="pre">-&gt;</span> <span class="pre">'a</span> <span class="pre">QCheck.arbitrary</span></code>. (Actually that function
takes some optional arguments that we elide here.) This isn’t actually the
normal way to create arbitraries, but it’s a simple way that will help us
understand them; we’ll get to the normal way in a little while. For example, the
following expression represents an arbitrary integer:</p>
<div class="cell tag_hide-output docutils container">
<div class="cell_input docutils container">
<div class="highlight-OCaml notranslate"><div class="highlight"><pre><span></span><span class="nn">QCheck</span><span class="p">.</span><span class="n">make</span> <span class="nn">QCheck</span><span class="p">.</span><span class="nn">Gen</span><span class="p">.</span><span class="n">int</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>- : int QCheck.arbitrary =
{QCheck.gen = &lt;fun&gt;; print = None; small = None; shrink = None;
 collect = None; stats = []}
</pre></div>
</div>
</div>
</div>
</section>
<section id="testing-properties">
<h2><span class="section-number">6.6.3. </span>Testing Properties<a class="headerlink" href="#testing-properties" title="Permalink to this headline">#</a></h2>
<p>To construct a QCheck test, we create an arbitrary and a property, and pass them
to <code class="docutils literal notranslate"><span class="pre">QCheck.Test.make</span></code>, whose type can be simplified to:</p>
<div class="highlight-ocaml notranslate"><div class="highlight"><pre><span></span><span class="nn">QCheck</span><span class="p">.</span><span class="nn">Test</span><span class="p">.</span><span class="n">make</span> <span class="o">:</span> <span class="k">&#39;</span><span class="n">a</span> <span class="nn">QCheck</span><span class="p">.</span><span class="n">arbitrary</span> <span class="o">-&gt;</span> <span class="o">(</span><span class="k">&#39;</span><span class="n">a</span> <span class="o">-&gt;</span> <span class="kt">bool</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="nn">QCheck</span><span class="p">.</span><span class="nn">Test</span><span class="p">.</span><span class="n">t</span>
</pre></div>
</div>
<p>In reality, that function also takes several optional arguments that we elide
here. The test will generate some number of arbitraries and check whether the
property holds of each of them. For example, the following code creates a QCheck
test that checks whether an arbitrary integer is even:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-OCaml notranslate"><div class="highlight"><pre><span></span><span class="k">let</span> <span class="n">t</span> <span class="o">=</span> <span class="nn">QCheck</span><span class="p">.</span><span class="nn">Test</span><span class="p">.</span><span class="n">make</span> <span class="o">(</span><span class="nn">QCheck</span><span class="p">.</span><span class="n">make</span> <span class="nn">QCheck</span><span class="p">.</span><span class="nn">Gen</span><span class="p">.</span><span class="n">int</span><span class="o">)</span> <span class="n">is_even</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>val t : QCheck.Test.t = QCheck2.Test.Test &lt;abstr&gt;
</pre></div>
</div>
</div>
</div>
<p>If we want to change the number of arbitraries that are checked, we can
pass an optional integer argument <code class="docutils literal notranslate"><span class="pre">~count</span></code> to <code class="docutils literal notranslate"><span class="pre">QCheck.Test.make</span></code>.</p>
<p>We can run that test with <code class="docutils literal notranslate"><span class="pre">QCheck_runner.run_tests</span> <span class="pre">:</span> <span class="pre">QCheck.Test.t</span> <span class="pre">list</span> <span class="pre">-&gt;</span> <span class="pre">int</span></code>.
(Once more, that function takes some optional arguments that we elide here.) The
integer it returns is 0 if all the tests in the list pass, and 1 otherwise. For
the test above, running it will output 1 with high probability, because it will
generate at least one odd integer.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-OCaml notranslate"><div class="highlight"><pre><span></span><span class="nn">QCheck_runner</span><span class="p">.</span><span class="n">run_tests</span> <span class="o">[</span><span class="n">t</span><span class="o">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>
random seed: 411235928
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>--- <span class=" -Color -Color-Bold -Color-Bold-Red">Failure</span> --------------------------------------------------------------------
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Test anon_test_1 failed (0 shrink steps):
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;no printer&gt;
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>================================================================================
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span><span class=" -Color -Color-Bold -Color-Bold-Red">failure</span> (1 tests failed, 0 tests errored, ran 1 tests)
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>- : int = 1
</pre></div>
</div>
</div>
</div>
<p>Unfortunately, that output isn’t very informative; it doesn’t tell us what
particular values failed to satisfy the property! We’ll fix that problem in a
little while.</p>
<p>If you want to make an OCaml program that runs QCheck tests and prints the
results, there is a function <code class="docutils literal notranslate"><span class="pre">QCheck_runner.run_tests_main</span></code> that works much like
<code class="docutils literal notranslate"><span class="pre">OUnit2.run_test_tt_main</span></code>: just invoke it as the final expression in a test
file. For example:</p>
<div class="highlight-ocaml notranslate"><div class="highlight"><pre><span></span><span class="k">let</span> <span class="n">tests</span> <span class="o">=</span> <span class="c">(* code that constructs a [QCheck.Test.t list] *)</span>
<span class="k">let</span> <span class="o">_</span> <span class="o">=</span> <span class="nn">QCheck_runner</span><span class="p">.</span><span class="n">run_tests_main</span> <span class="n">tests</span>
</pre></div>
</div>
<p>To compile QCheck code, just add the <code class="docutils literal notranslate"><span class="pre">qcheck</span></code> library to your <code class="docutils literal notranslate"><span class="pre">dune</span></code> file:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">(executable</span>
<span class="go"> ...</span>
<span class="go"> (libraries ... qcheck))</span>
</pre></div>
</div>
<p>QCheck tests can be converted to OUnit tests and included in the usual kind of
OUnit test suite we’ve been writing all along. The function that does this is:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-OCaml notranslate"><div class="highlight"><pre><span></span><span class="nn">QCheck_runner</span><span class="p">.</span><span class="n">to_ounit2_test</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>- : ?rand:Random.State.t -&gt; QCheck2.Test.t -&gt; OUnit2.test = &lt;fun&gt;
</pre></div>
</div>
</div>
</div>
</section>
<section id="informative-output-from-qcheck">
<h2><span class="section-number">6.6.4. </span>Informative Output from QCheck<a class="headerlink" href="#informative-output-from-qcheck" title="Permalink to this headline">#</a></h2>
<p>We noted above that the output of QCheck so far has told us only <em>whether</em> some
arbitraries satisfied a property, but not <em>which</em> arbitraries failed to satisfy
it. Let’s fix that problem.</p>
<p>The issue is with how we constructed an arbitrary directly out of a generator.
An arbitrary is properly more than just a generator. The QCheck library needs to
know how to print values of the generator, and a few other things as well. You
can see that in the definition of <code class="docutils literal notranslate"><span class="pre">'a</span> <span class="pre">QCheck.arbitrary</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-OCaml notranslate"><div class="highlight"><pre><span></span><span class="o">#</span><span class="n">show</span> <span class="nn">QCheck</span><span class="p">.</span><span class="n">arbitrary</span><span class="o">;;</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>type &#39;a arbitrary = private {
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>  gen : &#39;a QCheck.Gen.t;
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>  print : (&#39;a -&gt; string) option;
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>  small : (&#39;a -&gt; int) option;
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>  shrink : &#39;a QCheck.Shrink.t option;
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>  collect : (&#39;a -&gt; string) option;
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>  stats : &#39;a QCheck.stat list;
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>}
</pre></div>
</div>
</div>
</div>
<p>In addition to the generator field <code class="docutils literal notranslate"><span class="pre">gen</span></code>, there is a field containing an
optional function to print values from the generator, and a few other optional
fields as well. Luckily, we don’t usually have to find a way to complete those
fields ourselves; the <code class="docutils literal notranslate"><span class="pre">QCheck</span></code> module provides many arbitraries that correspond
to the generators found in <code class="docutils literal notranslate"><span class="pre">QCheck.Gen</span></code>:</p>
<div class="highlight-ocaml notranslate"><div class="highlight"><pre><span></span><span class="k">module</span> <span class="nc">QCheck</span> <span class="o">:</span>
  <span class="k">sig</span>
    <span class="o">...</span>
  <span class="k">val</span> <span class="kt">int</span> <span class="o">:</span> <span class="kt">int</span> <span class="n">arbitrary</span>
  <span class="k">val</span> <span class="n">small_int</span> <span class="o">:</span> <span class="kt">int</span> <span class="n">arbitrary</span>
  <span class="k">val</span> <span class="n">int_range</span> <span class="o">:</span> <span class="kt">int</span> <span class="o">-&gt;</span> <span class="kt">int</span> <span class="o">-&gt;</span> <span class="kt">int</span> <span class="n">arbitrary</span>
  <span class="k">val</span> <span class="kt">list</span> <span class="o">:</span> <span class="k">&#39;</span><span class="n">a</span> <span class="n">arbitrary</span> <span class="o">-&gt;</span> <span class="k">&#39;</span><span class="n">a</span> <span class="kt">list</span> <span class="n">arbitrary</span>
  <span class="k">val</span> <span class="n">list_of_size</span> <span class="o">:</span> <span class="kt">int</span> <span class="nn">Gen</span><span class="p">.</span><span class="n">t</span> <span class="o">-&gt;</span> <span class="k">&#39;</span><span class="n">a</span> <span class="n">arbitrary</span> <span class="o">-&gt;</span> <span class="k">&#39;</span><span class="n">a</span> <span class="kt">list</span> <span class="n">arbitrary</span>
  <span class="k">val</span> <span class="kt">string</span> <span class="o">:</span> <span class="kt">string</span> <span class="n">arbitrary</span>
  <span class="k">val</span> <span class="n">small_string</span> <span class="o">:</span> <span class="kt">string</span> <span class="n">arbitrary</span>
    <span class="o">...</span>
  <span class="k">end</span>
</pre></div>
</div>
<p>Using those arbitraries, we can get improved error messages:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-OCaml notranslate"><div class="highlight"><pre><span></span><span class="k">let</span> <span class="n">t</span> <span class="o">=</span> <span class="nn">QCheck</span><span class="p">.</span><span class="nn">Test</span><span class="p">.</span><span class="n">make</span> <span class="o">~</span><span class="n">name</span><span class="o">:</span><span class="s2">&quot;my_test&quot;</span> <span class="nn">QCheck</span><span class="p">.</span><span class="n">int</span> <span class="n">is_even</span><span class="o">;;</span>
<span class="nn">QCheck_runner</span><span class="p">.</span><span class="n">run_tests</span> <span class="o">[</span><span class="n">t</span><span class="o">];;</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>val t : QCheck.Test.t = QCheck2.Test.Test &lt;abstr&gt;
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>--- <span class=" -Color -Color-Bold -Color-Bold-Red">Failure</span> --------------------------------------------------------------------
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Test my_test failed (100 shrink steps):
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>-3
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>================================================================================
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span><span class=" -Color -Color-Bold -Color-Bold-Red">failure</span> (1 tests failed, 0 tests errored, ran 1 tests)
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>- : int = 1
</pre></div>
</div>
</div>
</div>
<p>The output tells us the <code class="docutils literal notranslate"><span class="pre">my_test</span></code> failed, and shows us the input that
caused the failure.</p>
</section>
<section id="testing-functions-with-qcheck">
<h2><span class="section-number">6.6.5. </span>Testing Functions with QCheck<a class="headerlink" href="#testing-functions-with-qcheck" title="Permalink to this headline">#</a></h2>
<p>The final piece of the QCheck puzzle is to use a randomly generated input to
test whether a function’s output satisfies some property. For example, here is a
QCheck test to see whether the output of <code class="docutils literal notranslate"><span class="pre">double</span></code> is correct:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-OCaml notranslate"><div class="highlight"><pre><span></span><span class="k">let</span> <span class="n">double</span> <span class="n">x</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">x</span><span class="o">;;</span>
<span class="k">let</span> <span class="n">double_check</span> <span class="n">x</span> <span class="o">=</span> <span class="n">double</span> <span class="n">x</span> <span class="o">=</span> <span class="n">x</span> <span class="o">+</span> <span class="n">x</span><span class="o">;;</span>
<span class="k">let</span> <span class="n">t</span> <span class="o">=</span> <span class="nn">QCheck</span><span class="p">.</span><span class="nn">Test</span><span class="p">.</span><span class="n">make</span> <span class="o">~</span><span class="n">count</span><span class="o">:</span><span class="mi">1000</span> <span class="nn">QCheck</span><span class="p">.</span><span class="n">int</span> <span class="n">double_check</span><span class="o">;;</span>
<span class="nn">QCheck_runner</span><span class="p">.</span><span class="n">run_tests</span> <span class="o">[</span><span class="n">t</span><span class="o">];;</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>val double : int -&gt; int = &lt;fun&gt;
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>val double_check : int -&gt; bool = &lt;fun&gt;
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>val t : QCheck.Test.t = QCheck2.Test.Test &lt;abstr&gt;
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>================================================================================
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span><span class=" -Color -Color-Bold -Color-Bold-Green">success</span> (ran 1 tests)
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>- : int = 0
</pre></div>
</div>
</div>
</div>
<p>Above, <code class="docutils literal notranslate"><span class="pre">double</span></code> is the function we are testing. The property we’re testing
<code class="docutils literal notranslate"><span class="pre">double_check</span></code>, is that <code class="docutils literal notranslate"><span class="pre">double</span> <span class="pre">x</span></code> is always <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">+</span> <span class="pre">x</span></code>. We do that by having
QCheck create 1000 arbitrary integers and test that the property holds of each
of them.</p>
<p>Here are a couple more examples, drawn from QCheck’s own documentation.  The
first checks that <code class="docutils literal notranslate"><span class="pre">List.rev</span></code> is an <em>involution</em>, meaning that applying it
twice brings you back to the original list.  That is a property that should
hold of a correct implementation of list reversal.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-OCaml notranslate"><div class="highlight"><pre><span></span><span class="k">let</span> <span class="n">rev_involutive</span> <span class="n">lst</span> <span class="o">=</span> <span class="nn">List</span><span class="p">.</span><span class="o">(</span><span class="n">lst</span> <span class="o">|&gt;</span> <span class="n">rev</span> <span class="o">|&gt;</span> <span class="n">rev</span> <span class="o">=</span> <span class="n">lst</span><span class="o">);;</span>
<span class="k">let</span> <span class="n">t</span> <span class="o">=</span> <span class="nn">QCheck</span><span class="p">.</span><span class="o">(</span><span class="nn">Test</span><span class="p">.</span><span class="n">make</span> <span class="o">~</span><span class="n">count</span><span class="o">:</span><span class="mi">1000</span> <span class="o">(</span><span class="kt">list</span> <span class="kt">int</span><span class="o">)</span> <span class="n">rev_involutive</span><span class="o">);;</span>
<span class="nn">QCheck_runner</span><span class="p">.</span><span class="n">run_tests</span> <span class="o">[</span><span class="n">t</span><span class="o">];;</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>val rev_involutive : &#39;a list -&gt; bool = &lt;fun&gt;
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>val t : QCheck.Test.t = QCheck2.Test.Test &lt;abstr&gt;
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>================================================================================
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span><span class=" -Color -Color-Bold -Color-Bold-Green">success</span> (ran 1 tests)
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>- : int = 0
</pre></div>
</div>
</div>
</div>
<p>Indeed, running 1000 random tests reveals that none of them fails. The <code class="docutils literal notranslate"><span class="pre">int</span></code>
generator used above generates integers uniformly over the entire range of OCaml
integers. The <code class="docutils literal notranslate"><span class="pre">list</span></code> generator creates lists whose elements are individual
generated by <code class="docutils literal notranslate"><span class="pre">int</span></code>. According to the documentation of <code class="docutils literal notranslate"><span class="pre">list</span></code>, the length of each
list is randomly generated by another generator <code class="docutils literal notranslate"><span class="pre">nat</span></code>, which generates “small
natural numbers.” What does that mean? It isn’t specified. But if we read the
<a class="reference external" href="https://github.com/c-cube/qcheck/blob/18247cf40af4272f7a2f93e273724b962db61b01/src/core/QCheck2.ml#L276">current source code</a>, we see that those are integers from 0 to 10,000,
and biased toward being smaller numbers in that range.</p>
<p>The second example checks that all lists are sorted.  Of course, not all lists
<em>are</em> sorted!  So we should expect this test to fail.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-OCaml notranslate"><div class="highlight"><pre><span></span><span class="k">let</span> <span class="n">is_sorted</span> <span class="n">lst</span> <span class="o">=</span> <span class="n">lst</span> <span class="o">=</span> <span class="nn">List</span><span class="p">.</span><span class="n">sort</span> <span class="nn">Stdlib</span><span class="p">.</span><span class="n">compare</span> <span class="n">lst</span><span class="o">;;</span>
<span class="k">let</span> <span class="n">t</span> <span class="o">=</span> <span class="nn">QCheck</span><span class="p">.</span><span class="o">(</span><span class="nn">Test</span><span class="p">.</span><span class="n">make</span> <span class="o">~</span><span class="n">count</span><span class="o">:</span><span class="mi">1000</span> <span class="o">(</span><span class="kt">list</span> <span class="n">small_nat</span><span class="o">)</span> <span class="n">is_sorted</span><span class="o">);;</span>
<span class="nn">QCheck_runner</span><span class="p">.</span><span class="n">run_tests</span> <span class="o">[</span><span class="n">t</span><span class="o">];;</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>val is_sorted : &#39;a list -&gt; bool = &lt;fun&gt;
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>val t : QCheck.Test.t = QCheck2.Test.Test &lt;abstr&gt;
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>--- <span class=" -Color -Color-Bold -Color-Bold-Red">Failure</span> --------------------------------------------------------------------
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Test anon_test_4 failed (2 shrink steps):
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[1; 0]
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>================================================================================
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span><span class=" -Color -Color-Bold -Color-Bold-Red">failure</span> (1 tests failed, 0 tests errored, ran 1 tests)
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>- : int = 1
</pre></div>
</div>
</div>
</div>
<p>The output shows an example of a list that is not sorted, hence violates the
property. Generator <code class="docutils literal notranslate"><span class="pre">small_nat</span></code> is like <code class="docutils literal notranslate"><span class="pre">nat</span></code> but ranges from 0 to 100.</p>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "cs3110/textbook",
            ref: "main",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "ocaml-jupyter"
        },
        kernelOptions: {
            kernelName: "ocaml-jupyter",
            path: "./chapters/correctness"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'ocaml-jupyter'</script>

              </div>
              
            </main>
            <footer class="footer-article noprint">
                
    <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="black_glass_box.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title"><span class="section-number">6.5. </span>Black-box and Glass-box Testing</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="proving_correctness.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title"><span class="section-number">6.7. </span>Proving Correctness</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            </footer>
        </div>
    </div>
    <div class="footer-content row">
        <footer class="col footer"><p>
  
    By Michael R. Clarkson et al.<br/>
  
      &copy; Copyright 2022.<br/>
</p>
        </footer>
    </div>
    
</div>


      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>


  </body>
</html>