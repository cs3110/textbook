

<!DOCTYPE html>


<html lang="en" data-content_root="" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>5.11. Exercises &#8212; OCaml Programming: Correct + Efficient + Beautiful</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=bd9e20870c6007c4c509" rel="stylesheet" />
<link href="../../_static/styles/bootstrap.css?digest=bd9e20870c6007c4c509" rel="stylesheet" />
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=bd9e20870c6007c4c509" rel="stylesheet" />

  
  <link href="../../_static/vendor/fontawesome/6.5.1/css/all.min.css?digest=bd9e20870c6007c4c509" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.5.1/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.5.1/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.5.1/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" href="../../_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/custom.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/bootstrap.js?digest=bd9e20870c6007c4c509" />
<link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=bd9e20870c6007c4c509" />
  <script src="../../_static/vendor/fontawesome/6.5.1/js/all.min.js?digest=bd9e20870c6007c4c509"></script>

    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <script src="../../_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../../_static/togglebutton.js"></script>
    <script async="async" kind="hypothesis" src="https://hypothes.is/embed.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../../_static/sphinx-thebe.js"></script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'chapters/modules/exercises';</script>
    <link rel="shortcut icon" href="../../_static/op.png"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="6. Mutability" href="../mut/intro.html" />
    <link rel="prev" title="5.10. Summary" href="summary.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a id="pst-skip-link" class="skip-link" href="#main-content">Skip to main content</a>
  
  <div id="pst-scroll-pixel-helper"></div>

  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>
    Back to top
  </button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <header>


  <div class="bd-header-announcement container-fluid bd-header-announcement">
    <div class="bd-header-announcement__content">Using this book as part of a course? Please <a style="color:white" href="https://docs.google.com/forms/d/e/1FAIpQLSfEW65AJPBnk732zZZM9CFpWMobWUkym6Nf-pgslRqqwoWYIA/viewform?usp=preview">let us know</a>!</div>
  </div>

  
    <div class="bd-header navbar navbar-expand-lg bd-navbar">
    </div>
  
  </header>

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
        
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  

<a class="navbar-brand logo" href="../../cover.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../../_static/op_title.png" class="logo__image only-light" alt="OCaml Programming: Correct + Efficient + Beautiful - Home"/>
    <script>document.write(`<img src="../../_static/op_title.png" class="logo__image only-dark" alt="OCaml Programming: Correct + Efficient + Beautiful - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Preface</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../preface/about.html">About This Book</a></li>
<li class="toctree-l1"><a class="reference internal" href="../preface/install.html">Installing OCaml</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Introduction</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../intro/intro.html">1. Better Programming Through OCaml</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-1"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../intro/past.html">1.1. The Past of OCaml</a></li>
<li class="toctree-l2"><a class="reference internal" href="../intro/present.html">1.2. The Present of OCaml</a></li>
<li class="toctree-l2"><a class="reference internal" href="../intro/future.html">1.3. Look to Your Future</a></li>
<li class="toctree-l2"><a class="reference internal" href="../intro/3110.html">1.4. A Brief History of CS 3110</a></li>
<li class="toctree-l2"><a class="reference internal" href="../intro/summary.html">1.5. Summary</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../basics/intro.html">2. The Basics of OCaml</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-2"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../basics/toplevel.html">2.1. The OCaml Toplevel</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basics/compiling.html">2.2. Compiling OCaml Programs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basics/expressions.html">2.3. Expressions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basics/functions.html">2.4. Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basics/documentation.html">2.5. Documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basics/printing.html">2.6. Printing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basics/debugging.html">2.7. Debugging</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basics/summary.html">2.8. Summary</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basics/exercises.html">2.9. Exercises</a></li>
</ul>
</li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">OCaml Programming</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../data/intro.html">3. Data and Types</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-3"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../data/lists.html">3.1. Lists</a></li>
<li class="toctree-l2"><a class="reference internal" href="../data/variants.html">3.2. Variants</a></li>
<li class="toctree-l2"><a class="reference internal" href="../data/ounit.html">3.3. Unit Testing with OUnit</a></li>
<li class="toctree-l2"><a class="reference internal" href="../data/records_tuples.html">3.4. Records and Tuples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../data/pattern_matching_advanced.html">3.5. Advanced Pattern Matching</a></li>
<li class="toctree-l2"><a class="reference internal" href="../data/type_synonym.html">3.6. Type Synonyms</a></li>
<li class="toctree-l2"><a class="reference internal" href="../data/options.html">3.7. Options</a></li>
<li class="toctree-l2"><a class="reference internal" href="../data/assoc_list.html">3.8. Association Lists</a></li>
<li class="toctree-l2"><a class="reference internal" href="../data/algebraic_data_types.html">3.9. Algebraic Data Types</a></li>
<li class="toctree-l2"><a class="reference internal" href="../data/exceptions.html">3.10. Exceptions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../data/trees.html">3.11. Example: Trees</a></li>
<li class="toctree-l2"><a class="reference internal" href="../data/nats.html">3.12. Example: Natural Numbers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../data/summary.html">3.13. Summary</a></li>
<li class="toctree-l2"><a class="reference internal" href="../data/exercises.html">3.14. Exercises</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../hop/intro.html">4. Higher-Order Programming</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-4"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../hop/higher_order.html">4.1. Higher-Order Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../hop/map.html">4.2. Map</a></li>
<li class="toctree-l2"><a class="reference internal" href="../hop/filter.html">4.3. Filter</a></li>
<li class="toctree-l2"><a class="reference internal" href="../hop/fold.html">4.4. Fold</a></li>
<li class="toctree-l2"><a class="reference internal" href="../hop/beyond_lists.html">4.5. Beyond Lists</a></li>
<li class="toctree-l2"><a class="reference internal" href="../hop/pipelining.html">4.6. Pipelining</a></li>
<li class="toctree-l2"><a class="reference internal" href="../hop/currying.html">4.7. Currying</a></li>
<li class="toctree-l2"><a class="reference internal" href="../hop/summary.html">4.8. Summary</a></li>
<li class="toctree-l2"><a class="reference internal" href="../hop/exercises.html">4.9. Exercises</a></li>
</ul>
</li>
<li class="toctree-l1 current active has-children"><a class="reference internal" href="intro.html">5. Modular Programming</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-5"><i class="fa-solid fa-chevron-down"></i></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="module_systems.html">5.1. Module Systems</a></li>
<li class="toctree-l2"><a class="reference internal" href="modules.html">5.2. Modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="toplevel.html">5.3. Modules and the Toplevel</a></li>
<li class="toctree-l2"><a class="reference internal" href="encapsulation.html">5.4. Encapsulation</a></li>
<li class="toctree-l2"><a class="reference internal" href="compilation_units.html">5.5. Compilation Units</a></li>
<li class="toctree-l2"><a class="reference internal" href="functional_data_structures.html">5.6. Functional Data Structures</a></li>
<li class="toctree-l2"><a class="reference internal" href="module_type_constraints.html">5.7. Module Type Constraints</a></li>
<li class="toctree-l2"><a class="reference internal" href="includes.html">5.8. Includes</a></li>
<li class="toctree-l2"><a class="reference internal" href="functors.html">5.9. Functors</a></li>
<li class="toctree-l2"><a class="reference internal" href="summary.html">5.10. Summary</a></li>
<li class="toctree-l2 current active"><a class="current reference internal" href="#">5.11. Exercises</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../mut/intro.html">6. Mutability</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-6"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../mut/refs.html">6.1. Refs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mut/mutable_fields.html">6.2. Mutable Fields</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mut/arrays.html">6.3. Arrays and Loops</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mut/summary.html">6.4. Summary</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mut/exercises.html">6.5. Exercises</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../conc/intro.html">7. Concurrency</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-7"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../conc/concurrency.html">7.1. Concurrency</a></li>
<li class="toctree-l2"><a class="reference internal" href="../conc/promises.html">7.2. Promises</a></li>
<li class="toctree-l2"><a class="reference internal" href="../conc/impl_promises.html">7.3. Implementing Promises</a></li>
<li class="toctree-l2"><a class="reference internal" href="../conc/io_promises.html">7.4. Asynchronous Input and Output</a></li>
<li class="toctree-l2"><a class="reference internal" href="../conc/callbacks.html">7.5. Callbacks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../conc/impl_callbacks.html">7.6. Implementing Callbacks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../conc/full_promises_impl.html">7.7. The Full Promises Implementation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../conc/monads.html">7.8. Monads</a></li>
<li class="toctree-l2"><a class="reference internal" href="../conc/summary.html">7.9. Summary</a></li>
<li class="toctree-l2"><a class="reference internal" href="../conc/exercises.html">7.10. Exercises</a></li>
</ul>
</li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Correctness and Efficiency</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../correctness/intro.html">8. Correctness</a><input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-8"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../correctness/specifications.html">8.1. Specifications</a></li>
<li class="toctree-l2"><a class="reference internal" href="../correctness/function_docs.html">8.2. Function Documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../correctness/module_docs.html">8.3. Module Documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../correctness/test_debug.html">8.4. Testing and Debugging</a></li>
<li class="toctree-l2"><a class="reference internal" href="../correctness/black_glass_box.html">8.5. Black-box and Glass-box Testing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../correctness/randomized.html">8.6. Randomized Testing with QCheck</a></li>
<li class="toctree-l2"><a class="reference internal" href="../correctness/proving_correctness.html">8.7. Proving Correctness</a></li>
<li class="toctree-l2"><a class="reference internal" href="../correctness/structural_induction.html">8.8. Structural Induction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../correctness/eq_spec.html">8.9. Equational Specification</a></li>
<li class="toctree-l2"><a class="reference internal" href="../correctness/summary.html">8.10. Summary</a></li>
<li class="toctree-l2"><a class="reference internal" href="../correctness/exercises.html">8.11. Exercises</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../ds/intro.html">9. Data Structures</a><input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-9"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../ds/hash_tables.html">9.1. Hash Tables</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ds/amortized.html">9.2. Amortized Analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ds/rb.html">9.3. Red-Black Trees</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ds/sequence.html">9.4. Sequences</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ds/memoization.html">9.5. Memoization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ds/parrays.html">9.6. Persistent Arrays</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ds/summary.html">9.7. Summary</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ds/exercises.html">9.8. Exercises</a></li>
</ul>
</li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Language Implementation</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../interp/intro.html">10. Interpreters</a><input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-10"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../interp/calculator.html">10.1. Example: Calculator</a></li>
<li class="toctree-l2"><a class="reference internal" href="../interp/parsing.html">10.2. Parsing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../interp/substitution.html">10.3. Substitution Model</a></li>
<li class="toctree-l2"><a class="reference internal" href="../interp/environment.html">10.4. Environment Model</a></li>
<li class="toctree-l2"><a class="reference internal" href="../interp/typecheck.html">10.5. Type Checking</a></li>
<li class="toctree-l2"><a class="reference internal" href="../interp/inference.html">10.6. Type Inference</a></li>
<li class="toctree-l2"><a class="reference internal" href="../interp/summary.html">10.7. Summary</a></li>
<li class="toctree-l2"><a class="reference internal" href="../interp/exercises.html">10.8. Exercises</a></li>
</ul>
</li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Lagniappe</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../adv/curry-howard.html">The Curry-Howard Correspondence</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Appendix</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../appendix/bigoh.html">Big-Oh Notation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../appendix/vm.html">Virtual Machine</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/cs3110/textbook" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/cs3110/textbook/edit/main/src/chapters/modules/exercises.md" target="_blank"
   class="btn btn-sm btn-source-edit-button dropdown-item"
   title="Suggest edit"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-pencil-alt"></i>
  </span>
<span class="btn__text-container">Suggest edit</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/cs3110/textbook/issues/new?title=Issue%20on%20page%20%2Fchapters/modules/exercises.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../../_sources/chapters/modules/exercises.md" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>

</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Exercises</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="exercises">
<h1><span class="section-number">5.11. </span>Exercises<a class="headerlink" href="#exercises" title="Permalink to this heading">#</a></h1>
<p>Solutions to most exercises are <a href="https://github.com/cs3110/textbook-solutions">available</a>.
We are happy to add or correct solutions. Please make contributions through GitHub.</p>
<!--------------------------------------------------------------------------->
<hr class="docutils" />
<p><strong>Exercise: complex synonym [★]</strong></p>
<p>Here is a module type for complex numbers, which have a real and imaginary
component:</p>
<div class="highlight-ocaml notranslate"><div class="highlight"><pre><span></span><span class="k">module</span> <span class="k">type</span> <span class="nc">ComplexSig</span> <span class="o">=</span> <span class="k">sig</span>
  <span class="k">val</span> <span class="n">zero</span> <span class="o">:</span> <span class="kt">float</span> <span class="o">*</span> <span class="kt">float</span>
  <span class="k">val</span> <span class="n">add</span> <span class="o">:</span> <span class="kt">float</span> <span class="o">*</span> <span class="kt">float</span> <span class="o">-&gt;</span> <span class="kt">float</span> <span class="o">*</span> <span class="kt">float</span> <span class="o">-&gt;</span> <span class="kt">float</span> <span class="o">*</span> <span class="kt">float</span>
<span class="k">end</span>
</pre></div>
</div>
<p>Improve that code by adding <code class="docutils literal notranslate"><span class="pre">type</span> <span class="pre">t</span> <span class="pre">=</span> <span class="pre">float</span> <span class="pre">*</span> <span class="pre">float</span></code>. Show how the signature can
be written more tersely because of the type synonym.</p>
<!--------------------------------------------------------------------------->
<hr class="docutils" />
<p><strong>Exercise: complex encapsulation [★★]</strong></p>
<p>Here is a module for the module type from the previous exercise:</p>
<div class="highlight-ocaml notranslate"><div class="highlight"><pre><span></span><span class="k">module</span> <span class="nc">Complex</span> <span class="o">:</span> <span class="nc">ComplexSig</span> <span class="o">=</span> <span class="k">struct</span>
  <span class="k">type</span> <span class="n">t</span> <span class="o">=</span> <span class="kt">float</span> <span class="o">*</span> <span class="kt">float</span>
  <span class="k">let</span> <span class="n">zero</span> <span class="o">=</span> <span class="o">(</span><span class="mi">0</span><span class="o">.,</span> <span class="mi">0</span><span class="o">.)</span>
  <span class="k">let</span> <span class="n">add</span> <span class="o">(</span><span class="n">r1</span><span class="o">,</span> <span class="n">i1</span><span class="o">)</span> <span class="o">(</span><span class="n">r2</span><span class="o">,</span> <span class="n">i2</span><span class="o">)</span> <span class="o">=</span> <span class="n">r1</span> <span class="o">+.</span> <span class="n">r2</span><span class="o">,</span> <span class="n">i1</span> <span class="o">+.</span> <span class="n">i2</span>
<span class="k">end</span>
</pre></div>
</div>
<p>Investigate what happens if you make the following changes (each
independently), and explain why any errors arise:</p>
<ul class="simple">
<li><p>remove <code class="docutils literal notranslate"><span class="pre">zero</span></code> from the structure</p></li>
<li><p>remove <code class="docutils literal notranslate"><span class="pre">add</span></code> from the signature</p></li>
<li><p>change <code class="docutils literal notranslate"><span class="pre">zero</span></code> in the structure to <code class="docutils literal notranslate"><span class="pre">let</span> <span class="pre">zero</span> <span class="pre">=</span> <span class="pre">0,</span> <span class="pre">0</span></code></p></li>
</ul>
<!--------------------------------------------------------------------------->
<hr class="docutils" />
<p><strong>Exercise: big list queue [★★]</strong></p>
<p>Use the following code to create <code class="docutils literal notranslate"><span class="pre">ListQueue</span></code> of exponentially increasing length:
10, 100, 1000, etc. How big of a queue can you create before there is a
noticeable delay? How big until there’s a delay of at least 10 seconds? (Note:
you can abort utop computations with Ctrl-C.)</p>
<div class="highlight-ocaml notranslate"><div class="highlight"><pre><span></span><span class="c">(** Creates a ListQueue filled with [n] elements. *)</span>
<span class="k">let</span> <span class="n">fill_listqueue</span> <span class="n">n</span> <span class="o">=</span>
  <span class="k">let</span> <span class="k">rec</span> <span class="n">loop</span> <span class="n">n</span> <span class="n">q</span> <span class="o">=</span>
    <span class="k">if</span> <span class="n">n</span> <span class="o">=</span> <span class="mi">0</span> <span class="k">then</span> <span class="n">q</span>
    <span class="k">else</span> <span class="n">loop</span> <span class="o">(</span><span class="n">n</span> <span class="o">-</span> <span class="mi">1</span><span class="o">)</span> <span class="o">(</span><span class="nn">ListQueue</span><span class="p">.</span><span class="n">enqueue</span> <span class="n">n</span> <span class="n">q</span><span class="o">)</span> <span class="k">in</span>
  <span class="n">loop</span> <span class="n">n</span> <span class="nn">ListQueue</span><span class="p">.</span><span class="n">empty</span>
</pre></div>
</div>
<!--------------------------------------------------------------------------->
<hr class="docutils" />
<p><strong>Exercise: big batched queue [★★]</strong></p>
<p>Use the following function to create <code class="docutils literal notranslate"><span class="pre">BatchedQueue</span></code> of exponentially increasing
length:</p>
<div class="highlight-ocaml notranslate"><div class="highlight"><pre><span></span><span class="k">let</span> <span class="n">fill_batchedqueue</span> <span class="n">n</span> <span class="o">=</span>
  <span class="k">let</span> <span class="k">rec</span> <span class="n">loop</span> <span class="n">n</span> <span class="n">q</span> <span class="o">=</span>
    <span class="k">if</span> <span class="n">n</span> <span class="o">=</span> <span class="mi">0</span> <span class="k">then</span> <span class="n">q</span>
    <span class="k">else</span> <span class="n">loop</span> <span class="o">(</span><span class="n">n</span> <span class="o">-</span> <span class="mi">1</span><span class="o">)</span> <span class="o">(</span><span class="nn">BatchedQueue</span><span class="p">.</span><span class="n">enqueue</span> <span class="n">n</span> <span class="n">q</span><span class="o">)</span> <span class="k">in</span>
  <span class="n">loop</span> <span class="n">n</span> <span class="nn">BatchedQueue</span><span class="p">.</span><span class="n">empty</span>
</pre></div>
</div>
<p>Now how big of a queue can you create before there’s a delay of at least 10
seconds?</p>
<!--------------------------------------------------------------------------->
<hr class="docutils" />
<p><strong>Exercise: queue efficiency [★★★]</strong></p>
<p>Compare the implementations of <code class="docutils literal notranslate"><span class="pre">enqueue</span></code> in <code class="docutils literal notranslate"><span class="pre">ListQueue</span></code> vs. <code class="docutils literal notranslate"><span class="pre">BatchedQueue</span></code>.
Explain in your own words why the efficiency of <code class="docutils literal notranslate"><span class="pre">ListQueue.enqueue</span></code> is linear
time in the length of the queue. <em>Hint: consider the <code class="docutils literal notranslate"><span class="pre">&#64;</span></code> operator.</em> Then explain
why adding <span class="math notranslate nohighlight">\(n\)</span> elements to the queue takes time that is quadratic in <span class="math notranslate nohighlight">\(n\)</span>.</p>
<p>Now consider <code class="docutils literal notranslate"><span class="pre">BatchedQueue.enqueue</span></code>. Suppose that the queue is in a state where
it has never had any elements dequeued. Explain in your own words why
<code class="docutils literal notranslate"><span class="pre">BatchedQueue.enqueue</span></code> is constant time. Then explain why adding <span class="math notranslate nohighlight">\(n\)</span> elements
to the queue takes time that is linear in <span class="math notranslate nohighlight">\(n\)</span>.</p>
<!--------------------------------------------------------------------------->
<hr class="docutils" />
<p><strong>Exercise: binary search tree map [★★★★]</strong></p>
<p>Write a module <code class="docutils literal notranslate"><span class="pre">BstMap</span></code> that implements the <code class="docutils literal notranslate"><span class="pre">Map</span></code> module type using a binary
search tree type. <em>Binary trees</em> were covered earlier when we discussed
algebraic data types. A binary <em>search</em> tree (BST) is a binary tree that obeys
the following <em>BST Invariant</em>:</p>
<blockquote>
<div><p>For any node <em>n</em>, every node in the left subtree of <em>n</em> has a value less than
<em>n</em>’s value, and every node in the right subtree of <em>n</em> has a value greater
than <em>n</em>’s value.</p>
</div></blockquote>
<p>Your nodes should store pairs of keys and values. The keys should be ordered by
the BST Invariant. Based on that invariant, you will always know whether to look
left or right in a tree to find a particular key.</p>
<!--------------------------------------------------------------------------->
<hr class="docutils" />
<p><strong>Exercise: fraction [★★★]</strong></p>
<p>Write a module that implements the <code class="docutils literal notranslate"><span class="pre">Fraction</span></code> module type below:</p>
<div class="highlight-ocaml notranslate"><div class="highlight"><pre><span></span><span class="k">module</span> <span class="k">type</span> <span class="nc">Fraction</span> <span class="o">=</span> <span class="k">sig</span>
  <span class="c">(* A fraction is a rational number p/q, where q != 0. *)</span>
  <span class="k">type</span> <span class="n">t</span>

  <span class="c">(** [make n d] represents n/d, a fraction with </span>
<span class="c">      numerator [n] and denominator [d].</span>
<span class="c">      Requires d &lt;&gt; 0. *)</span>
  <span class="k">val</span> <span class="n">make</span> <span class="o">:</span> <span class="kt">int</span> <span class="o">-&gt;</span> <span class="kt">int</span> <span class="o">-&gt;</span> <span class="n">t</span>

  <span class="k">val</span> <span class="n">numerator</span> <span class="o">:</span> <span class="n">t</span> <span class="o">-&gt;</span> <span class="kt">int</span>
  <span class="k">val</span> <span class="n">denominator</span> <span class="o">:</span> <span class="n">t</span> <span class="o">-&gt;</span> <span class="kt">int</span>
  <span class="k">val</span> <span class="n">to_string</span> <span class="o">:</span> <span class="n">t</span> <span class="o">-&gt;</span> <span class="kt">string</span>
  <span class="k">val</span> <span class="n">to_float</span> <span class="o">:</span> <span class="n">t</span> <span class="o">-&gt;</span> <span class="kt">float</span>

  <span class="k">val</span> <span class="n">add</span> <span class="o">:</span> <span class="n">t</span> <span class="o">-&gt;</span> <span class="n">t</span> <span class="o">-&gt;</span> <span class="n">t</span>
  <span class="k">val</span> <span class="n">mul</span> <span class="o">:</span> <span class="n">t</span> <span class="o">-&gt;</span> <span class="n">t</span> <span class="o">-&gt;</span> <span class="n">t</span>
<span class="k">end</span>
</pre></div>
</div>
<!--------------------------------------------------------------------------->
<hr class="docutils" />
<p><strong>Exercise: fraction reduced [★★★]</strong></p>
<p>Modify your implementation of <code class="docutils literal notranslate"><span class="pre">Fraction</span></code> to ensure these invariants hold for
every value <code class="docutils literal notranslate"><span class="pre">v</span></code> of type <code class="docutils literal notranslate"><span class="pre">t</span></code> that is returned from <code class="docutils literal notranslate"><span class="pre">make</span></code>, <code class="docutils literal notranslate"><span class="pre">add</span></code>, and <code class="docutils literal notranslate"><span class="pre">mul</span></code>:</p>
<ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">v</span></code> is in <em><a class="reference external" href="https://en.wikipedia.org/wiki/Irreducible_fraction">reduced form</a></em></p></li>
<li><p>the denominator of <code class="docutils literal notranslate"><span class="pre">v</span></code> is positive</p></li>
</ol>
<p>For the first invariant, you might find this implementation of Euclid’s
algorithm to be helpful:</p>
<div class="highlight-ocaml notranslate"><div class="highlight"><pre><span></span><span class="c">(** [gcd x y] is the greatest common divisor of [x] and [y].</span>
<span class="c">    Requires: [x] and [y] are positive. *)</span>
<span class="k">let</span> <span class="k">rec</span> <span class="n">gcd</span> <span class="n">x</span> <span class="n">y</span> <span class="o">=</span>
  <span class="k">if</span> <span class="n">x</span> <span class="o">=</span> <span class="mi">0</span> <span class="k">then</span> <span class="n">y</span>
  <span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="n">x</span> <span class="o">&lt;</span> <span class="n">y</span><span class="o">)</span> <span class="k">then</span> <span class="n">gcd</span> <span class="o">(</span><span class="n">y</span> <span class="o">-</span> <span class="n">x</span><span class="o">)</span> <span class="n">x</span>
  <span class="k">else</span> <span class="n">gcd</span> <span class="n">y</span> <span class="o">(</span><span class="n">x</span> <span class="o">-</span> <span class="n">y</span><span class="o">)</span>
</pre></div>
</div>
<!--------------------------------------------------------------------------->
<hr class="docutils" />
<p><strong>Exercise: make char map [★]</strong></p>
<p>To create a standard library map, we first have to use the <code class="docutils literal notranslate"><span class="pre">Map.Make</span></code> functor to
produce a module that is specialized for the type of keys we want. Type the
following in utop:</p>
<div class="highlight-ocaml notranslate"><div class="highlight"><pre><span></span><span class="o">#</span> <span class="k">module</span> <span class="nc">CharMap</span> <span class="o">=</span> <span class="nn">Map</span><span class="p">.</span><span class="nc">Make</span><span class="o">(</span><span class="nc">Char</span><span class="o">);;</span>
</pre></div>
</div>
<p>The output tells you that a new module named <code class="docutils literal notranslate"><span class="pre">CharMap</span></code> has been defined, and it
gives you a signature for it. Find the values <code class="docutils literal notranslate"><span class="pre">empty</span></code>, <code class="docutils literal notranslate"><span class="pre">add</span></code>, and <code class="docutils literal notranslate"><span class="pre">remove</span></code> in
that signature. Explain their types in your own words.</p>
<!--------------------------------------------------------------------------->
<hr class="docutils" />
<p><strong>Exercise: char ordered [★]</strong></p>
<p>The <code class="docutils literal notranslate"><span class="pre">Map.Make</span></code> functor requires its input module to match the <code class="docutils literal notranslate"><span class="pre">Map.OrderedType</span></code>
signature. Look at <a class="reference external" href="https://ocaml.org/api/Map.OrderedType.html">that signature</a> as well as the
<a class="reference external" href="https://ocaml.org/api/Char.html">signature for the <code class="docutils literal notranslate"><span class="pre">Char</span></code> module</a>. Explain in your own words why we are
allowed to pass <code class="docutils literal notranslate"><span class="pre">Char</span></code> as an argument to <code class="docutils literal notranslate"><span class="pre">Map.Make</span></code>.</p>
<!--------------------------------------------------------------------------->
<hr class="docutils" />
<p><strong>Exercise: use char map [★★]</strong></p>
<p>Using the <code class="docutils literal notranslate"><span class="pre">CharMap</span></code> you just made, create a map that contains the following
bindings:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">'A'</span></code> maps to <code class="docutils literal notranslate"><span class="pre">&quot;Alpha&quot;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'E'</span></code> maps to <code class="docutils literal notranslate"><span class="pre">&quot;Echo&quot;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'S'</span></code> maps to <code class="docutils literal notranslate"><span class="pre">&quot;Sierra&quot;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'V'</span></code> maps to <code class="docutils literal notranslate"><span class="pre">&quot;Victor&quot;</span></code></p></li>
</ul>
<p>Use <code class="docutils literal notranslate"><span class="pre">CharMap.find</span></code> to find the binding for <code class="docutils literal notranslate"><span class="pre">'E'</span></code>.</p>
<p>Now remove the binding for <code class="docutils literal notranslate"><span class="pre">'A'</span></code>. Use <code class="docutils literal notranslate"><span class="pre">CharMap.mem</span></code> to find whether <code class="docutils literal notranslate"><span class="pre">'A'</span></code> is
still bound.</p>
<p>Use the function <code class="docutils literal notranslate"><span class="pre">CharMap.bindings</span></code> to convert your map into an association
list.</p>
<!--------------------------------------------------------------------------->
<hr class="docutils" />
<p><strong>Exercise: bindings [★★]</strong></p>
<p>Investigate the <a class="reference external" href="https://ocaml.org/api/Map.S.html">documentation of the <code class="docutils literal notranslate"><span class="pre">Map.S</span></code></a> signature to find the
specification of <code class="docutils literal notranslate"><span class="pre">bindings</span></code>. Which of these expressions will return the same
association list?</p>
<ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">CharMap.(empty</span> <span class="pre">|&gt;</span> <span class="pre">add</span> <span class="pre">'x'</span> <span class="pre">0</span> <span class="pre">|&gt;</span> <span class="pre">add</span> <span class="pre">'y'</span> <span class="pre">1</span> <span class="pre">|&gt;</span> <span class="pre">bindings)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CharMap.(empty</span> <span class="pre">|&gt;</span> <span class="pre">add</span> <span class="pre">'y'</span> <span class="pre">1</span> <span class="pre">|&gt;</span> <span class="pre">add</span> <span class="pre">'x'</span> <span class="pre">0</span> <span class="pre">|&gt;</span> <span class="pre">bindings)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CharMap.(empty</span> <span class="pre">|&gt;</span> <span class="pre">add</span> <span class="pre">'x'</span> <span class="pre">2</span> <span class="pre">|&gt;</span> <span class="pre">add</span> <span class="pre">'y'</span> <span class="pre">1</span> <span class="pre">|&gt;</span> <span class="pre">remove</span> <span class="pre">'x'</span> <span class="pre">|&gt;</span> <span class="pre">add</span> <span class="pre">'x'</span> <span class="pre">0</span> <span class="pre">|&gt;</span> <span class="pre">bindings)</span></code></p></li>
</ol>
<p>Check your answer in utop.</p>
<!--------------------------------------------------------------------------->
<hr class="docutils" />
<p><strong>Exercise: date order [★★]</strong></p>
<p>Here is a type for dates:</p>
<div class="highlight-ocaml notranslate"><div class="highlight"><pre><span></span><span class="k">type</span> <span class="n">date</span> <span class="o">=</span> <span class="o">{</span><span class="n">month</span> <span class="o">:</span> <span class="kt">int</span><span class="o">;</span> <span class="n">day</span> <span class="o">:</span> <span class="kt">int</span><span class="o">}</span>
</pre></div>
</div>
<p>For example, March 31st would be represented as <code class="docutils literal notranslate"><span class="pre">{month</span> <span class="pre">=</span> <span class="pre">3;</span> <span class="pre">day</span> <span class="pre">=</span> <span class="pre">31}</span></code>. Our
goal in the next few exercises is to implement a map whose keys have type
<code class="docutils literal notranslate"><span class="pre">date</span></code>.</p>
<p>Obviously it’s possible to represent invalid dates with type <code class="docutils literal notranslate"><span class="pre">date</span></code>—for
example, <code class="docutils literal notranslate"><span class="pre">{</span> <span class="pre">month=6;</span> <span class="pre">day=50</span> <span class="pre">}</span></code> would be June 50th, which is
<a class="reference external" href="http://nbcparksandrec.tumblr.com/post/46760908046/march-31st-is-a-day">not a real date</a>. The behavior of your code in the exercises below
is unspecified for invalid dates.</p>
<p>To create a map over dates, we need a module that we can pass as input to
<code class="docutils literal notranslate"><span class="pre">Map.Make</span></code>. That module will need to match the <code class="docutils literal notranslate"><span class="pre">Map.OrderedType</span></code> signature.
Create such a module. Here is some code to get you started:</p>
<div class="highlight-ocaml notranslate"><div class="highlight"><pre><span></span><span class="k">module</span> <span class="nc">Date</span> <span class="o">=</span> <span class="k">struct</span>
  <span class="k">type</span> <span class="n">t</span> <span class="o">=</span> <span class="n">date</span>
  <span class="k">let</span> <span class="n">compare</span> <span class="o">...</span>
<span class="k">end</span>
</pre></div>
</div>
<p>Recall the <a class="reference external" href="https://ocaml.org/api/Map.OrderedType.html">specification of <code class="docutils literal notranslate"><span class="pre">compare</span></code></a> in <code class="docutils literal notranslate"><span class="pre">Map.OrderedType</span></code> as you write
your <code class="docutils literal notranslate"><span class="pre">Date.compare</span></code> function.</p>
<!--------------------------------------------------------------------------->
<hr class="docutils" />
<p><strong>Exercise: calendar [★★]</strong></p>
<p>Use the <code class="docutils literal notranslate"><span class="pre">Map.Make</span></code> functor with your <code class="docutils literal notranslate"><span class="pre">Date</span></code> module to create a <code class="docutils literal notranslate"><span class="pre">DateMap</span></code> module.
Then define a <code class="docutils literal notranslate"><span class="pre">calendar</span></code> type as follows:</p>
<div class="highlight-ocaml notranslate"><div class="highlight"><pre><span></span><span class="k">type</span> <span class="n">calendar</span> <span class="o">=</span> <span class="kt">string</span> <span class="nn">DateMap</span><span class="p">.</span><span class="n">t</span>
</pre></div>
</div>
<p>The idea is that <code class="docutils literal notranslate"><span class="pre">calendar</span></code> maps a <code class="docutils literal notranslate"><span class="pre">date</span></code> to the name of an event occurring on
that date.</p>
<p>Using the functions in the <code class="docutils literal notranslate"><span class="pre">DateMap</span></code> module, create a calendar with a few
entries in it, such as birthdays or anniversaries.</p>
<!--------------------------------------------------------------------------->
<hr class="docutils" />
<p><strong>Exercise: print calendar [★★]</strong></p>
<p>Write a function <code class="docutils literal notranslate"><span class="pre">print_calendar</span> <span class="pre">:</span> <span class="pre">calendar</span> <span class="pre">-&gt;</span> <span class="pre">unit</span></code> that prints each entry in a
calendar in a format similar to the inspiring examples in the previous exercise.
<em>Hint: use <code class="docutils literal notranslate"><span class="pre">DateMap.iter</span></code>, which is documented in the
<a class="reference external" href="https://ocaml.org/api/Map.S.html"><code class="docutils literal notranslate"><span class="pre">Map.S</span></code> signature</a>.</em></p>
<!--------------------------------------------------------------------------->
<hr class="docutils" />
<p><strong>Exercise: is for [★★★]</strong></p>
<p>Write a function <code class="docutils literal notranslate"><span class="pre">is_for</span> <span class="pre">:</span> <span class="pre">string</span> <span class="pre">CharMap.t</span> <span class="pre">-&gt;</span> <span class="pre">string</span> <span class="pre">CharMap.t</span></code> that given an
input map with bindings from <span class="math notranslate nohighlight">\(k_1\)</span> to <span class="math notranslate nohighlight">\(v_1\)</span>, …, <span class="math notranslate nohighlight">\(k_n\)</span> to <span class="math notranslate nohighlight">\(v_n\)</span>, produces an
output map with the same keys, but where each key <span class="math notranslate nohighlight">\(k_i\)</span> is now bound to the
string “<span class="math notranslate nohighlight">\(k_i\)</span> is for <span class="math notranslate nohighlight">\(v_i\)</span>”. For example, if <code class="docutils literal notranslate"><span class="pre">m</span></code> maps <code class="docutils literal notranslate"><span class="pre">'a'</span></code> to <code class="docutils literal notranslate"><span class="pre">&quot;apple&quot;</span></code>, then
<code class="docutils literal notranslate"><span class="pre">is_for</span> <span class="pre">m</span></code> would map <code class="docutils literal notranslate"><span class="pre">'a'</span></code> to <code class="docutils literal notranslate"><span class="pre">&quot;a</span> <span class="pre">is</span> <span class="pre">for</span> <span class="pre">apple&quot;</span></code>. <em>Hint: there is a one-line
solution that uses a function from the <code class="docutils literal notranslate"><span class="pre">Map.S</span></code> signature. To convert a character
to a string, you could use <code class="docutils literal notranslate"><span class="pre">String.make</span></code>. An even fancier way would be to use
<code class="docutils literal notranslate"><span class="pre">Printf.sprintf</span></code>.</em></p>
<!--------------------------------------------------------------------------->
<hr class="docutils" />
<p><strong>Exercise: first after [★★★]</strong></p>
<p>Write a function <code class="docutils literal notranslate"><span class="pre">first_after</span> <span class="pre">:</span> <span class="pre">calendar</span> <span class="pre">-&gt;</span> <span class="pre">Date.t</span> <span class="pre">-&gt;</span> <span class="pre">string</span></code> that returns the
name of the first event that occurs strictly after the given date. If there is
no such event, the function should raise <code class="docutils literal notranslate"><span class="pre">Not_found</span></code>, which is an exception
already defined in the standard library. <em>Hint: you can do this in one-line by using a function or two from the <code class="docutils literal notranslate"><span class="pre">Map.S</span></code> signature.</em></p>
<!--------------------------------------------------------------------------->
<hr class="docutils" />
<p><strong>Exercise: sets [★★★]</strong></p>
<p>The standard library <code class="docutils literal notranslate"><span class="pre">Set</span></code> module is quite similar to the <code class="docutils literal notranslate"><span class="pre">Map</span></code> module. Use it
to create a module that represents sets of <em>case-insensitive strings</em>. Strings
that differ only in their case should be considered equal by the set. For
example, the sets {“grr”, “argh”} and {“aRgh”, “GRR”} should be considered the
same, and adding “gRr” to either set should not change the set.</p>
<!--------------------------------------------------------------------------->
<hr class="docutils" />
<p><strong>Exercise: ToString [★★]</strong></p>
<p>Write a module type <code class="docutils literal notranslate"><span class="pre">ToString</span></code> that specifies a signature with an abstract type
<code class="docutils literal notranslate"><span class="pre">t</span></code> and a function <code class="docutils literal notranslate"><span class="pre">to_string</span> <span class="pre">:</span> <span class="pre">t</span> <span class="pre">-&gt;</span> <span class="pre">string</span></code>.</p>
<!--------------------------------------------------------------------------->
<hr class="docutils" />
<p><strong>Exercise: Print [★★]</strong></p>
<p>Write a functor <code class="docutils literal notranslate"><span class="pre">Print</span></code> that takes as input a module named <code class="docutils literal notranslate"><span class="pre">M</span></code> of type
<code class="docutils literal notranslate"><span class="pre">ToString</span></code>. The module returned by your functor should have exactly one value in
it, <code class="docutils literal notranslate"><span class="pre">print</span></code>, which is a function that takes a value of type <code class="docutils literal notranslate"><span class="pre">M.t</span></code> and prints a
string representation of that value.</p>
<!--------------------------------------------------------------------------->
<hr class="docutils" />
<p><strong>Exercise: Print Int [★★]</strong></p>
<p>Create a module named <code class="docutils literal notranslate"><span class="pre">PrintInt</span></code> that is the result of applying the functor
<code class="docutils literal notranslate"><span class="pre">Print</span></code> to a new module <code class="docutils literal notranslate"><span class="pre">Int</span></code>. You will need to write <code class="docutils literal notranslate"><span class="pre">Int</span></code> yourself. The type
<code class="docutils literal notranslate"><span class="pre">Int.t</span></code> should be <code class="docutils literal notranslate"><span class="pre">int</span></code>. <em>Hint: do not seal <code class="docutils literal notranslate"><span class="pre">Int</span></code>.</em></p>
<p>Experiment with <code class="docutils literal notranslate"><span class="pre">PrintInt</span></code> in utop. Use it to print the value of an integer.</p>
<!--------------------------------------------------------------------------->
<hr class="docutils" />
<p><strong>Exercise: Print String [★★]</strong></p>
<p>Create a module named <code class="docutils literal notranslate"><span class="pre">PrintString</span></code> that is the result of applying the functor
<code class="docutils literal notranslate"><span class="pre">Print</span></code> to a new module <code class="docutils literal notranslate"><span class="pre">MyString</span></code>. You will need to write <code class="docutils literal notranslate"><span class="pre">MyString</span></code> yourself.
<em>Hint: do not seal <code class="docutils literal notranslate"><span class="pre">MyString</span></code>.</em></p>
<p>Experiment with <code class="docutils literal notranslate"><span class="pre">PrintString</span></code> in utop. Use it to print the value of a string.</p>
<!--------------------------------------------------------------------------->
<hr class="docutils" />
<p><strong>Exercise: Print Reuse [★]</strong></p>
<p>Explain in your own words how <code class="docutils literal notranslate"><span class="pre">Print</span></code> has achieved code reuse, albeit a very
small amount.</p>
<!--------------------------------------------------------------------------->
<hr class="docutils" />
<p><strong>Exercise: Print String reuse revisited [★★]</strong></p>
<p>The <code class="docutils literal notranslate"><span class="pre">PrintString</span></code> module you created above supports just one operation: <code class="docutils literal notranslate"><span class="pre">print</span></code>.
It would be great to have a module that supports all the <code class="docutils literal notranslate"><span class="pre">String</span></code> module
functions in addition to that <code class="docutils literal notranslate"><span class="pre">print</span></code> operation, and it would be super great to
derive such a module without having to copy any code.</p>
<p>Define a module <code class="docutils literal notranslate"><span class="pre">StringWithPrint</span></code>. It should have all the values of the built-in
<code class="docutils literal notranslate"><span class="pre">String</span></code> module. It should also have the <code class="docutils literal notranslate"><span class="pre">print</span></code> operation, which should be
derived from the <code class="docutils literal notranslate"><span class="pre">Print</span></code> functor rather than being copied code. <em>Hint: use two
<code class="docutils literal notranslate"><span class="pre">include</span></code> statements.</em></p>
<!--------------------------------------------------------------------------->
<hr class="docutils" />
<p><strong>Exercise: implementation without interface [★]</strong></p>
<p>Create a file named <code class="docutils literal notranslate"><span class="pre">date.ml</span></code>.  In it put the following code:</p>
<div class="highlight-ocaml notranslate"><div class="highlight"><pre><span></span><span class="k">type</span> <span class="n">date</span> <span class="o">=</span> <span class="o">{</span><span class="n">month</span> <span class="o">:</span> <span class="kt">int</span><span class="o">;</span> <span class="n">day</span> <span class="o">:</span> <span class="kt">int</span><span class="o">}</span>
<span class="k">let</span> <span class="n">make_date</span> <span class="n">month</span> <span class="n">day</span> <span class="o">=</span> <span class="o">{</span><span class="n">month</span><span class="o">;</span> <span class="n">day</span><span class="o">}</span>
<span class="k">let</span> <span class="n">get_month</span> <span class="n">d</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">month</span>
<span class="k">let</span> <span class="n">get_day</span> <span class="n">d</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">day</span>
<span class="k">let</span> <span class="n">to_string</span> <span class="n">d</span> <span class="o">=</span> <span class="o">(</span><span class="n">string_of_int</span> <span class="n">d</span><span class="o">.</span><span class="n">month</span><span class="o">)</span> <span class="o">^</span> <span class="s2">&quot;/&quot;</span> <span class="o">^</span> <span class="o">(</span><span class="n">string_of_int</span> <span class="n">d</span><span class="o">.</span><span class="n">day</span><span class="o">)</span>
</pre></div>
</div>
<p>Also create a dune file:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>(library
 (name date))
</pre></div>
</div>
<p>Load the library into utop:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>dune<span class="w"> </span>utop
</pre></div>
</div>
<p>In utop, open <code class="docutils literal notranslate"><span class="pre">Date</span></code>, create a date, access its day, and convert it to a string.</p>
<!--------------------------------------------------------------------------->
<hr class="docutils" />
<p><strong>Exercise: implementation with interface [★]</strong></p>
<p>After doing the previous exercise, also create a file named <code class="docutils literal notranslate"><span class="pre">date.mli</span></code>. In it
put the following code:</p>
<div class="highlight-ocaml notranslate"><div class="highlight"><pre><span></span><span class="k">type</span> <span class="n">date</span> <span class="o">=</span> <span class="o">{</span><span class="n">month</span> <span class="o">:</span> <span class="kt">int</span><span class="o">;</span> <span class="n">day</span> <span class="o">:</span> <span class="kt">int</span><span class="o">}</span>
<span class="k">val</span> <span class="n">make_date</span> <span class="o">:</span> <span class="kt">int</span> <span class="o">-&gt;</span> <span class="kt">int</span> <span class="o">-&gt;</span> <span class="n">date</span>
<span class="k">val</span> <span class="n">get_month</span> <span class="o">:</span> <span class="n">date</span> <span class="o">-&gt;</span> <span class="kt">int</span>
<span class="k">val</span> <span class="n">get_day</span> <span class="o">:</span> <span class="n">date</span> <span class="o">-&gt;</span> <span class="kt">int</span>
<span class="k">val</span> <span class="n">to_string</span> <span class="o">:</span> <span class="n">date</span> <span class="o">-&gt;</span> <span class="kt">string</span>
</pre></div>
</div>
<p>Then re-do the same work as before in utop.</p>
<!--------------------------------------------------------------------------->
<hr class="docutils" />
<p><strong>Exercise: implementation with abstracted interface [★]</strong></p>
<p>After doing the previous two exercises, edit <code class="docutils literal notranslate"><span class="pre">date.mli</span></code> and change the first
declaration in it to the following:</p>
<div class="highlight-ocaml notranslate"><div class="highlight"><pre><span></span><span class="k">type</span> <span class="n">date</span>
</pre></div>
</div>
<p>The type <code class="docutils literal notranslate"><span class="pre">date</span></code> is now abstract. Again re-do the same work in utop. Some of the
responses will change. Explain in your own words those changes.</p>
<!--------------------------------------------------------------------------->
<hr class="docutils" />
<p><strong>Exercise: printer for date [★★★]</strong></p>
<p>Add a declaration to <code class="docutils literal notranslate"><span class="pre">date.mli</span></code>:</p>
<div class="highlight-ocaml notranslate"><div class="highlight"><pre><span></span><span class="k">val</span> <span class="n">format</span> <span class="o">:</span> <span class="nn">Format</span><span class="p">.</span><span class="n">formatter</span> <span class="o">-&gt;</span> <span class="n">date</span> <span class="o">-&gt;</span> <span class="kt">unit</span>
</pre></div>
</div>
<p>And add a definition of <code class="docutils literal notranslate"><span class="pre">format</span></code> to <code class="docutils literal notranslate"><span class="pre">date.ml</span></code>. <em>Hint: use <code class="docutils literal notranslate"><span class="pre">Format.fprintf</span></code> and
<code class="docutils literal notranslate"><span class="pre">Date.to_string</span></code>.</em></p>
<p>Now recompile, load utop, and after loading <code class="docutils literal notranslate"><span class="pre">date.cmo</span></code> install the printer by
issuing the directive</p>
<div class="highlight-ocaml notranslate"><div class="highlight"><pre><span></span><span class="o">#</span><span class="n">install_printer</span> <span class="nn">Date</span><span class="p">.</span><span class="n">format</span><span class="o">;;</span>
</pre></div>
</div>
<p>Reissue the other phrases to utop as you did in the exercises above. The
response from one phrase will change in a helpful way. Explain why.</p>
<!--------------------------------------------------------------------------->
<hr class="docutils" />
<p><strong>Exercise: refactor arith [★★★★]</strong></p>
<p>Download this file: <a href="../../code/algebra.ml">algebra.ml</a>. It
contains these signatures and structures:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Ring</span></code> is signature that describes the algebraic structure called a <em><a class="reference external" href="https://en.wikipedia.org/wiki/Ring_(mathematics)">ring</a></em>,
which is an abstraction of the addition and multiplication operators.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Field</span></code> is a signature that describes the algebraic structure called a
<em><a class="reference external" href="https://en.wikipedia.org/wiki/Field_(mathematics)">field</a></em>, which is like a ring but also has an abstraction of the division
operation.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">IntRing</span></code> and <code class="docutils literal notranslate"><span class="pre">FloatRing</span></code> are structures that implement rings in terms of
<code class="docutils literal notranslate"><span class="pre">int</span></code> and <code class="docutils literal notranslate"><span class="pre">float</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">IntField</span></code> and <code class="docutils literal notranslate"><span class="pre">FloatField</span></code> are structures that implement fields in terms of
<code class="docutils literal notranslate"><span class="pre">int</span></code> and <code class="docutils literal notranslate"><span class="pre">float</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">IntRational</span></code> and <code class="docutils literal notranslate"><span class="pre">FloatRational</span></code> are structures that implement fields in
terms of ratios (aka fractions)—that is, pairs of <code class="docutils literal notranslate"><span class="pre">int</span></code> and pairs of
<code class="docutils literal notranslate"><span class="pre">float</span></code>.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Dear fans of abstract algebra: of course these representations don’t necessarily
obey all the axioms of rings and fields because of the limitations of machine
arithmetic. Also, the division operation in <code class="docutils literal notranslate"><span class="pre">IntField</span></code> is ill-defined on zero.
Try not to worry about that.</p>
</div>
<p>Refactor the code to improve the amount of code reuse it exhibits. To do that,
use <code class="docutils literal notranslate"><span class="pre">include</span></code>, functors, and introduce additional structures and signatures as
needed. There isn’t necessarily a right answer here, but here’s some advice:</p>
<ul class="simple">
<li><p>No name should be <em>directly declared</em> in more than one signature. For example,
<code class="docutils literal notranslate"><span class="pre">(</span> <span class="pre">+</span> <span class="pre">)</span></code> should not be directly declared in <code class="docutils literal notranslate"><span class="pre">Field</span></code>; it should be reused from
an earlier signature. By “directly declared” we mean a declaration of the form
<code class="docutils literal notranslate"><span class="pre">val</span> <span class="pre">name</span> <span class="pre">:</span> <span class="pre">...</span></code>. An indirect declaration would be one that results from an
<code class="docutils literal notranslate"><span class="pre">include</span></code>.</p></li>
<li><p>You need only three <em>direct definitions</em> of the algebraic operations and
numbers (plus, minus, times, divide, zero, one): once for <code class="docutils literal notranslate"><span class="pre">int</span></code>, once for
<code class="docutils literal notranslate"><span class="pre">float</span></code>, and once for ratios. For example, <code class="docutils literal notranslate"><span class="pre">IntField.(</span> <span class="pre">+</span> <span class="pre">)</span></code> should not be
directly defined as <code class="docutils literal notranslate"><span class="pre">Stdlib.(</span> <span class="pre">+</span> <span class="pre">)</span></code>; rather, it should be reused from
elsewhere. By “directly defined” we mean a definition of the form
<code class="docutils literal notranslate"><span class="pre">let</span> <span class="pre">name</span> <span class="pre">=</span> <span class="pre">...</span></code>. An indirect definition would be one that results from an
<code class="docutils literal notranslate"><span class="pre">include</span></code> or a functor application.</p></li>
<li><p>The rational structures can both be produced by a single functor that is
applied once to <code class="docutils literal notranslate"><span class="pre">IntRing</span></code> and once to <code class="docutils literal notranslate"><span class="pre">FloatRing</span></code>.</p></li>
<li><p>It’s possible to eliminate all duplication of <code class="docutils literal notranslate"><span class="pre">of_int</span></code>, such that it is
directly defined exactly once, and all structures reuse that definition; and
such that it is directly declared in only one signature. This will require the
use of functors. It will also require inventing an algorithm that can convert
an integer to an arbitrary <code class="docutils literal notranslate"><span class="pre">Ring</span></code> representation, regardless of what the
representation type of that <code class="docutils literal notranslate"><span class="pre">Ring</span></code> is.</p></li>
</ul>
<p>When you’re done, the types of all the modules should remain unchanged. You can
easily see those types by running <code class="docutils literal notranslate"><span class="pre">ocamlc</span> <span class="pre">-i</span> <span class="pre">algebra.ml</span></code>.</p>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "cs3110/textbook",
            ref: "main",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./chapters/modules"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="summary.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title"><span class="section-number">5.10. </span>Summary</p>
      </div>
    </a>
    <a class="right-next"
       href="../mut/intro.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title"><span class="section-number">6. </span>Mutability</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Michael R. Clarkson et al.
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2025.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../_static/scripts/bootstrap.js?digest=bd9e20870c6007c4c509"></script>
<script src="../../_static/scripts/pydata-sphinx-theme.js?digest=bd9e20870c6007c4c509"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>