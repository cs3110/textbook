

<!DOCTYPE html>


<html lang="en" data-content_root="" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>8.4. Sequences &#8212; OCaml Programming: Correct + Efficient + Beautiful</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=bd9e20870c6007c4c509" rel="stylesheet" />
<link href="../../_static/styles/bootstrap.css?digest=bd9e20870c6007c4c509" rel="stylesheet" />
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=bd9e20870c6007c4c509" rel="stylesheet" />

  
  <link href="../../_static/vendor/fontawesome/6.5.1/css/all.min.css?digest=bd9e20870c6007c4c509" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.5.1/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.5.1/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.5.1/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" href="../../_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/custom.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/bootstrap.js?digest=bd9e20870c6007c4c509" />
<link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=bd9e20870c6007c4c509" />
  <script src="../../_static/vendor/fontawesome/6.5.1/js/all.min.js?digest=bd9e20870c6007c4c509"></script>

    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <script src="../../_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../../_static/togglebutton.js"></script>
    <script async="async" kind="hypothesis" src="https://hypothes.is/embed.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../../_static/sphinx-thebe.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'chapters/ds/sequence';</script>
    <link rel="shortcut icon" href="../../_static/op.png"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="8.5. Memoization" href="memoization.html" />
    <link rel="prev" title="8.3. Red-Black Trees" href="rb.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a id="pst-skip-link" class="skip-link" href="#main-content">Skip to main content</a>
  
  <div id="pst-scroll-pixel-helper"></div>

  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>
    Back to top
  </button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <header>
  
    <div class="bd-header navbar navbar-expand-lg bd-navbar">
    </div>
  
  </header>

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
        
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  

<a class="navbar-brand logo" href="../../cover.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../../_static/op_title.png" class="logo__image only-light" alt="OCaml Programming: Correct + Efficient + Beautiful - Home"/>
    <script>document.write(`<img src="../../_static/op_title.png" class="logo__image only-dark" alt="OCaml Programming: Correct + Efficient + Beautiful - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Preface</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../preface/about.html">About This Book</a></li>
<li class="toctree-l1"><a class="reference internal" href="../preface/install.html">Installing OCaml</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Introduction</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../intro/intro.html">1. Better Programming Through OCaml</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-1"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../intro/past.html">1.1. The Past of OCaml</a></li>
<li class="toctree-l2"><a class="reference internal" href="../intro/present.html">1.2. The Present of OCaml</a></li>
<li class="toctree-l2"><a class="reference internal" href="../intro/future.html">1.3. Look to Your Future</a></li>
<li class="toctree-l2"><a class="reference internal" href="../intro/3110.html">1.4. A Brief History of CS 3110</a></li>
<li class="toctree-l2"><a class="reference internal" href="../intro/summary.html">1.5. Summary</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../basics/intro.html">2. The Basics of OCaml</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-2"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../basics/toplevel.html">2.1. The OCaml Toplevel</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basics/compiling.html">2.2. Compiling OCaml Programs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basics/expressions.html">2.3. Expressions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basics/functions.html">2.4. Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basics/documentation.html">2.5. Documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basics/printing.html">2.6. Printing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basics/debugging.html">2.7. Debugging</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basics/summary.html">2.8. Summary</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basics/exercises.html">2.9. Exercises</a></li>
</ul>
</li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">OCaml Programming</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../data/intro.html">3. Data and Types</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-3"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../data/lists.html">3.1. Lists</a></li>
<li class="toctree-l2"><a class="reference internal" href="../data/variants.html">3.2. Variants</a></li>
<li class="toctree-l2"><a class="reference internal" href="../data/ounit.html">3.3. Unit Testing with OUnit</a></li>
<li class="toctree-l2"><a class="reference internal" href="../data/records_tuples.html">3.4. Records and Tuples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../data/pattern_matching_advanced.html">3.5. Advanced Pattern Matching</a></li>
<li class="toctree-l2"><a class="reference internal" href="../data/type_synonym.html">3.6. Type Synonyms</a></li>
<li class="toctree-l2"><a class="reference internal" href="../data/options.html">3.7. Options</a></li>
<li class="toctree-l2"><a class="reference internal" href="../data/assoc_list.html">3.8. Association Lists</a></li>
<li class="toctree-l2"><a class="reference internal" href="../data/algebraic_data_types.html">3.9. Algebraic Data Types</a></li>
<li class="toctree-l2"><a class="reference internal" href="../data/exceptions.html">3.10. Exceptions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../data/trees.html">3.11. Example: Trees</a></li>
<li class="toctree-l2"><a class="reference internal" href="../data/nats.html">3.12. Example: Natural Numbers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../data/summary.html">3.13. Summary</a></li>
<li class="toctree-l2"><a class="reference internal" href="../data/exercises.html">3.14. Exercises</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../hop/intro.html">4. Higher-Order Programming</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-4"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../hop/higher_order.html">4.1. Higher-Order Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../hop/map.html">4.2. Map</a></li>
<li class="toctree-l2"><a class="reference internal" href="../hop/filter.html">4.3. Filter</a></li>
<li class="toctree-l2"><a class="reference internal" href="../hop/fold.html">4.4. Fold</a></li>
<li class="toctree-l2"><a class="reference internal" href="../hop/beyond_lists.html">4.5. Beyond Lists</a></li>
<li class="toctree-l2"><a class="reference internal" href="../hop/pipelining.html">4.6. Pipelining</a></li>
<li class="toctree-l2"><a class="reference internal" href="../hop/currying.html">4.7. Currying</a></li>
<li class="toctree-l2"><a class="reference internal" href="../hop/summary.html">4.8. Summary</a></li>
<li class="toctree-l2"><a class="reference internal" href="../hop/exercises.html">4.9. Exercises</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../modules/intro.html">5. Modular Programming</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-5"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../modules/module_systems.html">5.1. Module Systems</a></li>
<li class="toctree-l2"><a class="reference internal" href="../modules/modules.html">5.2. Modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="../modules/toplevel.html">5.3. Modules and the Toplevel</a></li>
<li class="toctree-l2"><a class="reference internal" href="../modules/encapsulation.html">5.4. Encapsulation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../modules/compilation_units.html">5.5. Compilation Units</a></li>
<li class="toctree-l2"><a class="reference internal" href="../modules/functional_data_structures.html">5.6. Functional Data Structures</a></li>
<li class="toctree-l2"><a class="reference internal" href="../modules/module_type_constraints.html">5.7. Module Type Constraints</a></li>
<li class="toctree-l2"><a class="reference internal" href="../modules/includes.html">5.8. Includes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../modules/functors.html">5.9. Functors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../modules/summary.html">5.10. Summary</a></li>
<li class="toctree-l2"><a class="reference internal" href="../modules/exercises.html">5.11. Exercises</a></li>
</ul>
</li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Correctness and Efficiency</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../correctness/intro.html">6. Correctness</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-6"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../correctness/specifications.html">6.1. Specifications</a></li>
<li class="toctree-l2"><a class="reference internal" href="../correctness/function_docs.html">6.2. Function Documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../correctness/module_docs.html">6.3. Module Documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../correctness/test_debug.html">6.4. Testing and Debugging</a></li>
<li class="toctree-l2"><a class="reference internal" href="../correctness/black_glass_box.html">6.5. Black-box and Glass-box Testing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../correctness/randomized.html">6.6. Randomized Testing with QCheck</a></li>
<li class="toctree-l2"><a class="reference internal" href="../correctness/proving_correctness.html">6.7. Proving Correctness</a></li>
<li class="toctree-l2"><a class="reference internal" href="../correctness/structural_induction.html">6.8. Structural Induction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../correctness/alg_spec.html">6.9. Algebraic Specification</a></li>
<li class="toctree-l2"><a class="reference internal" href="../correctness/summary.html">6.10. Summary</a></li>
<li class="toctree-l2"><a class="reference internal" href="../correctness/exercises.html">6.11. Exercises</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../mut/intro.html">7. Mutability</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-7"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../mut/refs.html">7.1. Refs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mut/mutable_fields.html">7.2. Mutable Fields</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mut/arrays.html">7.3. Arrays and Loops</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mut/summary.html">7.4. Summary</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mut/exercises.html">7.5. Exercises</a></li>
</ul>
</li>
<li class="toctree-l1 current active has-children"><a class="reference internal" href="intro.html">8. Data Structures</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-8"><i class="fa-solid fa-chevron-down"></i></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="hash_tables.html">8.1. Hash Tables</a></li>
<li class="toctree-l2"><a class="reference internal" href="amortized.html">8.2. Amortized Analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="rb.html">8.3. Red-Black Trees</a></li>
<li class="toctree-l2 current active"><a class="current reference internal" href="#">8.4. Sequences</a></li>
<li class="toctree-l2"><a class="reference internal" href="memoization.html">8.5. Memoization</a></li>
<li class="toctree-l2"><a class="reference internal" href="parrays.html">8.6. Persistent Arrays</a></li>
<li class="toctree-l2"><a class="reference internal" href="promises.html">8.7. Promises</a></li>
<li class="toctree-l2"><a class="reference internal" href="monads.html">8.8. Monads</a></li>
<li class="toctree-l2"><a class="reference internal" href="summary.html">8.9. Summary</a></li>
<li class="toctree-l2"><a class="reference internal" href="exercises.html">8.10. Exercises</a></li>
</ul>
</li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Language Implementation</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../interp/intro.html">9. Interpreters</a><input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-9"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../interp/calculator.html">9.1. Example: Calculator</a></li>
<li class="toctree-l2"><a class="reference internal" href="../interp/parsing.html">9.2. Parsing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../interp/substitution.html">9.3. Substitution Model</a></li>
<li class="toctree-l2"><a class="reference internal" href="../interp/environment.html">9.4. Environment Model</a></li>
<li class="toctree-l2"><a class="reference internal" href="../interp/typecheck.html">9.5. Type Checking</a></li>
<li class="toctree-l2"><a class="reference internal" href="../interp/inference.html">9.6. Type Inference</a></li>
<li class="toctree-l2"><a class="reference internal" href="../interp/summary.html">9.7. Summary</a></li>
<li class="toctree-l2"><a class="reference internal" href="../interp/exercises.html">9.8. Exercises</a></li>
</ul>
</li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Lagniappe</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../adv/curry-howard.html">The Curry-Howard Correspondence</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Appendix</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../appendix/bigoh.html">Big-Oh Notation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../appendix/vm.html">Virtual Machine</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-launch-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Launch interactive content">
    <i class="fas fa-rocket"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://mybinder.org/v2/gh/cs3110/textbook/main?urlpath=tree/src/chapters/ds/sequence.md" target="_blank"
   class="btn btn-sm dropdown-item"
   title="Launch onBinder"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  
    <img src="../../_static/images/logo_binder.svg">
  </span>
<span class="btn__text-container">Binder</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="initThebeSBT()"
  class="btn btn-sm btn-launch-thebe dropdown-item"
  title="Launch Thebe"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-play"></i>
  </span>
<span class="btn__text-container">Live Code</span>
</button>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/cs3110/textbook" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/cs3110/textbook/edit/main/src/chapters/ds/sequence.md" target="_blank"
   class="btn btn-sm btn-source-edit-button dropdown-item"
   title="Suggest edit"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-pencil-alt"></i>
  </span>
<span class="btn__text-container">Suggest edit</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/cs3110/textbook/issues/new?title=Issue%20on%20page%20%2Fchapters/ds/sequence.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../../_sources/chapters/ds/sequence.ipynb" target="_blank"
   class="btn btn-sm btn-download-notebook-button dropdown-item"
   title="Download notebook file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-code"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li><a href="../../_sources/chapters/ds/sequence.md" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Sequences</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#how-not-to-define-a-sequence">8.4.1. How Not to Define a Sequence</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#how-to-correctly-define-a-sequence">8.4.2. How to Correctly Define a Sequence</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#programming-with-sequences">8.4.3. Programming with Sequences</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#laziness">8.4.4. Laziness</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#lazy-sequences">8.4.4.1. Lazy Sequences</a></li>
</ul>
</li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="sequences">
<h1><span class="section-number">8.4. </span>Sequences<a class="headerlink" href="#sequences" title="Permalink to this heading">#</a></h1>
<p>A <em>sequence</em> is an infinite list. For example, the infinite list of all natural
numbers would be a sequence. So would the list of all primes, or all Fibonacci
numbers. How can we efficiently represent infinite lists? Obviously we can’t
store the whole list in memory.</p>
<p>We already know that OCaml allows us to create recursive functions—that
is, functions defined in terms of themselves. It turns out we can define other
values in terms of themselves, too.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-OCaml notranslate"><div class="highlight"><pre><span></span><span class="k">let</span> <span class="k">rec</span> <span class="n">ones</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">::</span> <span class="n">ones</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>val ones : int list = [1; &lt;cycle&gt;]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-OCaml notranslate"><div class="highlight"><pre><span></span><span class="k">let</span> <span class="k">rec</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">0</span> <span class="o">::</span> <span class="n">b</span> <span class="k">and</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">::</span> <span class="n">a</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>val a : int list = [0; 1; &lt;cycle&gt;]
val b : int list = [1; 0; &lt;cycle&gt;]
</pre></div>
</div>
</div>
</div>
<p>The expressions above create <em>recursive values</em>. The list <code class="docutils literal notranslate"><span class="pre">ones</span></code> contains an
infinite sequence of <code class="docutils literal notranslate"><span class="pre">1</span></code>, and the lists <code class="docutils literal notranslate"><span class="pre">a</span></code> and <code class="docutils literal notranslate"><span class="pre">b</span></code> alternate infinitely between
<code class="docutils literal notranslate"><span class="pre">0</span></code> and <code class="docutils literal notranslate"><span class="pre">1</span></code>. As the lists are infinite, the toplevel cannot print them in their
entirety. Instead, it indicates a <em>cycle</em>: the list cycles back to its
beginning. Even though these lists represent an infinite sequence of values,
their representation in memory is finite: they are linked lists with back
pointers that create those cycles.</p>
<p>Beyond sequences of numbers, there are other kinds of infinite mathematical
objects we might want to represent with finite data structures:</p>
<ul class="simple">
<li><p>A stream of inputs read from a file, a network socket, or a user. All of these
are unbounded in length, hence we can think of them as being infinite in
length. In fact, many I/O libraries treat reaching the end of an I/O stream as
an unexpected situation and raise an exception.</p></li>
<li><p>A <em>game tree</em> is a tree in which the positions of a game (e.g., chess or
tic-tac-toe)_ are the nodes and the edges are possible moves. For some games
this tree is in fact infinite (imagine, e.g., that the pieces on the board
could chase each other around forever), and for other games, it’s so deep that
we would never want to manifest the entire tree, hence it is effectively
infinite.</p></li>
</ul>
<section id="how-not-to-define-a-sequence">
<h2><span class="section-number">8.4.1. </span>How Not to Define a Sequence<a class="headerlink" href="#how-not-to-define-a-sequence" title="Permalink to this heading">#</a></h2>
<p>Suppose we wanted to represent the first of those examples: the sequence of all
natural numbers. Some of the obvious things we might try simply don’t work:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-OCaml notranslate"><div class="highlight"><pre><span></span><span class="c">(** [from n] is the infinite list [[n; n + 1; n + 2; ...]]. *)</span>
<span class="k">let</span> <span class="k">rec</span> <span class="n">from</span> <span class="n">n</span> <span class="o">=</span> <span class="n">n</span> <span class="o">::</span> <span class="n">from</span> <span class="o">(</span><span class="n">n</span> <span class="o">+</span> <span class="mi">1</span><span class="o">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>val from : int -&gt; int list = &lt;fun&gt;
</pre></div>
</div>
</div>
</div>
<div class="highlight-ocaml notranslate"><div class="highlight"><pre><span></span><span class="c">(** [nats] is the infinite list of natural numbers [[0; 1; ...]]. *)</span>
<span class="k">let</span> <span class="n">nats</span> <span class="o">=</span> <span class="n">from</span> <span class="mi">0</span>
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Stack overflow during evaluation (looping recursion?).
</pre></div>
</div>
<p>The problem with that attempt is that <code class="docutils literal notranslate"><span class="pre">nats</span></code> attempts to compute the entire
infinite sequence of natural numbers. Because the function isn’t tail recursive,
it quickly overflows the stack. If it were tail recursive, it would go into an
infinite loop.</p>
<p>Here’s another attempt, using what we discovered above about recursive values:</p>
<div class="cell tag_raises-exception docutils container">
<div class="cell_input docutils container">
<div class="highlight-OCaml notranslate"><div class="highlight"><pre><span></span><span class="k">let</span> <span class="k">rec</span> <span class="n">nats</span> <span class="o">=</span> <span class="mi">0</span> <span class="o">::</span> <span class="nn">List</span><span class="p">.</span><span class="n">map</span> <span class="o">(</span><span class="k">fun</span> <span class="n">x</span> <span class="o">-&gt;</span> <span class="n">x</span> <span class="o">+</span> <span class="mi">1</span><span class="o">)</span> <span class="n">nats</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="n">File</span> <span class="s2">&quot;[4]&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">1</span><span class="p">,</span> <span class="n">characters</span> <span class="mi">15</span><span class="o">-</span><span class="mi">50</span><span class="p">:</span>
<span class="mi">1</span> <span class="o">|</span> <span class="n">let</span> <span class="n">rec</span> <span class="n">nats</span> <span class="o">=</span> <span class="mi">0</span> <span class="p">::</span> <span class="n">List</span><span class="o">.</span><span class="n">map</span> <span class="p">(</span><span class="n">fun</span> <span class="n">x</span> <span class="o">-&gt;</span> <span class="n">x</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="n">nats</span>
                   <span class="o">^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^</span>
<span class="ne">Error</span>: This kind of expression is not allowed as right-hand side of `let rec&#39;
</pre></div>
</div>
</div>
</div>
<p>That attempt doesn’t work for a more subtle reason. In the definition of a
recursive value, we are not permitted to use a value before it is finished being
defined. The problem is that <code class="docutils literal notranslate"><span class="pre">List.map</span></code> is applied to <code class="docutils literal notranslate"><span class="pre">nats</span></code>, and therefore
pattern matches to extract the head and tail of <code class="docutils literal notranslate"><span class="pre">nats</span></code>. But we are in the middle
of defining <code class="docutils literal notranslate"><span class="pre">nats</span></code>, so that use of <code class="docutils literal notranslate"><span class="pre">nats</span></code> is not permitted.</p>
</section>
<section id="how-to-correctly-define-a-sequence">
<h2><span class="section-number">8.4.2. </span>How to Correctly Define a Sequence<a class="headerlink" href="#how-to-correctly-define-a-sequence" title="Permalink to this heading">#</a></h2>
<p>We can try to define a sequence by analogy to how we can define (finite) lists.
Recall that definition:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-OCaml notranslate"><div class="highlight"><pre><span></span><span class="k">type</span> <span class="k">&#39;</span><span class="n">a</span> <span class="n">mylist</span> <span class="o">=</span> <span class="nc">Nil</span> <span class="o">|</span> <span class="nc">Cons</span> <span class="k">of</span> <span class="k">&#39;</span><span class="n">a</span> <span class="o">*</span> <span class="k">&#39;</span><span class="n">a</span> <span class="n">mylist</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>type &#39;a mylist = Nil | Cons of &#39;a * &#39;a mylist
</pre></div>
</div>
</div>
</div>
<p>We could try to convert that into a definition for sequences:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-OCaml notranslate"><div class="highlight"><pre><span></span><span class="k">type</span> <span class="k">&#39;</span><span class="n">a</span> <span class="n">sequence</span> <span class="o">=</span> <span class="nc">Cons</span> <span class="k">of</span> <span class="k">&#39;</span><span class="n">a</span> <span class="o">*</span> <span class="k">&#39;</span><span class="n">a</span> <span class="n">sequence</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>type &#39;a sequence = Cons of &#39;a * &#39;a sequence
</pre></div>
</div>
</div>
</div>
<p>Note that we got rid of the <code class="docutils literal notranslate"><span class="pre">Nil</span></code> constructor, because the empty list is finite,
but we want only infinite lists.</p>
<p>The problem with that definition is that it’s really no better than the built-in
list in OCaml, in that we still can’t define <code class="docutils literal notranslate"><span class="pre">nats</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-OCaml notranslate"><div class="highlight"><pre><span></span><span class="k">let</span> <span class="k">rec</span> <span class="n">from</span> <span class="n">n</span> <span class="o">=</span> <span class="nc">Cons</span> <span class="o">(</span><span class="n">n</span><span class="o">,</span> <span class="n">from</span> <span class="o">(</span><span class="n">n</span> <span class="o">+</span> <span class="mi">1</span><span class="o">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>val from : int -&gt; int sequence = &lt;fun&gt;
</pre></div>
</div>
</div>
</div>
<div class="highlight-ocaml notranslate"><div class="highlight"><pre><span></span><span class="k">let</span> <span class="n">nats</span> <span class="o">=</span> <span class="n">from</span> <span class="mi">0</span>
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Stack overflow during evaluation (looping recursion?).
</pre></div>
</div>
<p>As before, that definition attempts to go off and compute the entire infinite
sequence of naturals.</p>
<p>What we need is a way to <em>pause</em> evaluation, so that at any point in time, only
a finite approximation to the infinite sequence has been computed. Fortunately,
we already know how to do that!</p>
<p>Consider the following definitions:</p>
<div class="cell tag_raises-exception docutils container">
<div class="cell_input docutils container">
<div class="highlight-OCaml notranslate"><div class="highlight"><pre><span></span><span class="k">let</span> <span class="n">f1</span> <span class="o">=</span> <span class="n">failwith</span> <span class="s2">&quot;oops&quot;</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="ne">Exception</span>: Failure &quot;oops&quot;.
<span class="n">Raised</span> <span class="n">at</span> <span class="n">Stdlib</span><span class="o">.</span><span class="n">failwith</span> <span class="ow">in</span> <span class="n">file</span> <span class="s2">&quot;stdlib.ml&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">29</span><span class="p">,</span> <span class="n">characters</span> <span class="mi">17</span><span class="o">-</span><span class="mi">33</span>
<span class="n">Called</span> <span class="kn">from</span> <span class="nn">unknown</span> <span class="n">location</span>
<span class="n">Called</span> <span class="kn">from</span> <span class="nn">Stdlib__Fun.protect</span> <span class="ow">in</span> <span class="n">file</span> <span class="s2">&quot;fun.ml&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">33</span><span class="p">,</span> <span class="n">characters</span> <span class="mi">8</span><span class="o">-</span><span class="mi">15</span>
<span class="n">Re</span><span class="o">-</span><span class="n">raised</span> <span class="n">at</span> <span class="n">Stdlib__Fun</span><span class="o">.</span><span class="n">protect</span> <span class="ow">in</span> <span class="n">file</span> <span class="s2">&quot;fun.ml&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">38</span><span class="p">,</span> <span class="n">characters</span> <span class="mi">6</span><span class="o">-</span><span class="mi">52</span>
<span class="n">Called</span> <span class="kn">from</span> <span class="nn">Topeval.load_lambda</span> <span class="ow">in</span> <span class="n">file</span> <span class="s2">&quot;toplevel/byte/topeval.ml&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">89</span><span class="p">,</span> <span class="n">characters</span> <span class="mi">4</span><span class="o">-</span><span class="mi">150</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-OCaml notranslate"><div class="highlight"><pre><span></span><span class="k">let</span> <span class="n">f2</span> <span class="o">=</span> <span class="k">fun</span> <span class="n">x</span> <span class="o">-&gt;</span> <span class="n">failwith</span> <span class="s2">&quot;oops&quot;</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>val f2 : &#39;a -&gt; &#39;b = &lt;fun&gt;
</pre></div>
</div>
</div>
</div>
<div class="cell tag_raises-exception docutils container">
<div class="cell_input docutils container">
<div class="highlight-OCaml notranslate"><div class="highlight"><pre><span></span><span class="n">f2</span> <span class="bp">()</span><span class="o">;;</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="ne">Exception</span>: Failure &quot;oops&quot;.
<span class="n">Raised</span> <span class="n">at</span> <span class="n">Stdlib</span><span class="o">.</span><span class="n">failwith</span> <span class="ow">in</span> <span class="n">file</span> <span class="s2">&quot;stdlib.ml&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">29</span><span class="p">,</span> <span class="n">characters</span> <span class="mi">17</span><span class="o">-</span><span class="mi">33</span>
<span class="n">Called</span> <span class="kn">from</span> <span class="nn">Stdlib__Fun.protect</span> <span class="ow">in</span> <span class="n">file</span> <span class="s2">&quot;fun.ml&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">33</span><span class="p">,</span> <span class="n">characters</span> <span class="mi">8</span><span class="o">-</span><span class="mi">15</span>
<span class="n">Re</span><span class="o">-</span><span class="n">raised</span> <span class="n">at</span> <span class="n">Stdlib__Fun</span><span class="o">.</span><span class="n">protect</span> <span class="ow">in</span> <span class="n">file</span> <span class="s2">&quot;fun.ml&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">38</span><span class="p">,</span> <span class="n">characters</span> <span class="mi">6</span><span class="o">-</span><span class="mi">52</span>
<span class="n">Called</span> <span class="kn">from</span> <span class="nn">Topeval.load_lambda</span> <span class="ow">in</span> <span class="n">file</span> <span class="s2">&quot;toplevel/byte/topeval.ml&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">89</span><span class="p">,</span> <span class="n">characters</span> <span class="mi">4</span><span class="o">-</span><span class="mi">150</span>
</pre></div>
</div>
</div>
</div>
<p>The definition of <code class="docutils literal notranslate"><span class="pre">f1</span></code> immediately raises an exception, whereas the definition
of <code class="docutils literal notranslate"><span class="pre">f2</span></code> does not. Why? Because <code class="docutils literal notranslate"><span class="pre">f2</span></code> wraps the <code class="docutils literal notranslate"><span class="pre">failwith</span></code> inside an anonymous
function. Recall that, according to the dynamic semantics of OCaml, <strong>functions
are already values</strong>. So no computation is done inside the body of the function
until it is applied. That’s why <code class="docutils literal notranslate"><span class="pre">f2</span> <span class="pre">()</span></code> raises an exception.</p>
<p>We can use this property of evaluation—that functions delay
evaluation—to our advantage in defining sequences: let’s wrap the tail of
a sequence inside a function. Since it doesn’t really matter what argument that
function takes, we might as well let it be unit. A function that is used just to
delay computation, and in particular one that takes unit as input, is called a
<em>thunk</em>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-OCaml notranslate"><div class="highlight"><pre><span></span><span class="c">(** An [&#39;a sequence] is an infinite list of values of type [&#39;a].</span>
<span class="c">    AF: [Cons (x, f)] is the sequence whose head is [x] and tail is [f ()].</span>
<span class="c">    RI: none. *)</span>
<span class="k">type</span> <span class="k">&#39;</span><span class="n">a</span> <span class="n">sequence</span> <span class="o">=</span> <span class="nc">Cons</span> <span class="k">of</span> <span class="k">&#39;</span><span class="n">a</span> <span class="o">*</span> <span class="o">(</span><span class="kt">unit</span> <span class="o">-&gt;</span> <span class="k">&#39;</span><span class="n">a</span> <span class="n">sequence</span><span class="o">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>type &#39;a sequence = Cons of &#39;a * (unit -&gt; &#39;a sequence)
</pre></div>
</div>
</div>
</div>
<p>This definition turns out to work quite well.  We can define <code class="docutils literal notranslate"><span class="pre">nats</span></code>, at last:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-OCaml notranslate"><div class="highlight"><pre><span></span><span class="k">let</span> <span class="k">rec</span> <span class="n">from</span> <span class="n">n</span> <span class="o">=</span> <span class="nc">Cons</span> <span class="o">(</span><span class="n">n</span><span class="o">,</span> <span class="k">fun</span> <span class="bp">()</span> <span class="o">-&gt;</span> <span class="n">from</span> <span class="o">(</span><span class="n">n</span> <span class="o">+</span> <span class="mi">1</span><span class="o">))</span>
<span class="k">let</span> <span class="n">nats</span> <span class="o">=</span> <span class="n">from</span> <span class="mi">0</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>val from : int -&gt; int sequence = &lt;fun&gt;
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>val nats : int sequence = Cons (0, &lt;fun&gt;)
</pre></div>
</div>
</div>
</div>
<p>We do not get an infinite loop or a stack overflow. The evaluation of <code class="docutils literal notranslate"><span class="pre">nats</span></code> has
paused. Only the first element of it, <code class="docutils literal notranslate"><span class="pre">0</span></code>, has been computed. The remaining
elements will not be computed until they are requested. To do that, we can
define functions to access parts of a sequence, similarly to how we can access
parts of a list:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-OCaml notranslate"><div class="highlight"><pre><span></span><span class="c">(** [hd s] is the head of [s]. *)</span>
<span class="k">let</span> <span class="n">hd</span> <span class="o">(</span><span class="nc">Cons</span> <span class="o">(</span><span class="n">h</span><span class="o">,</span> <span class="o">_))</span> <span class="o">=</span> <span class="n">h</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>val hd : &#39;a sequence -&gt; &#39;a = &lt;fun&gt;
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-OCaml notranslate"><div class="highlight"><pre><span></span><span class="c">(** [tl s] is the tail of [s]. *)</span>
<span class="k">let</span> <span class="n">tl</span> <span class="o">(</span><span class="nc">Cons</span> <span class="o">(_,</span> <span class="n">t</span><span class="o">))</span> <span class="o">=</span> <span class="n">t</span> <span class="bp">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>val tl : &#39;a sequence -&gt; &#39;a sequence = &lt;fun&gt;
</pre></div>
</div>
</div>
</div>
<p>Note how, in the definition of <code class="docutils literal notranslate"><span class="pre">tl</span></code>, we must apply the function <code class="docutils literal notranslate"><span class="pre">t</span></code> to <code class="docutils literal notranslate"><span class="pre">()</span></code> to
obtain the tail of the sequence. That is, we must <em>force</em> the thunk to evaluate
at that point, rather than continue to delay its computation.</p>
<p>For convenience, we can write functions that apply <code class="docutils literal notranslate"><span class="pre">hd</span></code> or <code class="docutils literal notranslate"><span class="pre">tl</span></code> multiple times
to take or drop some finite prefix of a sequence:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-OCaml notranslate"><div class="highlight"><pre><span></span><span class="c">(** [take n s] is the list of the first [n] elements of [s]. *)</span>
<span class="k">let</span> <span class="k">rec</span> <span class="n">take</span> <span class="n">n</span> <span class="n">s</span> <span class="o">=</span>
  <span class="k">if</span> <span class="n">n</span> <span class="o">=</span> <span class="mi">0</span> <span class="k">then</span> <span class="bp">[]</span> <span class="k">else</span> <span class="n">hd</span> <span class="n">s</span> <span class="o">::</span> <span class="n">take</span> <span class="o">(</span><span class="n">n</span> <span class="o">-</span> <span class="mi">1</span><span class="o">)</span> <span class="o">(</span><span class="n">tl</span> <span class="n">s</span><span class="o">)</span>

<span class="c">(** [drop n s] is all but the first [n] elements of [s]. *)</span>
<span class="k">let</span> <span class="k">rec</span> <span class="n">drop</span> <span class="n">n</span> <span class="n">s</span> <span class="o">=</span>
  <span class="k">if</span> <span class="n">n</span> <span class="o">=</span> <span class="mi">0</span> <span class="k">then</span> <span class="n">s</span> <span class="k">else</span> <span class="n">drop</span> <span class="o">(</span><span class="n">n</span> <span class="o">-</span> <span class="mi">1</span><span class="o">)</span> <span class="o">(</span><span class="n">tl</span> <span class="n">s</span><span class="o">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>val take : int -&gt; &#39;a sequence -&gt; &#39;a list = &lt;fun&gt;
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>val drop : int -&gt; &#39;a sequence -&gt; &#39;a sequence = &lt;fun&gt;
</pre></div>
</div>
</div>
</div>
<p>For example:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-OCaml notranslate"><div class="highlight"><pre><span></span><span class="n">take</span> <span class="mi">10</span> <span class="n">nats</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>- : int list = [0; 1; 2; 3; 4; 5; 6; 7; 8; 9]
</pre></div>
</div>
</div>
</div>
</section>
<section id="programming-with-sequences">
<h2><span class="section-number">8.4.3. </span>Programming with Sequences<a class="headerlink" href="#programming-with-sequences" title="Permalink to this heading">#</a></h2>
<p>Let’s write some functions that manipulate sequences. It will help to have a
notation for sequences to use as part of documentation. Let’s use
<code class="docutils literal notranslate"><span class="pre">&lt;a;</span> <span class="pre">b;</span> <span class="pre">c;</span> <span class="pre">...&gt;</span></code> to denote the sequence that has elements <code class="docutils literal notranslate"><span class="pre">a</span></code>, <code class="docutils literal notranslate"><span class="pre">b</span></code>, and <code class="docutils literal notranslate"><span class="pre">c</span></code> at
its head, followed by infinitely many other elements.</p>
<p>Here are functions to square a sequence, and to sum two sequences:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-OCaml notranslate"><div class="highlight"><pre><span></span><span class="c">(** [square &lt;a; b; c; ...&gt;] is [&lt;a * a; b * b; c * c; ...]. *)</span>
<span class="k">let</span> <span class="k">rec</span> <span class="n">square</span> <span class="o">(</span><span class="nc">Cons</span> <span class="o">(</span><span class="n">h</span><span class="o">,</span> <span class="n">t</span><span class="o">))</span> <span class="o">=</span>
  <span class="nc">Cons</span> <span class="o">(</span><span class="n">h</span> <span class="o">*</span> <span class="n">h</span><span class="o">,</span> <span class="k">fun</span> <span class="bp">()</span> <span class="o">-&gt;</span> <span class="n">square</span> <span class="o">(</span><span class="n">t</span> <span class="bp">()</span><span class="o">))</span>

<span class="c">(** [sum &lt;a1; a2; a3; ...&gt; &lt;b1; b2; b3; ...&gt;] is</span>
<span class="c">    [&lt;a1 + b1; a2 + b2; a3 + b3; ...&gt;]. *)</span>
<span class="k">let</span> <span class="k">rec</span> <span class="n">sum</span> <span class="o">(</span><span class="nc">Cons</span> <span class="o">(</span><span class="n">h1</span><span class="o">,</span> <span class="n">t1</span><span class="o">))</span> <span class="o">(</span><span class="nc">Cons</span> <span class="o">(</span><span class="n">h2</span><span class="o">,</span> <span class="n">t2</span><span class="o">))</span> <span class="o">=</span>
  <span class="nc">Cons</span> <span class="o">(</span><span class="n">h1</span> <span class="o">+</span> <span class="n">h2</span><span class="o">,</span> <span class="k">fun</span> <span class="bp">()</span> <span class="o">-&gt;</span> <span class="n">sum</span> <span class="o">(</span><span class="n">t1</span> <span class="bp">()</span><span class="o">)</span> <span class="o">(</span><span class="n">t2</span> <span class="bp">()</span><span class="o">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>val square : int sequence -&gt; int sequence = &lt;fun&gt;
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>val sum : int sequence -&gt; int sequence -&gt; int sequence = &lt;fun&gt;
</pre></div>
</div>
</div>
</div>
<p>Note how the basic template for defining both functions is the same:</p>
<ul class="simple">
<li><p>Pattern match against the input sequence(s), which must be <code class="docutils literal notranslate"><span class="pre">Cons</span></code>
of a head and a tail function (a thunk).</p></li>
<li><p>Construct a sequence as the output, which must be <code class="docutils literal notranslate"><span class="pre">Cons</span></code> of a new head and a
new tail function (a thunk).</p></li>
<li><p>In constructing the new tail function, delay the evaluation of the tail by
immediately starting with <code class="docutils literal notranslate"><span class="pre">fun</span> <span class="pre">()</span> <span class="pre">-&gt;</span> <span class="pre">...</span></code>.</p></li>
<li><p>Inside the body of that thunk, recursively apply the function being defined
(square or sum) to the result of forcing a thunk (or thunks) to evaluate.</p></li>
</ul>
<p>Of course, squaring and summing are just two possible ways of mapping a function
across a sequence or sequences. That suggests we could write a higher-order map
function, much like for lists:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-OCaml notranslate"><div class="highlight"><pre><span></span><span class="c">(** [map f &lt;a; b; c; ...&gt;] is [&lt;f a; f b; f c; ...&gt;]. *)</span>
<span class="k">let</span> <span class="k">rec</span> <span class="n">map</span> <span class="n">f</span> <span class="o">(</span><span class="nc">Cons</span> <span class="o">(</span><span class="n">h</span><span class="o">,</span> <span class="n">t</span><span class="o">))</span> <span class="o">=</span>
  <span class="nc">Cons</span> <span class="o">(</span><span class="n">f</span> <span class="n">h</span><span class="o">,</span> <span class="k">fun</span> <span class="bp">()</span> <span class="o">-&gt;</span> <span class="n">map</span> <span class="n">f</span> <span class="o">(</span><span class="n">t</span> <span class="bp">()</span><span class="o">))</span>

<span class="c">(** [map2 f &lt;a1; b1; c1;...&gt; &lt;a2; b2; c2; ...&gt;] is</span>
<span class="c">    [&lt;f a1 b1; f a2 b2; f a3 b3; ...&gt;]. *)</span>
<span class="k">let</span> <span class="k">rec</span> <span class="n">map2</span> <span class="n">f</span> <span class="o">(</span><span class="nc">Cons</span> <span class="o">(</span><span class="n">h1</span><span class="o">,</span> <span class="n">t1</span><span class="o">))</span> <span class="o">(</span><span class="nc">Cons</span> <span class="o">(</span><span class="n">h2</span><span class="o">,</span> <span class="n">t2</span><span class="o">))</span> <span class="o">=</span>
  <span class="nc">Cons</span> <span class="o">(</span><span class="n">f</span> <span class="n">h1</span> <span class="n">h2</span><span class="o">,</span> <span class="k">fun</span> <span class="bp">()</span> <span class="o">-&gt;</span> <span class="n">map2</span> <span class="n">f</span> <span class="o">(</span><span class="n">t1</span> <span class="bp">()</span><span class="o">)</span> <span class="o">(</span><span class="n">t2</span> <span class="bp">()</span><span class="o">))</span>

<span class="k">let</span> <span class="n">square&#39;</span> <span class="o">=</span> <span class="n">map</span> <span class="o">(</span><span class="k">fun</span> <span class="n">n</span> <span class="o">-&gt;</span> <span class="n">n</span> <span class="o">*</span> <span class="n">n</span><span class="o">)</span>
<span class="k">let</span> <span class="n">sum&#39;</span> <span class="o">=</span> <span class="n">map2</span> <span class="o">(</span> <span class="o">+</span> <span class="o">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>val map : (&#39;a -&gt; &#39;b) -&gt; &#39;a sequence -&gt; &#39;b sequence = &lt;fun&gt;
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>val map2 : (&#39;a -&gt; &#39;b -&gt; &#39;c) -&gt; &#39;a sequence -&gt; &#39;b sequence -&gt; &#39;c sequence =
  &lt;fun&gt;
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>val square&#39; : int sequence -&gt; int sequence = &lt;fun&gt;
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>val sum&#39; : int sequence -&gt; int sequence -&gt; int sequence = &lt;fun&gt;
</pre></div>
</div>
</div>
</div>
<p>Now that we have a map function for sequences, we can successfully define <code class="docutils literal notranslate"><span class="pre">nats</span></code>
in one of the clever ways we originally attempted:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-OCaml notranslate"><div class="highlight"><pre><span></span><span class="k">let</span> <span class="k">rec</span> <span class="n">nats</span> <span class="o">=</span> <span class="nc">Cons</span> <span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="k">fun</span> <span class="bp">()</span> <span class="o">-&gt;</span> <span class="n">map</span> <span class="o">(</span><span class="k">fun</span> <span class="n">x</span> <span class="o">-&gt;</span> <span class="n">x</span> <span class="o">+</span> <span class="mi">1</span><span class="o">)</span> <span class="n">nats</span><span class="o">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>val nats : int sequence = Cons (0, &lt;fun&gt;)
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-OCaml notranslate"><div class="highlight"><pre><span></span><span class="n">take</span> <span class="mi">10</span> <span class="n">nats</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>- : int list = [0; 1; 2; 3; 4; 5; 6; 7; 8; 9]
</pre></div>
</div>
</div>
</div>
<p>Why does this work? Intuitively, <code class="docutils literal notranslate"><span class="pre">nats</span></code> is <code class="docutils literal notranslate"><span class="pre">&lt;0;</span> <span class="pre">1;</span> <span class="pre">2;</span> <span class="pre">3;</span> <span class="pre">...&gt;</span></code>, so mapping the
increment function over <code class="docutils literal notranslate"><span class="pre">nats</span></code> is <code class="docutils literal notranslate"><span class="pre">&lt;1;</span> <span class="pre">2;</span> <span class="pre">3;</span> <span class="pre">4;</span> <span class="pre">...&gt;</span></code>. If we cons <code class="docutils literal notranslate"><span class="pre">0</span></code> onto the
beginning of <code class="docutils literal notranslate"><span class="pre">&lt;1;</span> <span class="pre">2;</span> <span class="pre">3;</span> <span class="pre">4;</span> <span class="pre">...&gt;</span></code>, we get <code class="docutils literal notranslate"><span class="pre">&lt;0;</span> <span class="pre">1;</span> <span class="pre">2;</span> <span class="pre">3;</span> <span class="pre">...&gt;</span></code>, as desired. The
recursive value definition is permitted, because we never attempt to use <code class="docutils literal notranslate"><span class="pre">nats</span></code>
until after its definition is finished. In particular, the thunk delays <code class="docutils literal notranslate"><span class="pre">nats</span></code>
from being evaluated on the right-hand side of the definition.</p>
<p>Here’s another clever definition. Consider the Fibonacci sequence
<code class="docutils literal notranslate"><span class="pre">&lt;1;</span> <span class="pre">1;</span> <span class="pre">2;</span> <span class="pre">3;</span> <span class="pre">5;</span> <span class="pre">8;</span> <span class="pre">...&gt;</span></code>. If we take the tail of it, we get
<code class="docutils literal notranslate"><span class="pre">&lt;1;</span> <span class="pre">2;</span> <span class="pre">3;</span> <span class="pre">5;</span> <span class="pre">8;</span> <span class="pre">13;</span> <span class="pre">...&gt;</span></code>. If we sum those two sequences, we get
<code class="docutils literal notranslate"><span class="pre">&lt;2;</span> <span class="pre">3;</span> <span class="pre">5;</span> <span class="pre">8;</span> <span class="pre">13;</span> <span class="pre">21;</span> <span class="pre">...&gt;</span></code>. That’s nothing other than the tail of the tail of
the Fibonacci sequence. So if we were to prepend <code class="docutils literal notranslate"><span class="pre">[1;</span> <span class="pre">1]</span></code> to it, we’d have the
actual Fibonacci sequence. That’s the intuition behind this definition:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-OCaml notranslate"><div class="highlight"><pre><span></span><span class="k">let</span> <span class="k">rec</span> <span class="n">fibs</span> <span class="o">=</span>
  <span class="nc">Cons</span> <span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="k">fun</span> <span class="bp">()</span> <span class="o">-&gt;</span>
    <span class="nc">Cons</span> <span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="k">fun</span> <span class="bp">()</span> <span class="o">-&gt;</span>
      <span class="n">sum</span> <span class="n">fibs</span> <span class="o">(</span><span class="n">tl</span> <span class="n">fibs</span><span class="o">)))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>val fibs : int sequence = Cons (1, &lt;fun&gt;)
</pre></div>
</div>
</div>
</div>
<p>And it works!</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-OCaml notranslate"><div class="highlight"><pre><span></span><span class="n">take</span> <span class="mi">10</span> <span class="n">fibs</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>- : int list = [1; 1; 2; 3; 5; 8; 13; 21; 34; 55]
</pre></div>
</div>
</div>
</div>
<p>Unfortunately, it’s highly inefficient. Every time we force the computation of
the next element, it required recomputing all the previous elements, twice: once
for <code class="docutils literal notranslate"><span class="pre">fibs</span></code> and once for <code class="docutils literal notranslate"><span class="pre">tl</span> <span class="pre">fibs</span></code> in the last line of the definition. Try
running the code yourself. By the time we get up to the 30th number, the
computation is noticeably slow; by the time of the 100th, it seems to last
forever.</p>
<p>Could we do better? Yes, with a little help from a new language feature:
laziness. We discuss it, next.</p>
</section>
<section id="laziness">
<h2><span class="section-number">8.4.4. </span>Laziness<a class="headerlink" href="#laziness" title="Permalink to this heading">#</a></h2>
<p>The example with the Fibonacci sequence demonstrates that it would be useful if
the computation of a thunk happened only once: when it is forced, the resulting
value could be remembered, and if the thunk is ever forced again, that value
could immediately be returned instead of recomputing it. That’s the idea behind
the OCaml <code class="docutils literal notranslate"><span class="pre">Lazy</span></code> module:</p>
<div class="highlight-ocaml notranslate"><div class="highlight"><pre><span></span><span class="k">module</span> <span class="nc">Lazy</span> <span class="o">:</span>
  <span class="k">sig</span>
    <span class="k">type</span> <span class="k">&#39;</span><span class="n">a</span> <span class="n">t</span> <span class="o">=</span> <span class="k">&#39;</span><span class="n">a</span> <span class="n">lazy_t</span>
    <span class="k">val</span> <span class="n">force</span> <span class="o">:</span> <span class="k">&#39;</span><span class="n">a</span> <span class="n">t</span> <span class="o">-&gt;</span> <span class="k">&#39;</span><span class="n">a</span>
    <span class="o">...</span>
  <span class="k">end</span>
</pre></div>
</div>
<p>A value of type <code class="docutils literal notranslate"><span class="pre">'a</span> <span class="pre">Lazy.t</span></code> is a value of type <code class="docutils literal notranslate"><span class="pre">'a</span></code> whose computation has been
delayed. Intuitively, the language is being <em>lazy</em> about evaluating it: it won’t
be computed until specifically demanded. The way that demand is expressed with
by <em>forcing</em> the evaluation with <code class="docutils literal notranslate"><span class="pre">Lazy.force</span></code>, which takes the <code class="docutils literal notranslate"><span class="pre">'a</span> <span class="pre">Lazy.t</span></code> and
causes the <code class="docutils literal notranslate"><span class="pre">'a</span></code> inside it to finally be produced. The first time a lazy value is
forced, the computation might take a long time. But the result is <em>cached</em> aka
<em>memoized</em>, and any subsequent time that lazy value is forced, the memoized
result will be returned immediately without recomputing it.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>“Memoized” really is the correct spelling of this term. We didn’t misspell
“memorized”, though it might look that way.</p>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">Lazy</span></code> module doesn’t contain a function that produces a <code class="docutils literal notranslate"><span class="pre">'a</span> <span class="pre">Lazy.t</span></code>.
Instead, there is a keyword built-in to the OCaml syntax that does it: <code class="docutils literal notranslate"><span class="pre">lazy</span> <span class="pre">e</span></code>.</p>
<ul class="simple">
<li><p><strong>Syntax:</strong>  <code class="docutils literal notranslate"><span class="pre">lazy</span> <span class="pre">e</span></code></p></li>
<li><p><strong>Static semantics:</strong>  If <code class="docutils literal notranslate"><span class="pre">e</span> <span class="pre">:</span> <span class="pre">u</span></code>, then <code class="docutils literal notranslate"><span class="pre">lazy</span> <span class="pre">e</span> <span class="pre">:</span> <span class="pre">u</span> <span class="pre">Lazy.t</span></code>.</p></li>
<li><p><strong>Dynamic semantics:</strong> <code class="docutils literal notranslate"><span class="pre">lazy</span> <span class="pre">e</span></code> does not evaluate <code class="docutils literal notranslate"><span class="pre">e</span></code> to a value. Instead, it
produces a <em>suspension</em> that, when later forced, will evaluate <code class="docutils literal notranslate"><span class="pre">e</span></code> to a value
<code class="docutils literal notranslate"><span class="pre">v</span></code> and return <code class="docutils literal notranslate"><span class="pre">v</span></code>. Moreover, that suspension remembers that <code class="docutils literal notranslate"><span class="pre">v</span></code> is its forced
value. And if the suspension is ever forced again, it immediately returns <code class="docutils literal notranslate"><span class="pre">v</span></code>
instead of recomputing it.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>OCaml’s usual evaluation strategy is <em>eager</em> aka <em>strict</em>: it always evaluate an
argument before function application. If you want a value to be computed lazily,
you must specifically request that with the <code class="docutils literal notranslate"><span class="pre">lazy</span></code> keyword. Other function
languages, notably Haskell, are lazy by default. Laziness can be pleasant when
programming with infinite data structures. But lazy evaluation makes it harder
to reason about space and time, and it has unpleasant interactions with side
effects.</p>
</div>
<p>To illustrate the use of lazy values, let’s try computing the 30th Fibonacci
number using this definition of <code class="docutils literal notranslate"><span class="pre">fibs</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-OCaml notranslate"><div class="highlight"><pre><span></span><span class="k">let</span> <span class="k">rec</span> <span class="n">fibs</span> <span class="o">=</span>
  <span class="nc">Cons</span> <span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="k">fun</span> <span class="bp">()</span> <span class="o">-&gt;</span>
    <span class="nc">Cons</span> <span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="k">fun</span> <span class="bp">()</span> <span class="o">-&gt;</span>
      <span class="n">sum</span> <span class="n">fibs</span> <span class="o">(</span><span class="n">tl</span> <span class="n">fibs</span><span class="o">)))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>val fibs : int sequence = Cons (1, &lt;fun&gt;)
</pre></div>
</div>
</div>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>These next few examples will make much more sense if you run them interactively,
rather than just reading this page.</p>
</div>
<p>If we try to get the 30th Fibonacci number, it will take a long time to compute:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-OCaml notranslate"><div class="highlight"><pre><span></span><span class="k">let</span> <span class="n">fib30long</span> <span class="o">=</span> <span class="n">take</span> <span class="mi">30</span> <span class="n">fibs</span> <span class="o">|&gt;</span> <span class="nn">List</span><span class="p">.</span><span class="n">rev</span> <span class="o">|&gt;</span> <span class="nn">List</span><span class="p">.</span><span class="n">hd</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>val fib30long : int = 832040
</pre></div>
</div>
</div>
</div>
<p>But if we wrap evaluation of that with <code class="docutils literal notranslate"><span class="pre">lazy</span></code>, it will return immediately,
because the evaluation of that number has been suspended:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-OCaml notranslate"><div class="highlight"><pre><span></span><span class="k">let</span> <span class="n">fib30lazy</span> <span class="o">=</span> <span class="k">lazy</span> <span class="o">(</span><span class="n">take</span> <span class="mi">30</span> <span class="n">fibs</span> <span class="o">|&gt;</span> <span class="nn">List</span><span class="p">.</span><span class="n">rev</span> <span class="o">|&gt;</span> <span class="nn">List</span><span class="p">.</span><span class="n">hd</span><span class="o">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>val fib30lazy : int lazy_t = &lt;lazy&gt;
</pre></div>
</div>
</div>
</div>
<p>Later on we could force the evaluation of that lazy value, and that will take a
long time to compute, as did <code class="docutils literal notranslate"><span class="pre">fib30long</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-OCaml notranslate"><div class="highlight"><pre><span></span><span class="k">let</span> <span class="n">fib30</span> <span class="o">=</span> <span class="nn">Lazy</span><span class="p">.</span><span class="n">force</span> <span class="n">fib30lazy</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>val fib30 : int = 832040
</pre></div>
</div>
</div>
</div>
<p>But if we ever try to recompute that same lazy value, it will return
immediately, because the result has been memoized:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-OCaml notranslate"><div class="highlight"><pre><span></span><span class="k">let</span> <span class="n">fib30fast</span> <span class="o">=</span> <span class="nn">Lazy</span><span class="p">.</span><span class="n">force</span> <span class="n">fib30lazy</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>val fib30fast : int = 832040
</pre></div>
</div>
</div>
</div>
<p>Nonetheless, we still haven’t totally succeeded. That particular computation of
the 30th Fibonacci number has been memoized, but if we later define some other
computation of another it won’t be sped up the first time it’s computed:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-OCaml notranslate"><div class="highlight"><pre><span></span><span class="k">let</span> <span class="n">fib29</span> <span class="o">=</span> <span class="n">take</span> <span class="mi">29</span> <span class="n">fibs</span> <span class="o">|&gt;</span> <span class="nn">List</span><span class="p">.</span><span class="n">rev</span> <span class="o">|&gt;</span> <span class="nn">List</span><span class="p">.</span><span class="n">hd</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>val fib29 : int = 514229
</pre></div>
</div>
</div>
</div>
<p>What we really want is to change the representation of sequences itself to make
use of lazy values.</p>
<section id="lazy-sequences">
<h3><span class="section-number">8.4.4.1. </span>Lazy Sequences<a class="headerlink" href="#lazy-sequences" title="Permalink to this heading">#</a></h3>
<p>Here’s a representation for infinite lists using lazy values:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-OCaml notranslate"><div class="highlight"><pre><span></span><span class="k">type</span> <span class="k">&#39;</span><span class="n">a</span> <span class="n">lazysequence</span> <span class="o">=</span> <span class="nc">Cons</span> <span class="k">of</span> <span class="k">&#39;</span><span class="n">a</span> <span class="o">*</span> <span class="k">&#39;</span><span class="n">a</span> <span class="n">lazysequence</span> <span class="nn">Lazy</span><span class="p">.</span><span class="n">t</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>type &#39;a lazysequence = Cons of &#39;a * &#39;a lazysequence Lazy.t
</pre></div>
</div>
</div>
</div>
<p>We’ve gotten rid of the thunk, and instead are using a lazy value as the tail of
the lazy sequence. If we ever want that tail to be computed, we force it.</p>
<p>For sake of comparison, the following two modules implement the Fibonacci
sequence with sequences, then with lazy sequences. Try computing the 30th
Fibonacci number with both modules, and you’ll see that the lazy-sequence
implementation is much faster than the standard-sequence implementation.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-OCaml notranslate"><div class="highlight"><pre><span></span><span class="k">module</span> <span class="nc">SequenceFibs</span> <span class="o">=</span> <span class="k">struct</span>
  <span class="k">type</span> <span class="k">&#39;</span><span class="n">a</span> <span class="n">sequence</span> <span class="o">=</span> <span class="nc">Cons</span> <span class="k">of</span> <span class="k">&#39;</span><span class="n">a</span> <span class="o">*</span> <span class="o">(</span><span class="kt">unit</span> <span class="o">-&gt;</span> <span class="k">&#39;</span><span class="n">a</span> <span class="n">sequence</span><span class="o">)</span>

  <span class="k">let</span> <span class="n">hd</span> <span class="o">:</span> <span class="k">&#39;</span><span class="n">a</span> <span class="n">sequence</span> <span class="o">-&gt;</span> <span class="k">&#39;</span><span class="n">a</span> <span class="o">=</span>
    <span class="k">fun</span> <span class="o">(</span><span class="nc">Cons</span> <span class="o">(</span><span class="n">h</span><span class="o">,</span> <span class="o">_))</span> <span class="o">-&gt;</span> <span class="n">h</span>

  <span class="k">let</span> <span class="n">tl</span> <span class="o">:</span> <span class="k">&#39;</span><span class="n">a</span> <span class="n">sequence</span> <span class="o">-&gt;</span> <span class="k">&#39;</span><span class="n">a</span> <span class="n">sequence</span> <span class="o">=</span>
    <span class="k">fun</span> <span class="o">(</span><span class="nc">Cons</span> <span class="o">(_,</span> <span class="n">t</span><span class="o">))</span> <span class="o">-&gt;</span> <span class="n">t</span> <span class="bp">()</span>

  <span class="k">let</span> <span class="k">rec</span> <span class="n">take_aux</span> <span class="n">n</span> <span class="o">(</span><span class="nc">Cons</span> <span class="o">(</span><span class="n">h</span><span class="o">,</span> <span class="n">t</span><span class="o">))</span> <span class="n">lst</span> <span class="o">=</span>
    <span class="k">if</span> <span class="n">n</span> <span class="o">=</span> <span class="mi">0</span> <span class="k">then</span> <span class="n">lst</span>
    <span class="k">else</span> <span class="n">take_aux</span> <span class="o">(</span><span class="n">n</span> <span class="o">-</span> <span class="mi">1</span><span class="o">)</span> <span class="o">(</span><span class="n">t</span> <span class="bp">()</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">::</span> <span class="n">lst</span><span class="o">)</span>

  <span class="k">let</span> <span class="n">take</span> <span class="o">:</span> <span class="kt">int</span> <span class="o">-&gt;</span> <span class="k">&#39;</span><span class="n">a</span> <span class="n">sequence</span> <span class="o">-&gt;</span> <span class="k">&#39;</span><span class="n">a</span> <span class="kt">list</span> <span class="o">=</span>
    <span class="k">fun</span> <span class="n">n</span> <span class="n">s</span> <span class="o">-&gt;</span> <span class="nn">List</span><span class="p">.</span><span class="n">rev</span> <span class="o">(</span><span class="n">take_aux</span> <span class="n">n</span> <span class="n">s</span> <span class="bp">[]</span><span class="o">)</span>

  <span class="k">let</span> <span class="n">nth</span> <span class="o">:</span> <span class="kt">int</span> <span class="o">-&gt;</span> <span class="k">&#39;</span><span class="n">a</span> <span class="n">sequence</span> <span class="o">-&gt;</span> <span class="k">&#39;</span><span class="n">a</span> <span class="o">=</span>
    <span class="k">fun</span> <span class="n">n</span> <span class="n">s</span> <span class="o">-&gt;</span> <span class="nn">List</span><span class="p">.</span><span class="n">hd</span> <span class="o">(</span><span class="n">take_aux</span> <span class="o">(</span><span class="n">n</span> <span class="o">+</span> <span class="mi">1</span><span class="o">)</span> <span class="n">s</span> <span class="bp">[]</span><span class="o">)</span>

  <span class="k">let</span> <span class="k">rec</span> <span class="n">sum</span> <span class="o">:</span> <span class="kt">int</span> <span class="n">sequence</span> <span class="o">-&gt;</span> <span class="kt">int</span> <span class="n">sequence</span> <span class="o">-&gt;</span> <span class="kt">int</span> <span class="n">sequence</span> <span class="o">=</span>
    <span class="k">fun</span> <span class="o">(</span><span class="nc">Cons</span> <span class="o">(</span><span class="n">h_a</span><span class="o">,</span> <span class="n">t_a</span><span class="o">))</span> <span class="o">(</span><span class="nc">Cons</span> <span class="o">(</span><span class="n">h_b</span><span class="o">,</span> <span class="n">t_b</span><span class="o">))</span> <span class="o">-&gt;</span>
      <span class="nc">Cons</span> <span class="o">(</span><span class="n">h_a</span> <span class="o">+</span> <span class="n">h_b</span><span class="o">,</span> <span class="k">fun</span> <span class="bp">()</span> <span class="o">-&gt;</span> <span class="n">sum</span> <span class="o">(</span><span class="n">t_a</span> <span class="bp">()</span><span class="o">)</span> <span class="o">(</span><span class="n">t_b</span> <span class="bp">()</span><span class="o">))</span>

  <span class="k">let</span> <span class="k">rec</span> <span class="n">fibs</span> <span class="o">=</span>
    <span class="nc">Cons</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="k">fun</span> <span class="bp">()</span> <span class="o">-&gt;</span>
      <span class="nc">Cons</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="k">fun</span> <span class="bp">()</span> <span class="o">-&gt;</span>
        <span class="n">sum</span> <span class="o">(</span><span class="n">tl</span> <span class="n">fibs</span><span class="o">)</span> <span class="n">fibs</span><span class="o">))</span>

  <span class="k">let</span> <span class="n">nth_fib</span> <span class="n">n</span> <span class="o">=</span>
    <span class="n">nth</span> <span class="n">n</span> <span class="n">fibs</span>

<span class="k">end</span>

<span class="k">module</span> <span class="nc">LazyFibs</span> <span class="o">=</span> <span class="k">struct</span>

  <span class="k">type</span> <span class="k">&#39;</span><span class="n">a</span> <span class="n">lazysequence</span> <span class="o">=</span> <span class="nc">Cons</span> <span class="k">of</span> <span class="k">&#39;</span><span class="n">a</span> <span class="o">*</span> <span class="k">&#39;</span><span class="n">a</span> <span class="n">lazysequence</span> <span class="nn">Lazy</span><span class="p">.</span><span class="n">t</span>

  <span class="k">let</span> <span class="n">hd</span> <span class="o">:</span> <span class="k">&#39;</span><span class="n">a</span> <span class="n">lazysequence</span> <span class="o">-&gt;</span> <span class="k">&#39;</span><span class="n">a</span> <span class="o">=</span>
    <span class="k">fun</span> <span class="o">(</span><span class="nc">Cons</span> <span class="o">(</span><span class="n">h</span><span class="o">,</span> <span class="o">_))</span> <span class="o">-&gt;</span> <span class="n">h</span>

  <span class="k">let</span> <span class="n">tl</span> <span class="o">:</span> <span class="k">&#39;</span><span class="n">a</span> <span class="n">lazysequence</span> <span class="o">-&gt;</span> <span class="k">&#39;</span><span class="n">a</span> <span class="n">lazysequence</span> <span class="o">=</span>
    <span class="k">fun</span> <span class="o">(</span><span class="nc">Cons</span> <span class="o">(_,</span> <span class="n">t</span><span class="o">))</span> <span class="o">-&gt;</span> <span class="nn">Lazy</span><span class="p">.</span><span class="n">force</span> <span class="n">t</span>

  <span class="k">let</span> <span class="k">rec</span> <span class="n">take_aux</span> <span class="n">n</span> <span class="o">(</span><span class="nc">Cons</span> <span class="o">(</span><span class="n">h</span><span class="o">,</span> <span class="n">t</span><span class="o">))</span> <span class="n">lst</span> <span class="o">=</span>
    <span class="k">if</span> <span class="n">n</span> <span class="o">=</span> <span class="mi">0</span> <span class="k">then</span> <span class="n">lst</span> <span class="k">else</span>
      <span class="n">take_aux</span> <span class="o">(</span><span class="n">n</span> <span class="o">-</span> <span class="mi">1</span><span class="o">)</span> <span class="o">(</span><span class="nn">Lazy</span><span class="p">.</span><span class="n">force</span> <span class="n">t</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">::</span> <span class="n">lst</span><span class="o">)</span>

  <span class="k">let</span> <span class="n">take</span> <span class="o">:</span> <span class="kt">int</span> <span class="o">-&gt;</span> <span class="k">&#39;</span><span class="n">a</span> <span class="n">lazysequence</span> <span class="o">-&gt;</span> <span class="k">&#39;</span><span class="n">a</span> <span class="kt">list</span> <span class="o">=</span>
    <span class="k">fun</span> <span class="n">n</span> <span class="n">s</span> <span class="o">-&gt;</span> <span class="nn">List</span><span class="p">.</span><span class="n">rev</span> <span class="o">(</span><span class="n">take_aux</span> <span class="n">n</span> <span class="n">s</span> <span class="bp">[]</span><span class="o">)</span>

  <span class="k">let</span> <span class="n">nth</span> <span class="o">:</span> <span class="kt">int</span> <span class="o">-&gt;</span> <span class="k">&#39;</span><span class="n">a</span> <span class="n">lazysequence</span> <span class="o">-&gt;</span> <span class="k">&#39;</span><span class="n">a</span> <span class="o">=</span>
    <span class="k">fun</span> <span class="n">n</span> <span class="n">s</span> <span class="o">-&gt;</span> <span class="nn">List</span><span class="p">.</span><span class="n">hd</span> <span class="o">(</span><span class="n">take_aux</span> <span class="o">(</span><span class="n">n</span> <span class="o">+</span> <span class="mi">1</span><span class="o">)</span> <span class="n">s</span> <span class="bp">[]</span><span class="o">)</span>

  <span class="k">let</span> <span class="k">rec</span> <span class="n">sum</span> <span class="o">:</span> <span class="kt">int</span> <span class="n">lazysequence</span> <span class="o">-&gt;</span> <span class="kt">int</span> <span class="n">lazysequence</span> <span class="o">-&gt;</span> <span class="kt">int</span> <span class="n">lazysequence</span> <span class="o">=</span>
    <span class="k">fun</span> <span class="o">(</span><span class="nc">Cons</span> <span class="o">(</span><span class="n">h_a</span><span class="o">,</span> <span class="n">t_a</span><span class="o">))</span> <span class="o">(</span><span class="nc">Cons</span> <span class="o">(</span><span class="n">h_b</span><span class="o">,</span> <span class="n">t_b</span><span class="o">))</span> <span class="o">-&gt;</span>
      <span class="nc">Cons</span> <span class="o">(</span><span class="n">h_a</span> <span class="o">+</span> <span class="n">h_b</span><span class="o">,</span> <span class="k">lazy</span> <span class="o">(</span><span class="n">sum</span> <span class="o">(</span><span class="nn">Lazy</span><span class="p">.</span><span class="n">force</span> <span class="n">t_a</span><span class="o">)</span> <span class="o">(</span><span class="nn">Lazy</span><span class="p">.</span><span class="n">force</span> <span class="n">t_b</span><span class="o">)))</span>

  <span class="k">let</span> <span class="k">rec</span> <span class="n">fibs</span> <span class="o">=</span>
    <span class="nc">Cons</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="k">lazy</span> <span class="o">(</span>
      <span class="nc">Cons</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="k">lazy</span> <span class="o">(</span>
        <span class="n">sum</span> <span class="o">(</span><span class="n">tl</span> <span class="n">fibs</span><span class="o">)</span> <span class="n">fibs</span><span class="o">))))</span>

  <span class="k">let</span> <span class="n">nth_fib</span> <span class="n">n</span> <span class="o">=</span>
    <span class="n">nth</span> <span class="n">n</span> <span class="n">fibs</span>
<span class="k">end</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>module SequenceFibs :
  sig
    type &#39;a sequence = Cons of &#39;a * (unit -&gt; &#39;a sequence)
    val hd : &#39;a sequence -&gt; &#39;a
    val tl : &#39;a sequence -&gt; &#39;a sequence
    val take_aux : int -&gt; &#39;a sequence -&gt; &#39;a list -&gt; &#39;a list
    val take : int -&gt; &#39;a sequence -&gt; &#39;a list
    val nth : int -&gt; &#39;a sequence -&gt; &#39;a
    val sum : int sequence -&gt; int sequence -&gt; int sequence
    val fibs : int sequence
    val nth_fib : int -&gt; int
  end
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>module LazyFibs :
  sig
    type &#39;a lazysequence = Cons of &#39;a * &#39;a lazysequence Lazy.t
    val hd : &#39;a lazysequence -&gt; &#39;a
    val tl : &#39;a lazysequence -&gt; &#39;a lazysequence
    val take_aux : int -&gt; &#39;a lazysequence -&gt; &#39;a list -&gt; &#39;a list
    val take : int -&gt; &#39;a lazysequence -&gt; &#39;a list
    val nth : int -&gt; &#39;a lazysequence -&gt; &#39;a
    val sum : int lazysequence -&gt; int lazysequence -&gt; int lazysequence
    val fibs : int lazysequence
    val nth_fib : int -&gt; int
  end
</pre></div>
</div>
</div>
</div>
</section>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "cs3110/textbook",
            ref: "main",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "ocaml-jupyter"
        },
        kernelOptions: {
            name: "ocaml-jupyter",
            path: "./chapters/ds"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'ocaml-jupyter'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="rb.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title"><span class="section-number">8.3. </span>Red-Black Trees</p>
      </div>
    </a>
    <a class="right-next"
       href="memoization.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title"><span class="section-number">8.5. </span>Memoization</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#how-not-to-define-a-sequence">8.4.1. How Not to Define a Sequence</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#how-to-correctly-define-a-sequence">8.4.2. How to Correctly Define a Sequence</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#programming-with-sequences">8.4.3. Programming with Sequences</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#laziness">8.4.4. Laziness</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#lazy-sequences">8.4.4.1. Lazy Sequences</a></li>
</ul>
</li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Michael R. Clarkson et al.
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2024.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../_static/scripts/bootstrap.js?digest=bd9e20870c6007c4c509"></script>
<script src="../../_static/scripts/pydata-sphinx-theme.js?digest=bd9e20870c6007c4c509"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>