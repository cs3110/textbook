

<!DOCTYPE html>


<html lang="en" data-content_root="" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>9.8. Exercises &#8212; OCaml Programming: Correct + Efficient + Beautiful</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=bd9e20870c6007c4c509" rel="stylesheet" />
<link href="../../_static/styles/bootstrap.css?digest=bd9e20870c6007c4c509" rel="stylesheet" />
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=bd9e20870c6007c4c509" rel="stylesheet" />

  
  <link href="../../_static/vendor/fontawesome/6.5.1/css/all.min.css?digest=bd9e20870c6007c4c509" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.5.1/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.5.1/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.5.1/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" href="../../_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/custom.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/bootstrap.js?digest=bd9e20870c6007c4c509" />
<link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=bd9e20870c6007c4c509" />
  <script src="../../_static/vendor/fontawesome/6.5.1/js/all.min.js?digest=bd9e20870c6007c4c509"></script>

    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <script src="../../_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../../_static/togglebutton.js"></script>
    <script async="async" kind="hypothesis" src="https://hypothes.is/embed.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../../_static/sphinx-thebe.js"></script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'chapters/ds/exercises';</script>
    <link rel="shortcut icon" href="../../_static/op.png"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="10. Interpreters" href="../interp/intro.html" />
    <link rel="prev" title="9.7. Summary" href="summary.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a id="pst-skip-link" class="skip-link" href="#main-content">Skip to main content</a>
  
  <div id="pst-scroll-pixel-helper"></div>

  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>
    Back to top
  </button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <header>


  <div class="bd-header-announcement container-fluid bd-header-announcement">
    <div class="bd-header-announcement__content">Using this book as part of a course? Please <a style="color:white" href="https://docs.google.com/forms/d/e/1FAIpQLSfEW65AJPBnk732zZZM9CFpWMobWUkym6Nf-pgslRqqwoWYIA/viewform?usp=preview">let us know</a>!</div>
  </div>

  
    <div class="bd-header navbar navbar-expand-lg bd-navbar">
    </div>
  
  </header>

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
        
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  

<a class="navbar-brand logo" href="../../cover.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../../_static/op_title.png" class="logo__image only-light" alt="OCaml Programming: Correct + Efficient + Beautiful - Home"/>
    <script>document.write(`<img src="../../_static/op_title.png" class="logo__image only-dark" alt="OCaml Programming: Correct + Efficient + Beautiful - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Preface</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../preface/about.html">About This Book</a></li>
<li class="toctree-l1"><a class="reference internal" href="../preface/install.html">Installing OCaml</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Introduction</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../intro/intro.html">1. Better Programming Through OCaml</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-1"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../intro/past.html">1.1. The Past of OCaml</a></li>
<li class="toctree-l2"><a class="reference internal" href="../intro/present.html">1.2. The Present of OCaml</a></li>
<li class="toctree-l2"><a class="reference internal" href="../intro/future.html">1.3. Look to Your Future</a></li>
<li class="toctree-l2"><a class="reference internal" href="../intro/3110.html">1.4. A Brief History of CS 3110</a></li>
<li class="toctree-l2"><a class="reference internal" href="../intro/summary.html">1.5. Summary</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../basics/intro.html">2. The Basics of OCaml</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-2"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../basics/toplevel.html">2.1. The OCaml Toplevel</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basics/compiling.html">2.2. Compiling OCaml Programs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basics/expressions.html">2.3. Expressions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basics/functions.html">2.4. Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basics/documentation.html">2.5. Documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basics/printing.html">2.6. Printing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basics/debugging.html">2.7. Debugging</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basics/summary.html">2.8. Summary</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basics/exercises.html">2.9. Exercises</a></li>
</ul>
</li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">OCaml Programming</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../data/intro.html">3. Data and Types</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-3"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../data/lists.html">3.1. Lists</a></li>
<li class="toctree-l2"><a class="reference internal" href="../data/variants.html">3.2. Variants</a></li>
<li class="toctree-l2"><a class="reference internal" href="../data/ounit.html">3.3. Unit Testing with OUnit</a></li>
<li class="toctree-l2"><a class="reference internal" href="../data/records_tuples.html">3.4. Records and Tuples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../data/pattern_matching_advanced.html">3.5. Advanced Pattern Matching</a></li>
<li class="toctree-l2"><a class="reference internal" href="../data/type_synonym.html">3.6. Type Synonyms</a></li>
<li class="toctree-l2"><a class="reference internal" href="../data/options.html">3.7. Options</a></li>
<li class="toctree-l2"><a class="reference internal" href="../data/assoc_list.html">3.8. Association Lists</a></li>
<li class="toctree-l2"><a class="reference internal" href="../data/algebraic_data_types.html">3.9. Algebraic Data Types</a></li>
<li class="toctree-l2"><a class="reference internal" href="../data/exceptions.html">3.10. Exceptions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../data/trees.html">3.11. Example: Trees</a></li>
<li class="toctree-l2"><a class="reference internal" href="../data/nats.html">3.12. Example: Natural Numbers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../data/summary.html">3.13. Summary</a></li>
<li class="toctree-l2"><a class="reference internal" href="../data/exercises.html">3.14. Exercises</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../hop/intro.html">4. Higher-Order Programming</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-4"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../hop/higher_order.html">4.1. Higher-Order Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../hop/map.html">4.2. Map</a></li>
<li class="toctree-l2"><a class="reference internal" href="../hop/filter.html">4.3. Filter</a></li>
<li class="toctree-l2"><a class="reference internal" href="../hop/fold.html">4.4. Fold</a></li>
<li class="toctree-l2"><a class="reference internal" href="../hop/beyond_lists.html">4.5. Beyond Lists</a></li>
<li class="toctree-l2"><a class="reference internal" href="../hop/pipelining.html">4.6. Pipelining</a></li>
<li class="toctree-l2"><a class="reference internal" href="../hop/currying.html">4.7. Currying</a></li>
<li class="toctree-l2"><a class="reference internal" href="../hop/summary.html">4.8. Summary</a></li>
<li class="toctree-l2"><a class="reference internal" href="../hop/exercises.html">4.9. Exercises</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../modules/intro.html">5. Modular Programming</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-5"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../modules/module_systems.html">5.1. Module Systems</a></li>
<li class="toctree-l2"><a class="reference internal" href="../modules/modules.html">5.2. Modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="../modules/toplevel.html">5.3. Modules and the Toplevel</a></li>
<li class="toctree-l2"><a class="reference internal" href="../modules/encapsulation.html">5.4. Encapsulation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../modules/compilation_units.html">5.5. Compilation Units</a></li>
<li class="toctree-l2"><a class="reference internal" href="../modules/functional_data_structures.html">5.6. Functional Data Structures</a></li>
<li class="toctree-l2"><a class="reference internal" href="../modules/module_type_constraints.html">5.7. Module Type Constraints</a></li>
<li class="toctree-l2"><a class="reference internal" href="../modules/includes.html">5.8. Includes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../modules/functors.html">5.9. Functors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../modules/summary.html">5.10. Summary</a></li>
<li class="toctree-l2"><a class="reference internal" href="../modules/exercises.html">5.11. Exercises</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../mut/intro.html">6. Mutability</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-6"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../mut/refs.html">6.1. Refs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mut/mutable_fields.html">6.2. Mutable Fields</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mut/arrays.html">6.3. Arrays and Loops</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mut/summary.html">6.4. Summary</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mut/exercises.html">6.5. Exercises</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../conc/intro.html">7. Concurrency</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-7"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../conc/concurrency.html">7.1. Concurrency</a></li>
<li class="toctree-l2"><a class="reference internal" href="../conc/promises.html">7.2. Promises</a></li>
<li class="toctree-l2"><a class="reference internal" href="../conc/impl_promises.html">7.3. Implementing Promises</a></li>
<li class="toctree-l2"><a class="reference internal" href="../conc/io_promises.html">7.4. Asynchronous Input and Output</a></li>
<li class="toctree-l2"><a class="reference internal" href="../conc/callbacks.html">7.5. Callbacks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../conc/full_promises_impl.html">7.6. The Full Promises Implementation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../conc/monads.html">7.7. Monads</a></li>
<li class="toctree-l2"><a class="reference internal" href="../conc/summary.html">7.8. Summary</a></li>
<li class="toctree-l2"><a class="reference internal" href="../conc/exercises.html">7.9. Exercises</a></li>
</ul>
</li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Correctness and Efficiency</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../correctness/intro.html">8. Correctness</a><input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-8"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../correctness/specifications.html">8.1. Specifications</a></li>
<li class="toctree-l2"><a class="reference internal" href="../correctness/function_docs.html">8.2. Function Documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../correctness/module_docs.html">8.3. Module Documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../correctness/test_debug.html">8.4. Testing and Debugging</a></li>
<li class="toctree-l2"><a class="reference internal" href="../correctness/black_glass_box.html">8.5. Black-box and Glass-box Testing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../correctness/randomized.html">8.6. Randomized Testing with QCheck</a></li>
<li class="toctree-l2"><a class="reference internal" href="../correctness/proving_correctness.html">8.7. Proving Correctness</a></li>
<li class="toctree-l2"><a class="reference internal" href="../correctness/structural_induction.html">8.8. Structural Induction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../correctness/eq_spec.html">8.9. Equational Specification</a></li>
<li class="toctree-l2"><a class="reference internal" href="../correctness/summary.html">8.10. Summary</a></li>
<li class="toctree-l2"><a class="reference internal" href="../correctness/exercises.html">8.11. Exercises</a></li>
</ul>
</li>
<li class="toctree-l1 current active has-children"><a class="reference internal" href="intro.html">9. Data Structures</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-9"><i class="fa-solid fa-chevron-down"></i></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="hash_tables.html">9.1. Hash Tables</a></li>
<li class="toctree-l2"><a class="reference internal" href="amortized.html">9.2. Amortized Analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="rb.html">9.3. Red-Black Trees</a></li>
<li class="toctree-l2"><a class="reference internal" href="sequence.html">9.4. Sequences</a></li>
<li class="toctree-l2"><a class="reference internal" href="memoization.html">9.5. Memoization</a></li>
<li class="toctree-l2"><a class="reference internal" href="parrays.html">9.6. Persistent Arrays</a></li>
<li class="toctree-l2"><a class="reference internal" href="summary.html">9.7. Summary</a></li>
<li class="toctree-l2 current active"><a class="current reference internal" href="#">9.8. Exercises</a></li>
</ul>
</li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Language Implementation</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../interp/intro.html">10. Interpreters</a><input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-10"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../interp/calculator.html">10.1. Example: Calculator</a></li>
<li class="toctree-l2"><a class="reference internal" href="../interp/parsing.html">10.2. Parsing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../interp/substitution.html">10.3. Substitution Model</a></li>
<li class="toctree-l2"><a class="reference internal" href="../interp/environment.html">10.4. Environment Model</a></li>
<li class="toctree-l2"><a class="reference internal" href="../interp/typecheck.html">10.5. Type Checking</a></li>
<li class="toctree-l2"><a class="reference internal" href="../interp/inference.html">10.6. Type Inference</a></li>
<li class="toctree-l2"><a class="reference internal" href="../interp/summary.html">10.7. Summary</a></li>
<li class="toctree-l2"><a class="reference internal" href="../interp/exercises.html">10.8. Exercises</a></li>
</ul>
</li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Lagniappe</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../adv/curry-howard.html">The Curry-Howard Correspondence</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Appendix</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../appendix/bigoh.html">Big-Oh Notation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../appendix/vm.html">Virtual Machine</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/cs3110/textbook" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/cs3110/textbook/edit/main/src/chapters/ds/exercises.md" target="_blank"
   class="btn btn-sm btn-source-edit-button dropdown-item"
   title="Suggest edit"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-pencil-alt"></i>
  </span>
<span class="btn__text-container">Suggest edit</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/cs3110/textbook/issues/new?title=Issue%20on%20page%20%2Fchapters/ds/exercises.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../../_sources/chapters/ds/exercises.md" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>

</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Exercises</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="exercises">
<h1><span class="section-number">9.8. </span>Exercises<a class="headerlink" href="#exercises" title="Permalink to this heading">#</a></h1>
<p>Solutions to most exercises are <a href="https://github.com/cs3110/textbook-solutions">available</a>.
We are happy to add or correct solutions. Please make contributions through GitHub.</p>
<!--------------------------------------------------------------------------->
<hr class="docutils" />
<p><strong>Exercise: hash insert [★★]</strong></p>
<p>Suppose we have a hash table on integer keys. The table currently has 7
empty buckets, and the hash function is simply <code class="docutils literal notranslate"><span class="pre">let</span> <span class="pre">hash</span> <span class="pre">k</span> <span class="pre">=</span> <span class="pre">k</span> <span class="pre">mod</span> <span class="pre">7</span></code>.
Draw the hash table that results from inserting the keys 4, 8, 15, 16,
23, and 42 (with whatever values you like).</p>
<!--------------------------------------------------------------------------->
<hr class="docutils" />
<p><strong>Exercise: relax bucket RI [★★]</strong></p>
<p>We required that hash table buckets must not contain duplicates. What would
happen if we relaxed this RI to allow duplicates? Would the efficiency of any
operations (insert, find, or remove) change?</p>
<!--------------------------------------------------------------------------->
<hr class="docutils" />
<p><strong>Exercise: strengthen bucket RI [★★]</strong></p>
<p>What would happen if we strengthened the bucket RI to require each bucket to be
sorted by the key? Would the efficiency of any operations (insert, find, or
remove) change?</p>
<!--------------------------------------------------------------------------->
<hr class="docutils" />
<p><strong>Exercise: hash values [★★]</strong></p>
<p>Use <code class="docutils literal notranslate"><span class="pre">Hashtbl.hash</span> <span class="pre">:</span> <span class="pre">'a</span> <span class="pre">-&gt;</span> <span class="pre">int</span></code> to hash several values of different types. Make
sure to try at least <code class="docutils literal notranslate"><span class="pre">()</span></code>, <code class="docutils literal notranslate"><span class="pre">false</span></code>, <code class="docutils literal notranslate"><span class="pre">true</span></code>, <code class="docutils literal notranslate"><span class="pre">0</span></code>, <code class="docutils literal notranslate"><span class="pre">1</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;&quot;</span></code>, and <code class="docutils literal notranslate"><span class="pre">[]</span></code>, as well as
several “larger” values of each type. We saw that lists quickly can create
collisions. Try creating binary trees and finding a collision.</p>
<!--------------------------------------------------------------------------->
<hr class="docutils" />
<p><strong>Exercise: hashtbl usage [★★]</strong></p>
<p>Create a hash table <code class="docutils literal notranslate"><span class="pre">tab</span></code> with <code class="docutils literal notranslate"><span class="pre">Hashtbl.create</span></code> whose initial size is 16. Add 31
bindings to it with <code class="docutils literal notranslate"><span class="pre">Hashtbl.add</span></code>. For example, you could add the numbers 1..31
as keys and the strings “1”..”31” as their values. Use <code class="docutils literal notranslate"><span class="pre">Hashtbl.find</span></code> to look
for keys that are in <code class="docutils literal notranslate"><span class="pre">tab</span></code>, as well as keys that are not.</p>
<!--------------------------------------------------------------------------->
<hr class="docutils" />
<p><strong>Exercise: hashtbl stats [★]</strong></p>
<p>Use the <code class="docutils literal notranslate"><span class="pre">Hashtbl.stats</span></code> function to find out the statistics of <code class="docutils literal notranslate"><span class="pre">tab</span></code> (from an
exercise above). How many buckets are in the table? How many buckets have a
single binding in them?</p>
<!--------------------------------------------------------------------------->
<hr class="docutils" />
<p><strong>Exercise: hashtbl bindings [★★]</strong></p>
<p>Define a function <code class="docutils literal notranslate"><span class="pre">bindings</span> <span class="pre">:</span> <span class="pre">('a,'b)</span> <span class="pre">Hashtbl.t</span> <span class="pre">-&gt;</span> <span class="pre">('a*'b)</span> <span class="pre">list</span></code>, such that
<code class="docutils literal notranslate"><span class="pre">bindings</span> <span class="pre">h</span></code> returns a list of all bindings in <code class="docutils literal notranslate"><span class="pre">h</span></code>. Use your function to see all
the bindings in <code class="docutils literal notranslate"><span class="pre">tab</span></code> (from an exercise above). <em>Hint: fold.</em></p>
<!--------------------------------------------------------------------------->
<hr class="docutils" />
<p><strong>Exercise: hashtbl load factor [★★]</strong></p>
<p>Define a function <code class="docutils literal notranslate"><span class="pre">load_factor</span> <span class="pre">:</span> <span class="pre">('a,'b)</span> <span class="pre">Hashtbl.t</span> <span class="pre">-&gt;</span> <span class="pre">float</span></code>, such that
<code class="docutils literal notranslate"><span class="pre">load_factor</span> <span class="pre">h</span></code> is the load factor of <code class="docutils literal notranslate"><span class="pre">h</span></code>. What is the load factor of <code class="docutils literal notranslate"><span class="pre">tab</span></code>?
<em>Hint: stats.</em></p>
<p>Add one more binding to <code class="docutils literal notranslate"><span class="pre">tab</span></code>. Do the stats or load factor change? Now add yet
another binding. Now do the stats or load factor change? <em>Hint: <code class="docutils literal notranslate"><span class="pre">Hashtbl</span></code>
resizes when the load factor goes strictly above 2.</em></p>
<!--------------------------------------------------------------------------->
<hr class="docutils" />
<p><strong>Exercise: functorial interface [★★★]</strong></p>
<p>Use the functorial interface (i.e., <code class="docutils literal notranslate"><span class="pre">Hashtbl.Make</span></code>) to create a hash table whose
keys are strings that are case-insensitive. Be careful to obey the specification
of <code class="docutils literal notranslate"><span class="pre">Hashtbl.HashedType.hash</span></code>:</p>
<blockquote>
<div><p>If two keys are equal according to <code class="docutils literal notranslate"><span class="pre">equal</span></code>, then they have identical hash
values as computed by <code class="docutils literal notranslate"><span class="pre">hash</span></code>.</p>
</div></blockquote>
<!--------------------------------------------------------------------------->
<hr class="docutils" />
<p><strong>Exercise: equals and hash [★★]</strong></p>
<p>The previous exercise quoted the specification of <code class="docutils literal notranslate"><span class="pre">Hashtbl.HashedType.hash</span></code>.
Compare that to Java’s <code class="docutils literal notranslate"><span class="pre">Object.hashCode()</span></code> <a class="reference external" href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#hashCode--">specification</a>. Why do
they both have this similar requirement?</p>
<!--------------------------------------------------------------------------->
<hr class="docutils" />
<p><strong>Exercise: bad hash [★★]</strong></p>
<p>Use the functorial interface to create a hash table with a really bad hash
function (e.g., a constant function). Use the <code class="docutils literal notranslate"><span class="pre">stats</span></code> function to see how bad
the bucket distribution becomes.</p>
<!--------------------------------------------------------------------------->
<hr class="docutils" />
<p><strong>Exercise: linear probing [★★★★]</strong></p>
<p>We briefly mentioned <em>probing</em> as an alternative to <em>chaining</em>. Probing can be
effectively used in hardware implementations of hash tables, as well as in
databases. With probing, every bucket contains exactly one binding. In case of a
collision, we search forward through the array, as described below.</p>
<p><strong>Your task:</strong> Implement a hash table that uses linear probing. The details are
below.</p>
<p><strong>Find.</strong> Suppose we are trying to find a binding in the table. We hash the
binding’s key and look in the appropriate bucket. If there is already a
different key in that bucket, we start searching forward through the array at
the next bucket, then the next bucket, and so forth, wrapping back around to the
beginning of the array if necessary. Eventually we will either</p>
<ul class="simple">
<li><p>find an empty bucket, in which case the key we’re searching for is not bound
in the table;</p></li>
<li><p>find the key before we reach an empty bucket, in which case we can return the
value; or</p></li>
<li><p>never find the key or an empty bucket, instead wrapping back around to the
original bucket, in which case all buckets are full and the key is not bound
in the table. This case actually should never occur, because we won’t allow
the load factor to get high enough for all buckets to be filled.</p></li>
</ul>
<p><strong>Insert.</strong> Insertion follows the same algorithm as finding a key, except that
whenever we first find an empty bucket, we can insert the binding there.</p>
<p><strong>Remove.</strong> Removal is more difficult. Once the key is found, we can’t just make
the bucket empty, because that would affect future searches by causing them to
stop early. Instead, we can introduce a special “deleted” value into that bucket
to indicate that the bucket does not contain a binding but the searches should
not stop at it.</p>
<p><strong>Resizing.</strong> Since we never want the array to become completely full, we can
keep the load factor near 1/4. When the load factor exceeds 1/2, we can double
the array, bringing the load factor back to 1/4. When the load factor goes below
1/8, we can half the array, again bringing the load factor back to 1/4.
“Deleted” bindings complicate the definition of load factor:</p>
<ul class="simple">
<li><p>When determining whether to double the table size, we calculate the load
factor as (# of bindings + # of deleted bindings) / (# of buckets). That is,
deleted bindings contribute toward increasing the load factor.</p></li>
<li><p>When determining whether the half the table size, we calculate the load factor
as (# of bindings) / (# buckets). That is, deleted bindings do not count
toward increasing the load factor.</p></li>
</ul>
<p>When rehashing the table, deleted bindings are of course not re-inserted into
the new table.</p>
<!--------------------------------------------------------------------------->
<hr class="docutils" />
<p><strong>Exercise: functorized BST [★★★]</strong></p>
<p>Our implementation of BSTs assumed that it was okay to compare values using the
built-in comparison operators <code class="docutils literal notranslate"><span class="pre">&lt;</span></code>, <code class="docutils literal notranslate"><span class="pre">=</span></code>, and <code class="docutils literal notranslate"><span class="pre">&gt;</span></code>. But what if the client wanted
to use their own comparison operators? (e.g., to ignore case in strings, or to
have sets of records where only a single field of the record was used for
ordering.) Implement a <code class="docutils literal notranslate"><span class="pre">BstSet</span></code> abstraction as a functor parameterized on a
structure that enables client-provided comparison operator(s), much like the
<a class="reference external" href="https://ocaml.org/api/Set.html">standard library <code class="docutils literal notranslate"><span class="pre">Set</span></code></a>.</p>
<!--------------------------------------------------------------------------->
<hr class="docutils" />
<p><strong>Exercise: efficient traversal [★★★]</strong></p>
<p>Suppose you wanted to convert a tree to a list. You’d have to put the values
stored in the tree in some order. Here are three ways of doing that:</p>
<ul class="simple">
<li><p><em>preorder</em>: each node’s value appears in the list before the values of its
left then right subtrees.</p></li>
<li><p><em>inorder</em>: the values of the left subtree appear, then the value at the node,
then the values of the right subtree.</p></li>
<li><p><em>postorder</em>: the values of a node’s left then right subtrees appear, followed
by the value at the node.</p></li>
</ul>
<p>Here is code that implements those <em>traversals</em>, along with some example
applications:</p>
<div class="highlight-ocaml notranslate"><div class="highlight"><pre><span></span><span class="k">type</span> <span class="k">&#39;</span><span class="n">a</span> <span class="n">tree</span> <span class="o">=</span> <span class="nc">Leaf</span> <span class="o">|</span> <span class="nc">Node</span> <span class="k">of</span> <span class="k">&#39;</span><span class="n">a</span> <span class="n">tree</span> <span class="o">*</span> <span class="k">&#39;</span><span class="n">a</span> <span class="o">*</span> <span class="k">&#39;</span><span class="n">a</span> <span class="n">tree</span>

<span class="k">let</span> <span class="k">rec</span> <span class="n">preorder</span> <span class="o">=</span> <span class="k">function</span>
  <span class="o">|</span> <span class="nc">Leaf</span> <span class="o">-&gt;</span> <span class="bp">[]</span>
  <span class="o">|</span> <span class="nc">Node</span> <span class="o">(</span><span class="n">l</span><span class="o">,</span><span class="n">v</span><span class="o">,</span><span class="n">r</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="o">[</span><span class="n">v</span><span class="o">]</span> <span class="o">@</span> <span class="n">preorder</span> <span class="n">l</span> <span class="o">@</span> <span class="n">preorder</span> <span class="n">r</span>

<span class="k">let</span> <span class="k">rec</span> <span class="n">inorder</span> <span class="o">=</span> <span class="k">function</span>
  <span class="o">|</span> <span class="nc">Leaf</span> <span class="o">-&gt;</span> <span class="bp">[]</span>
  <span class="o">|</span> <span class="nc">Node</span> <span class="o">(</span><span class="n">l</span><span class="o">,</span><span class="n">v</span><span class="o">,</span><span class="n">r</span><span class="o">)</span> <span class="o">-&gt;</span>  <span class="n">inorder</span> <span class="n">l</span> <span class="o">@</span> <span class="o">[</span><span class="n">v</span><span class="o">]</span> <span class="o">@</span> <span class="n">inorder</span> <span class="n">r</span>

<span class="k">let</span> <span class="k">rec</span> <span class="n">postorder</span> <span class="o">=</span> <span class="k">function</span>
  <span class="o">|</span> <span class="nc">Leaf</span> <span class="o">-&gt;</span> <span class="bp">[]</span>
  <span class="o">|</span> <span class="nc">Node</span> <span class="o">(</span><span class="n">l</span><span class="o">,</span><span class="n">v</span><span class="o">,</span><span class="n">r</span><span class="o">)</span> <span class="o">-&gt;</span>  <span class="n">postorder</span> <span class="n">l</span> <span class="o">@</span> <span class="n">postorder</span> <span class="n">r</span> <span class="o">@</span> <span class="o">[</span><span class="n">v</span><span class="o">]</span>

<span class="k">let</span> <span class="n">t</span> <span class="o">=</span>
  <span class="nc">Node</span><span class="o">(</span><span class="nc">Node</span><span class="o">(</span><span class="nc">Node</span><span class="o">(</span><span class="nc">Leaf</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="nc">Leaf</span><span class="o">),</span> <span class="mi">2</span><span class="o">,</span> <span class="nc">Node</span><span class="o">(</span><span class="nc">Leaf</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="nc">Leaf</span><span class="o">)),</span>
       <span class="mi">4</span><span class="o">,</span>
       <span class="nc">Node</span><span class="o">(</span><span class="nc">Node</span><span class="o">(</span><span class="nc">Leaf</span><span class="o">,</span> <span class="mi">5</span><span class="o">,</span> <span class="nc">Leaf</span><span class="o">),</span> <span class="mi">6</span><span class="o">,</span> <span class="nc">Node</span><span class="o">(</span><span class="nc">Leaf</span><span class="o">,</span> <span class="mi">7</span><span class="o">,</span> <span class="nc">Leaf</span><span class="o">)))</span>

<span class="c">(*</span>
<span class="c">  t is</span>
<span class="c">        4</span>
<span class="c">      /   \</span>
<span class="c">     2     6</span>
<span class="c">    / \   / \</span>
<span class="c">   1   3 5   7</span>
<span class="c">*)</span>

<span class="k">let</span> <span class="bp">()</span> <span class="o">=</span> <span class="k">assert</span> <span class="o">(</span><span class="n">preorder</span> <span class="n">t</span>  <span class="o">=</span> <span class="o">[</span><span class="mi">4</span><span class="o">;</span><span class="mi">2</span><span class="o">;</span><span class="mi">1</span><span class="o">;</span><span class="mi">3</span><span class="o">;</span><span class="mi">6</span><span class="o">;</span><span class="mi">5</span><span class="o">;</span><span class="mi">7</span><span class="o">])</span>
<span class="k">let</span> <span class="bp">()</span> <span class="o">=</span> <span class="k">assert</span> <span class="o">(</span><span class="n">inorder</span> <span class="n">t</span>   <span class="o">=</span> <span class="o">[</span><span class="mi">1</span><span class="o">;</span><span class="mi">2</span><span class="o">;</span><span class="mi">3</span><span class="o">;</span><span class="mi">4</span><span class="o">;</span><span class="mi">5</span><span class="o">;</span><span class="mi">6</span><span class="o">;</span><span class="mi">7</span><span class="o">])</span>
<span class="k">let</span> <span class="bp">()</span> <span class="o">=</span> <span class="k">assert</span> <span class="o">(</span><span class="n">postorder</span> <span class="n">t</span> <span class="o">=</span> <span class="o">[</span><span class="mi">1</span><span class="o">;</span><span class="mi">3</span><span class="o">;</span><span class="mi">2</span><span class="o">;</span><span class="mi">5</span><span class="o">;</span><span class="mi">7</span><span class="o">;</span><span class="mi">6</span><span class="o">;</span><span class="mi">4</span><span class="o">])</span>
</pre></div>
</div>
<p>On unbalanced trees, the traversal functions above require quadratic worst-case
time (in the number of nodes), because of the <code class="docutils literal notranslate"><span class="pre">&#64;</span></code> operator. Re-implement the
functions without <code class="docutils literal notranslate"><span class="pre">&#64;</span></code>, and instead using <code class="docutils literal notranslate"><span class="pre">::</span></code>, such that they perform exactly
one cons per <code class="docutils literal notranslate"><span class="pre">Node</span></code> in the tree. Thus, the worst-case execution time will be
linear. You will need to add an additional accumulator argument to each
function, much like with tail recursion. (But your implementations won’t
actually be tail recursive.)</p>
<!--------------------------------------------------------------------------->
<hr class="docutils" />
<p><strong>Exercise: RB draw complete [★★]</strong></p>
<p>Draw the perfect binary tree on the values 1, 2, …, 15. Color the nodes in
three different ways such that (i) each way is a red-black tree (i.e., satisfies
the red-black invariants), and (ii) the three ways create trees with black
heights of 2, 3, and 4, respectively. Recall that the <em>black height</em> of a tree
is the maximum number of black nodes along any path from its root to a leaf.</p>
<!--------------------------------------------------------------------------->
<hr class="docutils" />
<p><strong>Exercise: RB draw insert [★★]</strong></p>
<p>Draw the red-black tree that results from inserting the characters D A T A S T R
U C T U R E into an empty tree. Carry out the insertion algorithm yourself by
hand, then check your work with the implementation provided in the book.</p>
<!--------------------------------------------------------------------------->
<hr class="docutils" />
<p><strong>Exercise: pow2 [★★]</strong></p>
<p>Using this type:</p>
<div class="highlight-ocaml notranslate"><div class="highlight"><pre><span></span><span class="k">type</span> <span class="k">&#39;</span><span class="n">a</span> <span class="n">sequence</span> <span class="o">=</span> <span class="nc">Cons</span> <span class="k">of</span> <span class="k">&#39;</span><span class="n">a</span> <span class="o">*</span> <span class="o">(</span><span class="kt">unit</span> <span class="o">-&gt;</span> <span class="k">&#39;</span><span class="n">a</span> <span class="n">sequence</span><span class="o">)</span>
</pre></div>
</div>
<p>Define a value <code class="docutils literal notranslate"><span class="pre">pow2</span> <span class="pre">:</span> <span class="pre">int</span> <span class="pre">sequence</span></code> whose elements are the powers of two:
<code class="docutils literal notranslate"><span class="pre">&lt;1;</span> <span class="pre">2;</span> <span class="pre">4;</span> <span class="pre">8;</span> <span class="pre">16,</span> <span class="pre">...&gt;</span></code>.</p>
<!--------------------------------------------------------------------------->
<hr class="docutils" />
<p><strong>Exercise: more sequences [★★]</strong></p>
<p>Define the following sequences:</p>
<ul class="simple">
<li><p>the even naturals</p></li>
<li><p>the lower-case alphabet on endless repeat:  a, b, c, …, z, a, b, …</p></li>
<li><p>unending pseudorandom coin flips (e.g., booleans or a variant with <code class="docutils literal notranslate"><span class="pre">Heads</span></code>
and <code class="docutils literal notranslate"><span class="pre">Tails</span></code> constructors)</p></li>
</ul>
<!--------------------------------------------------------------------------->
<hr class="docutils" />
<p><strong>Exercise: nth [★★]</strong></p>
<p>Define a function <code class="docutils literal notranslate"><span class="pre">nth</span> <span class="pre">:</span> <span class="pre">'a</span> <span class="pre">sequence</span> <span class="pre">-&gt;</span> <span class="pre">int</span> <span class="pre">-&gt;</span> <span class="pre">'a</span></code>, such that
<code class="docutils literal notranslate"><span class="pre">nth</span> <span class="pre">s</span> <span class="pre">n</span></code> the element at zero-based position <code class="docutils literal notranslate"><span class="pre">n</span></code> in sequence <code class="docutils literal notranslate"><span class="pre">s</span></code>.
For example, <code class="docutils literal notranslate"><span class="pre">nth</span> <span class="pre">pow2</span> <span class="pre">0</span> <span class="pre">=</span> <span class="pre">1</span></code>, and <code class="docutils literal notranslate"><span class="pre">nth</span> <span class="pre">pow2</span> <span class="pre">4</span> <span class="pre">=</span> <span class="pre">16</span></code>.</p>
<!--------------------------------------------------------------------------->
<hr class="docutils" />
<p><strong>Exercise: hd tl [★★]</strong></p>
<p>Explain how each of the following sequence expressions is evaluated:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">hd</span> <span class="pre">nats</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">tl</span> <span class="pre">nats</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">hd</span> <span class="pre">(tl</span> <span class="pre">nats)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">tl</span> <span class="pre">(tl</span> <span class="pre">nats)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">hd</span> <span class="pre">(tl</span> <span class="pre">(tl</span> <span class="pre">nats))</span></code></p></li>
</ul>
<!--------------------------------------------------------------------------->
<hr class="docutils" />
<p><strong>Exercise: filter [★★★]</strong></p>
<p>Define a function <code class="docutils literal notranslate"><span class="pre">filter</span> <span class="pre">:</span> <span class="pre">('a</span> <span class="pre">-&gt;</span> <span class="pre">bool)</span> <span class="pre">-&gt;</span> <span class="pre">'a</span> <span class="pre">sequence</span> <span class="pre">-&gt;</span> <span class="pre">'a</span> <span class="pre">sequence</span></code>, such
that <code class="docutils literal notranslate"><span class="pre">filter</span> <span class="pre">p</span> <span class="pre">s</span></code> is the sub-sequence of <code class="docutils literal notranslate"><span class="pre">s</span></code> whose elements satisfy the
predicate <code class="docutils literal notranslate"><span class="pre">p</span></code>. For example, <code class="docutils literal notranslate"><span class="pre">filter</span> <span class="pre">(fun</span> <span class="pre">n</span> <span class="pre">-&gt;</span> <span class="pre">n</span> <span class="pre">mod</span> <span class="pre">2</span> <span class="pre">=</span> <span class="pre">0)</span> <span class="pre">nats</span></code> would be the
sequence <code class="docutils literal notranslate"><span class="pre">&lt;0;</span> <span class="pre">2;</span> <span class="pre">4;</span> <span class="pre">6;</span> <span class="pre">8;</span> <span class="pre">10;</span> <span class="pre">...&gt;</span></code>. If there is no element of <code class="docutils literal notranslate"><span class="pre">s</span></code> that
satisfies <code class="docutils literal notranslate"><span class="pre">p</span></code>, then <code class="docutils literal notranslate"><span class="pre">filter</span> <span class="pre">p</span> <span class="pre">s</span></code> does not terminate.</p>
<!--------------------------------------------------------------------------->
<hr class="docutils" />
<p><strong>Exercise: interleave [★★★]</strong></p>
<p>Define a function <code class="docutils literal notranslate"><span class="pre">interleave</span> <span class="pre">:</span> <span class="pre">'a</span> <span class="pre">sequence</span> <span class="pre">-&gt;</span> <span class="pre">'a</span> <span class="pre">sequence</span> <span class="pre">-&gt;</span> <span class="pre">'a</span> <span class="pre">sequence</span></code>, such
that <code class="docutils literal notranslate"><span class="pre">interleave</span> <span class="pre">&lt;a1;</span> <span class="pre">a2;</span> <span class="pre">a3;</span> <span class="pre">...&gt;</span> <span class="pre">&lt;b1;</span> <span class="pre">b2;</span> <span class="pre">b3;</span> <span class="pre">...&gt;</span></code> is the sequence
<code class="docutils literal notranslate"><span class="pre">&lt;a1;</span> <span class="pre">b1;</span> <span class="pre">a2;</span> <span class="pre">b2;</span> <span class="pre">a3;</span> <span class="pre">b3;</span> <span class="pre">...&gt;</span></code>. For example, <code class="docutils literal notranslate"><span class="pre">interleave</span> <span class="pre">nats</span> <span class="pre">pow2</span></code> would be
<code class="docutils literal notranslate"><span class="pre">&lt;0;</span> <span class="pre">1;</span> <span class="pre">1;</span> <span class="pre">2;</span> <span class="pre">2;</span> <span class="pre">4;</span> <span class="pre">3;</span> <span class="pre">8;</span> <span class="pre">...&gt;</span></code>.</p>
<!--------------------------------------------------------------------------->
<hr class="docutils" />
<p><strong>Exercise: sift [★★★]</strong></p>
<p>The <em>Sieve of Eratosthenes</em> is a way of computing the prime numbers.</p>
<ul class="simple">
<li><p>Start with the sequence <code class="docutils literal notranslate"><span class="pre">&lt;2;</span> <span class="pre">3;</span> <span class="pre">4;</span> <span class="pre">5;</span> <span class="pre">6;</span> <span class="pre">...&gt;</span></code>.</p></li>
<li><p>Take 2 as prime.  Delete all multiples of 2, since they cannot be prime.
That leaves <code class="docutils literal notranslate"><span class="pre">&lt;3;</span> <span class="pre">5;</span> <span class="pre">7;</span> <span class="pre">9;</span> <span class="pre">11;</span> <span class="pre">...&gt;</span></code>.</p></li>
<li><p>Take 3 as prime and delete its multiples.
That leaves <code class="docutils literal notranslate"><span class="pre">&lt;5;</span> <span class="pre">7;</span> <span class="pre">11;</span> <span class="pre">13;</span> <span class="pre">17;</span> <span class="pre">...&gt;</span></code>.</p></li>
<li><p>Take 5 as prime, etc.</p></li>
</ul>
<p>Define a function <code class="docutils literal notranslate"><span class="pre">sift</span> <span class="pre">:</span> <span class="pre">int</span> <span class="pre">-&gt;</span> <span class="pre">int</span> <span class="pre">sequence</span> <span class="pre">-&gt;</span> <span class="pre">int</span> <span class="pre">sequence</span></code>, such that
<code class="docutils literal notranslate"><span class="pre">sift</span> <span class="pre">n</span> <span class="pre">s</span></code> removes all multiples of <code class="docutils literal notranslate"><span class="pre">n</span></code> from <code class="docutils literal notranslate"><span class="pre">s</span></code>. <em>Hint: filter.</em></p>
<!--------------------------------------------------------------------------->
<hr class="docutils" />
<p><strong>Exercise: primes [★★★]</strong></p>
<p>Define a sequence <code class="docutils literal notranslate"><span class="pre">prime</span> <span class="pre">:</span> <span class="pre">int</span> <span class="pre">sequence</span></code>, containing all the prime numbers
starting with 2.</p>
<!--------------------------------------------------------------------------->
<hr class="docutils" />
<p><strong>Exercise: approximately e [★★★★]</strong></p>
<p>The exponential function <span class="math notranslate nohighlight">\(e^x\)</span> can be computed by the following
infinite sum:</p>
<div class="math notranslate nohighlight">
\[
e^x = \frac{x^0}{0!} + \frac{x^1}{1!} + \frac{x^2}{2!} + \frac{x^3}{3!} + \cdots + \frac{x^k}{k!} + \cdots
\]</div>
<p>Define a function <code class="docutils literal notranslate"><span class="pre">e_terms</span> <span class="pre">:</span> <span class="pre">float</span> <span class="pre">-&gt;</span> <span class="pre">float</span> <span class="pre">sequence</span></code>. Element <code class="docutils literal notranslate"><span class="pre">k</span></code> of the
sequence should be term <code class="docutils literal notranslate"><span class="pre">k</span></code> from the infinite sum. For example, <code class="docutils literal notranslate"><span class="pre">e_terms</span> <span class="pre">1.0</span></code> is
the sequence <code class="docutils literal notranslate"><span class="pre">&lt;1.0;</span> <span class="pre">1.0;</span> <span class="pre">0.5;</span> <span class="pre">0.1666...;</span> <span class="pre">0.041666...;</span> <span class="pre">...&gt;</span></code>. The easy way to
compute that involves a function that computes <span class="math notranslate nohighlight">\(f(k) = \frac{x^k}{k!}\)</span>.</p>
<p>Define a function <code class="docutils literal notranslate"><span class="pre">total</span> <span class="pre">:</span> <span class="pre">float</span> <span class="pre">sequence</span> <span class="pre">-&gt;</span> <span class="pre">float</span> <span class="pre">sequence</span></code>, such that
<code class="docutils literal notranslate"><span class="pre">total</span> <span class="pre">&lt;a;</span> <span class="pre">b;</span> <span class="pre">c;</span> <span class="pre">...&gt;</span></code> is a running total of the input elements, i.e.,
<code class="docutils literal notranslate"><span class="pre">&lt;a;</span> <span class="pre">a+.b;</span> <span class="pre">a+.b+.c;</span> <span class="pre">...&gt;</span></code>.</p>
<p>By using <code class="docutils literal notranslate"><span class="pre">e_terms</span></code> and <code class="docutils literal notranslate"><span class="pre">total</span></code> together, you will be able to compute successive
approximations of <span class="math notranslate nohighlight">\(e^x\)</span> that correspond to finite prefixes of the infinite
summation. For example, you could compute the stream
<code class="docutils literal notranslate"><span class="pre">&lt;1.;</span> <span class="pre">2.;</span> <span class="pre">2.5;</span> <span class="pre">2.66666666666666652;</span> <span class="pre">2.70833333333333304;</span> <span class="pre">...&gt;</span></code>. It contains
successive approximations of <span class="math notranslate nohighlight">\(e^1\)</span>, such that element <span class="math notranslate nohighlight">\(n\)</span> of the stream is
<span class="math notranslate nohighlight">\(\sum_{k=0}^{n} \frac{1^k}{k!}\)</span>.</p>
<p>Define a function <code class="docutils literal notranslate"><span class="pre">within</span> <span class="pre">:</span> <span class="pre">float</span> <span class="pre">-&gt;</span> <span class="pre">float</span> <span class="pre">sequence</span> <span class="pre">-&gt;</span> <span class="pre">float</span></code>, such that
<code class="docutils literal notranslate"><span class="pre">within</span> <span class="pre">eps</span> <span class="pre">s</span></code> is the first element of <code class="docutils literal notranslate"><span class="pre">s</span></code> for which the absolute difference
between that element and the element before it is strictly less than <code class="docutils literal notranslate"><span class="pre">eps</span></code>. If
there is no such element, <code class="docutils literal notranslate"><span class="pre">within</span></code> is permitted not to terminate (i.e., go into
an “infinite loop”). As a precondition, the <em>tolerance</em> <code class="docutils literal notranslate"><span class="pre">eps</span></code> must be strictly
positive. For example,
<code class="docutils literal notranslate"><span class="pre">within</span> <span class="pre">0.1</span> <span class="pre">&lt;1.0;</span> <span class="pre">2.0;</span> <span class="pre">2.5;</span> <span class="pre">2.75;</span> <span class="pre">2.875;</span> <span class="pre">2.9375;</span> <span class="pre">2.96875;</span> <span class="pre">...&gt;</span></code> is <code class="docutils literal notranslate"><span class="pre">2.9375</span></code>.</p>
<p>Finally, define a function <code class="docutils literal notranslate"><span class="pre">e</span> <span class="pre">:</span> <span class="pre">float</span> <span class="pre">-&gt;</span> <span class="pre">float</span> <span class="pre">-&gt;</span> <span class="pre">float</span></code> such that <code class="docutils literal notranslate"><span class="pre">e</span> <span class="pre">x</span> <span class="pre">eps</span></code> is
<span class="math notranslate nohighlight">\(e^x\)</span> computed using a finite prefix of the infinite summation above. The
computation should halt when the absolute difference between successive
approximations is below <code class="docutils literal notranslate"><span class="pre">eps</span></code>, which must be strictly positive. For
example, <code class="docutils literal notranslate"><span class="pre">e</span> <span class="pre">1.</span> <span class="pre">0.01</span></code> would be <code class="docutils literal notranslate"><span class="pre">2.71666666666666634</span></code>.</p>
<!--------------------------------------------------------------------------->
<hr class="docutils" />
<p><strong>Exercise: better e [★★★★]</strong></p>
<p>Although the idea for computing <span class="math notranslate nohighlight">\(e^x\)</span> above through the summation of an infinite
series is good, the exact algorithm suggested above could be improved. For
example, computing the 20th term in the sequence leads to a very large numerator
and denominator if <span class="math notranslate nohighlight">\(x\)</span> is large. Investigate that behavior, comparing it to the
built-in function <code class="docutils literal notranslate"><span class="pre">exp</span> <span class="pre">:</span> <span class="pre">float</span> <span class="pre">-&gt;</span> <span class="pre">float</span></code>. Find a better way to structure the
computation to improve the approximations you obtain. <em>Hint: what if when
computing term <span class="math notranslate nohighlight">\(k\)</span> you already had term <span class="math notranslate nohighlight">\(k-1\)</span>? Then you could just do a single
multiplication and division.</em></p>
<p>Also, you could improve the test that <code class="docutils literal notranslate"><span class="pre">within</span></code> uses to determine whether two
values are close. A good one for determining whether <span class="math notranslate nohighlight">\(a\)</span> and <span class="math notranslate nohighlight">\(b\)</span> are close might
be <a class="reference external" href="https://www.boost.org/doc/libs/1_77_0/libs/math/doc/html/math_toolkit/float_comparison.html"><em>relative distance</em></a>:</p>
<div class="math notranslate nohighlight">
\[
\left|\frac{a - b}{\mathit{min}(a, b)}\right| &lt; \epsilon.
\]</div>
<!--------------------------------------------------------------------------->
<hr class="docutils" />
<p><strong>Exercise: different sequence rep [★★★]</strong></p>
<p>Consider this alternative representation of sequences:</p>
<div class="highlight-ocaml notranslate"><div class="highlight"><pre><span></span><span class="k">type</span> <span class="k">&#39;</span><span class="n">a</span> <span class="n">sequence</span> <span class="o">=</span> <span class="nc">Cons</span> <span class="k">of</span> <span class="o">(</span><span class="kt">unit</span> <span class="o">-&gt;</span> <span class="k">&#39;</span><span class="n">a</span> <span class="o">*</span> <span class="k">&#39;</span><span class="n">a</span> <span class="n">sequence</span><span class="o">)</span>
</pre></div>
</div>
<p>How would you code up <code class="docutils literal notranslate"><span class="pre">hd</span> <span class="pre">:</span> <span class="pre">'a</span> <span class="pre">sequence</span> <span class="pre">-&gt;</span> <span class="pre">'a</span></code>,
<code class="docutils literal notranslate"><span class="pre">tl</span> <span class="pre">:</span> <span class="pre">'a</span> <span class="pre">sequence</span> <span class="pre">-&gt;</span> <span class="pre">'a</span> <span class="pre">sequence</span></code>, <code class="docutils literal notranslate"><span class="pre">nats</span> <span class="pre">:</span> <span class="pre">int</span> <span class="pre">sequence</span></code>, and
<code class="docutils literal notranslate"><span class="pre">map</span> <span class="pre">:</span> <span class="pre">('a</span> <span class="pre">-&gt;</span> <span class="pre">'b)</span> <span class="pre">-&gt;</span> <span class="pre">'a</span> <span class="pre">sequence</span> <span class="pre">-&gt;</span> <span class="pre">'b</span> <span class="pre">sequence</span></code> for it? Explain how this
representation is even lazier than our original representation.</p>
<!--------------------------------------------------------------------------->
<hr class="docutils" />
<p><strong>Exercise: lazy hello [★]</strong></p>
<p>Define a value of type <code class="docutils literal notranslate"><span class="pre">unit</span> <span class="pre">Lazy.t</span></code> (which is synonymous with <code class="docutils literal notranslate"><span class="pre">unit</span> <span class="pre">lazy_t</span></code>),
such that forcing that value with <code class="docutils literal notranslate"><span class="pre">Lazy.force</span></code> causes <code class="docutils literal notranslate"><span class="pre">&quot;Hello</span> <span class="pre">lazy</span> <span class="pre">world&quot;</span></code> to be
printed. If you force it again, the string should not be printed.</p>
<!--------------------------------------------------------------------------->
<hr class="docutils" />
<p><strong>Exercise: lazy and [★★]</strong></p>
<p>Define a function <code class="docutils literal notranslate"><span class="pre">(&amp;&amp;&amp;)</span> <span class="pre">:</span> <span class="pre">bool</span> <span class="pre">Lazy.t</span> <span class="pre">-&gt;</span> <span class="pre">bool</span> <span class="pre">Lazy.t</span> <span class="pre">-&gt;</span> <span class="pre">bool</span></code>. It should behave
like a short circuit Boolean AND. That is, <code class="docutils literal notranslate"><span class="pre">lb1</span> <span class="pre">&amp;&amp;&amp;</span> <span class="pre">lb2</span></code> should first force
<code class="docutils literal notranslate"><span class="pre">lb1</span></code>. If it is <code class="docutils literal notranslate"><span class="pre">false</span></code>, the function should return <code class="docutils literal notranslate"><span class="pre">false</span></code>. Otherwise, it
should force <code class="docutils literal notranslate"><span class="pre">lb2</span></code> and return its value.</p>
<!--------------------------------------------------------------------------->
<hr class="docutils" />
<p><strong>Exercise: lazy sequence [★★★]</strong></p>
<p>Implement <code class="docutils literal notranslate"><span class="pre">map</span></code> and <code class="docutils literal notranslate"><span class="pre">filter</span></code> for the <code class="docutils literal notranslate"><span class="pre">'a</span> <span class="pre">lazysequence</span></code> type provided in the
section on laziness.</p>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "cs3110/textbook",
            ref: "main",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./chapters/ds"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="summary.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title"><span class="section-number">9.7. </span>Summary</p>
      </div>
    </a>
    <a class="right-next"
       href="../interp/intro.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title"><span class="section-number">10. </span>Interpreters</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Michael R. Clarkson et al.
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2025.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../_static/scripts/bootstrap.js?digest=bd9e20870c6007c4c509"></script>
<script src="../../_static/scripts/pydata-sphinx-theme.js?digest=bd9e20870c6007c4c509"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>